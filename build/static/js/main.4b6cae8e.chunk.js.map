{"version":3,"sources":["services/login.js","services/gameboard.js","services/signup.js","components/Notification.js","services/use-notification.js","services/use-auth.js","components/Login.js","components/VisibleButton.js","utils/imageHelper.js","components/AddContentCircle.js","components/LoadingSquare.js","components/DragComponent.js","services/socketManager.js","services/icon.js","components/Icon.js","components/Dashboard.js","components/MasterBuilderBar.js","components/MessengerBar.js","components/Gameboard.js","components/Layout.js","App.js","reportWebVitals.js","index.js"],"names":["login","user","a","axios","post","response","console","log","headers","data","baseUrl","token","setToken","newToken","getGameBoards","sourceToken","config","Authorization","cancelToken","get","getGameBoard","boardId","createGameBoard","newBoard","formData","FormData","append","mapImage","name","updateGameBoardImage","file","put","deleteGameBoard","id","delete","retrieveToken","createUser","credentials","NotificationError","errorType","notify","useNotify","message","Notification","type","notification","className","notifyContext","createContext","ProvideNotify","children","useState","setMessage","setErrorType","successType","setSuccessType","setTimeout","notificationAlert","suppliedError","useProvideNotify","Provider","value","useContext","authContext","ProvideAuth","auth","userId","setUserId","username","setUsername","logIn","loginService","loggedUser","window","localStorage","setItem","JSON","stringify","gameBoardService","logOut","removeItem","exception","signUp","newUser","signUpService","useEffect","loggedUserJson","getItem","parse","useProvideAuth","useAuth","JoinSession","sessionID","setSessionID","history","useHistory","onSubmit","e","preventDefault","checkName","test","checkSession","push","pathname","from","state","Math","random","onChange","target","LoginForm","password","setPassword","handleSubmit","placeholder","SignUp","handleSignUp","passwordConfirm","setPasswordConfirm","SignUpForm","OptionButton","handleClick","onClick","DemoButton","Login","field","setField","VisibleButton","props","visible","setVisible","makeContentRef","useRef","style","ref","label","React","cloneElement","buffer","arraybuffer","Uint8Array","imageBlob","Blob","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","this","result","blobReaderPromise","then","AddContentCircle","color","LoadingSquare","Draggable","socket","position","updatePosition","deleteIcon","x","y","drop","setDrop","dragRef","posRef","handleDragMove","aspectBox","document","getElementById","getBoundingClientRect","current","left","clientX","width","top","clientY","height","stopPropagation","handlePointerUp","bounding","display","removeEventListener","preventBehavior","icon","addEventListener","passive","firstRender","onPointerDown","getIcons","createIcon","iconInfo","updateIcon","disconnectSocket","disconnect","initiateDMSocket","io","emit","on","initiateGuestSocket","callback","check","goBack","userEntryExit","dmDisconnecting","newIcon","addIcon","iconObj","moveIcon","iconPosition","iconId","clearIcon","changeMap","updateMap","sendMessage","receiveMessage","Icon","content","LogoutButton","PopUpNotice","onMouseEnter","onMouseLeave","BoardTile","thisBoard","gameBoards","setBoards","setBoardId","setLoading","loading","thumbnail","setThumbnail","clickRef","deleteGameboard","confirm","newGameBoards","filter","board","length","getElementsByClassName","click","highlightClick","hasAttribute","oldSelect","removeAttribute","setAttribute","imageUtility","catch","error","alt","draggable","src","to","BoardDisplay","CreateBoard","createNewBoard","boardName","setBoardName","boxRef","fileRef","regTest","files","Error","checkForClick","event","contains","encType","required","autoFocus","htmlFor","DmButtons","UserBlock","SideBar","MapImageView","displayImage","icons","map","backgroundColor","MapTray","Dashboard","boards","setDisplayImage","setIcons","postedBoard","updateDashBoard","concat","dashImage","source","CancelToken","loadedBoards","getBoards","cancel","updateMapTile","boardFocus","find","BuildIcon","setContent","setColor","blur","onFocus","innerWidth","transform","onBlur","autoComplete","defaultValue","FileBase64","setImage64","handleChange","socketServices","MasterBuilder","float","setFloat","option","setOption","navBarVis","setNavBarVis","iconService","box","SystemMessage","MeMessage","sender","ThemMessage","MessengerBar","session","messageText","setMessageText","messages","setMessages","blueCircleRef","bottomRef","scrollIntoView","behavior","systemMsg","freshText","replace","match","textSanitizer","newMessage","onKeyDown","key","requestSubmit","size","mapSrc","DropMenu","sessionLive","connectToSocket","DropDownNav","visibility","setVisibility","authCheck","Gameboard","image64","setSessionLive","params","location","useLocation","guest","statusType","gameBoard","image","boardImage","loadGameBoard","guestAuthorization","Layout","path","render","component","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.4b6cae8e.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl=\"/api/login\"\r\n\r\nconst login = async (user) => {\r\n  const response = await axios.post(baseUrl, user)\r\n  console.log(response.headers)\r\n  return response.data\r\n}\r\n\r\n\r\nexport default { login }","import axios from 'axios'\r\nconst baseUrl = '/api/gameboards'\r\n\r\nlet token = null\r\n\r\nconst setToken = (newToken) => {\r\n  !newToken\r\n    ? token = null\r\n    : token = `bearer ${newToken}`\r\n}\r\n\r\nconst retrieveToken = () => {\r\n  return token;\r\n}\r\n\r\nconst getGameBoards = async (sourceToken = null) => {\r\n  const config = {\r\n    headers: { Authorization: token },\r\n    cancelToken: sourceToken\r\n  }\r\n\r\n  const response = await axios.get(baseUrl, config)\r\n  return response.data\r\n}\r\n\r\nconst getGameBoard = async (boardId, sourceToken) => {\r\n  const config = {\r\n    cancelToken: sourceToken\r\n  }\r\n  const response = await axios.get(`${baseUrl}/${boardId}`, config)\r\n  return response.data\r\n}\r\n\r\nconst createGameBoard = async (newBoard) => {\r\n  const config = {\r\n    headers: {\r\n      Authorization: token,\r\n      'Content-type': 'multipart/form-data'\r\n    }\r\n  }\r\n\r\n  const formData = new FormData();\r\n  formData.append('myImage', newBoard.mapImage)\r\n  formData.append('title', newBoard.name)\r\n\r\n  const response = await axios.post(baseUrl, formData, config)\r\n  return response.data\r\n}\r\n\r\nconst updateGameBoardImage = async(file, boardId) => {\r\n  const formData = new FormData();\r\n  formData.append('myImage', file)\r\n\r\n  const response = await axios.put(`${baseUrl}/${boardId}`, formData)\r\n  return response.data\r\n}\r\n\r\nconst deleteGameBoard = async(id) => {\r\n  console.log('id', id)\r\n  const config = {\r\n    headers: { Authorization: token }\r\n  }\r\n\r\n  const response = await axios.delete(`${baseUrl}/${id}`, config)\r\n  return response.data\r\n}\r\n\r\nexport default {\r\n  setToken, \r\n  getGameBoards, \r\n  getGameBoard, \r\n  createGameBoard, \r\n  updateGameBoardImage,\r\n  deleteGameBoard, \r\n  retrieveToken\r\n}","import axios from 'axios'\r\nconst baseUrl=\"/api/users\"\r\n\r\nconst createUser = async (credentials) => {\r\n  const response = await axios.post(baseUrl, credentials)\r\n  return response.data\r\n}\r\n\r\nexport default { createUser }","import React from 'react'\r\nimport { useNotify } from '../services/use-notification'\r\n\r\nfunction NotificationError({errorType}) {\r\n  const notify = useNotify()\r\n\r\n  return (\r\n    notify.message && notify.errorType === errorType\r\n    ? <Notification type=\"errorMessage\" notification={notify.message} />\r\n    : null\r\n  )\r\n}\r\n\r\nfunction NotificationSuccess({successType}) {\r\n  const notify = useNotify()\r\n\r\n  return (\r\n    notify.message && notify.successType === successType\r\n    ? <Notification type=\"successMessage\" notification={notify.message} />\r\n    : null\r\n  )\r\n}\r\n\r\n\r\nfunction Notification({ notification, type }) {\r\n\r\n  return (\r\n    <div className={`noselect ${type}`}>\r\n      {notification}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport { NotificationError, NotificationSuccess }","import React, { useState, useEffect, useContext, createContext } from 'react'\r\nimport { NotificationError } from '../components/Notification'\r\n\r\nconst notifyContext = createContext()\r\n\r\nexport function ProvideNotify({ children }) {\r\n  const notify = useProvideNotify();\r\n  return <notifyContext.Provider value={notify}>{children}</notifyContext.Provider>\r\n}\r\n\r\nexport const useNotify = () => {\r\n  return useContext(notifyContext)\r\n}\r\n\r\nfunction useProvideNotify() {\r\n  const[message, setMessage] = useState('')\r\n  const[errorType, setErrorType] = useState('')\r\n  const[successType, setSuccessType] = useState('')\r\n\r\n  const notify = ({notification, errorType, successType }) => {\r\n    setMessage(notification)\r\n    setErrorType(errorType || '')\r\n    setSuccessType(successType || '')\r\n\r\n    setTimeout(() => {\r\n      setMessage('')\r\n      setErrorType('')\r\n      setSuccessType('')\r\n    }, 2000)\r\n  }\r\n\r\n  const notificationAlert = (suppliedError) => {\r\n    console.log(suppliedError)\r\n    return (\r\n      suppliedError === errorType\r\n        ? <NotificationError notification={message} />\r\n        : null   \r\n    )\r\n  }\r\n\r\n  return {\r\n    message,\r\n    errorType,\r\n    successType,\r\n    notify,\r\n    notificationAlert\r\n  }\r\n}\r\n\r\n","import React, { useState, useEffect, useContext, createContext } from 'react'\r\nimport loginService from './login'\r\nimport gameBoardService from './gameboard'\r\nimport signUpService from '../services/signup'\r\nimport { useNotify } from '../services/use-notification'\r\n\r\n\r\nconst authContext = createContext();\r\n\r\nexport function ProvideAuth({  children }) {\r\n  const auth = useProvideAuth();\r\n  return <authContext.Provider value={auth}>{children}</authContext.Provider>\r\n}\r\n\r\nexport const useAuth = () => {\r\n  return useContext(authContext)\r\n}\r\n\r\nfunction useProvideAuth() {\r\n  const [userId, setUserId] = useState(null)\r\n  const [username, setUsername ] = useState('')\r\n  const notify = useNotify()\r\n\r\n  const logIn = async (user) => {\r\n    try {\r\n      const loggedUser = await loginService.login(user)\r\n      window.localStorage.setItem(\r\n        'loggedDungeonMaster', JSON.stringify(loggedUser)\r\n      )\r\n\r\n      gameBoardService.setToken(loggedUser.token)\r\n\r\n      setUserId(loggedUser.id)\r\n      setUsername(loggedUser.username)\r\n    } catch(exception) {\r\n      notify.notify({\r\n        notification: 'Username or Password Incorrect',\r\n        errorType: 'badCredentials'\r\n      })\r\n      console.log('failure in useProvideAuth.logIn()', exception)\r\n    }\r\n  }\r\n\r\n  const logOut = async () => {\r\n    try {\r\n      window.localStorage.removeItem('loggedDungeonMaster')\r\n      gameBoardService.setToken(null)\r\n\r\n      setUserId(null)\r\n      setUsername('')\r\n    } catch(exception) {\r\n      console.log('failed to logout', exception);\r\n    }\r\n  }\r\n\r\n  const signUp = async (newUser) => {\r\n    const response = await signUpService.createUser(newUser)\r\n    return response\r\n  }\r\n\r\n  useEffect(() => {\r\n    const setToken = () => {\r\n      const loggedUserJson = window.localStorage.getItem('loggedDungeonMaster')\r\n      if(loggedUserJson) {\r\n        const user = JSON.parse(loggedUserJson)\r\n        setUserId(user.id)\r\n        setUsername(user.username)\r\n        gameBoardService\r\n          .setToken(user.token)\r\n      }\r\n    }\r\n    setToken()\r\n    return () => {\r\n      setToken()\r\n    }\r\n  }, [userId])\r\n\r\n  return {\r\n    username,\r\n    userId,\r\n    logIn,\r\n    logOut,\r\n    signUp\r\n  }\r\n}","import React, { useState, useEffect, useRef } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useAuth } from '../services/use-auth'\r\nimport { useNotify } from '../services/use-notification'\r\nimport { NotificationError, NotificationSuccess } from './Notification'\r\n\r\nfunction JoinSession() {\r\n  const [sessionID, setSessionID] = useState('')\r\n  const [username, setUsername] = useState('')\r\n  const history = useHistory()\r\n  const notify = useNotify();\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    const checkName = /(\\$|{|}|\\/|\\\\|\\*|\\(|\\)\\`)+/g.test(username)\r\n    const checkSession = /(\\$|{|}|\\/|\\\\|\\*|\\(|\\)\\`)+/g.test(username)\r\n\r\n    if(!checkName && !checkSession) {\r\n      return (\r\n        history.push({\r\n          pathname: `/gameboard/${sessionID}`,\r\n          from: '/',\r\n          state: {\r\n            username: username,\r\n            id: Math.random()\r\n          }\r\n        })\r\n      )\r\n    } else {\r\n      notify.notify({\r\n        notification: 'Please ensure no special characters in name and valid sessionID',\r\n        errorType: 'guestJoin'\r\n      })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form className=\"formContainer row\" onSubmit={handleSubmit}>\r\n      <NotificationError errorType='guestJoin' />\r\n      <label className=\"label col-lg-7 col-md-6 col-8 mb-2\">Player Name</label>\r\n      <input\r\n        type=\"text\"\r\n        value={username}\r\n        onChange={({ target }) => setUsername(target.value)}\r\n        className=\"submitButtons col-lg-6 col-md-6 col-8 mb-2 inputs\"\r\n        />\r\n      <label className=\"label col-lg-7 col-md-6 col-8 mb-2\">Session ID</label>\r\n      <input\r\n        type=\"text\"\r\n        value={sessionID}\r\n        onChange={({ target }) => setSessionID(target.value)}\r\n        className=\"submitButtons col-lg-6 col-md-6 col-8 mb-2 inputs\"\r\n        />\r\n        <button className=\"col-lg-4 col-md-6 col-8 mb-2 submitButtons buttons\" type=\"submit\">Join!</button>\r\n    </form>\r\n  )\r\n}\r\n\r\n\r\nfunction LoginForm() {\r\n  const [username, setUsername] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const auth = useAuth()\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault()\r\n\r\n    try {\r\n      const user = {\r\n        username,\r\n        password\r\n      }\r\n      auth.logIn(user)\r\n    } catch (exception) {\r\n      console.log(exception)\r\n      \r\n    }\r\n  }\r\n\r\n  return (\r\n    <form className=\"formContainer row\" onSubmit={handleSubmit}>\r\n      <label className=\"label col-lg-6 col-md-6 col-8\">Username</label>\r\n      <input\r\n          type='text'\r\n          placeholder='Username'\r\n          className=\"col-lg-6 col-md-6 col-8 mt-2 mb-4 inputs\"\r\n          value={username}\r\n          onChange={({ target }) => setUsername(target.value)}\r\n      />\r\n      <label className=\"label col-lg-6 col-md-6 col-8\">Password</label>\r\n      <input\r\n        type='password'\r\n        placeholder='Password'\r\n        className=\"col-lg-6 col-md-6 col-8 mt-2 mb-4 inputs\"\r\n        value={password}\r\n        onChange={({ target }) => setPassword(target.value)}\r\n      />\r\n      <div className=\"notifyBoxes col-lg-6 col-md-6 col-8 mb-2\">\r\n        <button className=\"buttons\" type=\"submit\">Login</button>\r\n        <NotificationError errorType='badCredentials' />\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nfunction SignUp({ handleSignUp }) {\r\n  const[username, setUsername] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [passwordConfirm, setPasswordConfirm] = useState('')\r\n  const notify = useNotify();\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n\r\n    if(password === passwordConfirm) {\r\n      handleSignUp(username, password)\r\n    } else {\r\n      notify.notify({\r\n        notification: 'Please ensure passwords match',\r\n        errorType: 'passwordMatch'\r\n      })\r\n    }\r\n  }\r\n \r\n  return (\r\n    <form className=\"formContainer row\" onSubmit={handleSubmit}>\r\n      <label className=\"label col-lg-6 col-md-8 col-8 mb-2\" >Username</label>\r\n      <input\r\n        type='text'\r\n        className=\"col-lg-6 col-md-8 col-8 mb-2 inputs\"\r\n        value={username}\r\n        onChange={({ target }) => setUsername(target.value)}\r\n      />\r\n        <NotificationError errorType='usernameLength' />\r\n      <label className=\"label col-lg-6 col-md-8 col-8 mb-2\">Password</label>\r\n      <input\r\n        type='password'\r\n        className=\"col-lg-6 col-md-8 col-8 mb-2 inputs\"\r\n        value={password}\r\n        onChange={({ target }) => setPassword(target.value)}\r\n      />\r\n      <label className=\"label col-lg-6 col-md-8 col-8 mb-2\">Confirm Password</label>\r\n      <input\r\n        type='password'\r\n        className=\"col-lg-6 col-md-8 col-8 mb-2 inputs\"\r\n        value={passwordConfirm}\r\n        onChange={({ target }) => setPasswordConfirm(target.value)}\r\n      />\r\n      <div className=\"notifyBoxes col-lg-6 col-md-8 col-8 mb-2 pt-2\">\r\n        <button className=\"buttons\" type=\"submit\">Sign Up</button>\r\n        <NotificationError errorType='passwordMatch' />\r\n      </div>\r\n    </form> \r\n  )\r\n}\r\n\r\nfunction SignUpForm () {\r\n  const notify = useNotify();\r\n  const auth = useAuth()\r\n\r\n  const handleSignUp = async (username, password) => {\r\n    try {\r\n      const newUser = { username, password }\r\n      const response = await auth.signUp(newUser)\r\n      if(response) {\r\n        notify.notify({\r\n          notification: `New user ${username} created!`,\r\n          successType: 'userCreated'\r\n        })\r\n      }\r\n    } catch (exception) {\r\n      notify.notify({\r\n        notification: 'Username taken or under 5 character mininmum length',\r\n        errorType: 'usernameLength'\r\n      })\r\n      console.log(exception)\r\n    }\r\n  }\r\n  return (\r\n      <SignUp handleSignUp={handleSignUp} />\r\n  )\r\n}\r\n\r\nconst OptionButton = ({ handleClick, value }) => {\r\n\r\n  return (\r\n    <button value={value} onClick={handleClick} className=\"optionItems px-2 py-1 buttons\">\r\n      {value}\r\n    </button>\r\n  )\r\n}\r\n\r\nconst DemoButton = () => {\r\n  const auth = useAuth()\r\n\r\n  const handleClick = () => {\r\n    try {\r\n      const user = {\r\n        username: 'Travis Draper',\r\n        password: 'travis'\r\n      }\r\n      auth.logIn(user)\r\n    } catch (exception) {\r\n      console.log(exception)\r\n      \r\n    }\r\n  }\r\n\r\n  return (\r\n    <button className=\"optionItems px-1 py-1 mb-2 buttons\" onClick={handleClick}>\r\n      Demo\r\n    </button>\r\n  )\r\n}\r\n\r\nfunction Login() {\r\n  const [field, setField] = useState('Login')\r\n\r\n  const handleClick = ({ target }) => {\r\n    setField(target.value)\r\n  }\r\n\r\n  return (\r\n    <div id=\"background\">\r\n    <h1 className=\"noselect loginTitle\">\r\n        Dungeon Map!\r\n    </h1>\r\n    <div className='loginContainer row mx-3'>\r\n      <div className='loginBox notifyBoxes d-flex'>\r\n        <h2 className=\"noselect titles formTitle\">Login</h2>\r\n        <div className=\"formBoxContainer py-5\">\r\n\r\n        {field === 'Login' ? <LoginForm /> : null}\r\n        {field === 'Join Session' ? <JoinSession /> : null}\r\n        {field === 'Sign Up' ? <SignUpForm /> : null}\r\n\r\n        </div>\r\n        <div className=\" otherOptions d-flex mt-4 mx-2\">\r\n          <OptionButton value=\"Login\" handleClick={handleClick} />\r\n          <OptionButton value=\"Sign Up\" handleClick={handleClick} />\r\n          <OptionButton value=\"Join Session\" handleClick={handleClick} />\r\n        </div>\r\n        <DemoButton />\r\n          \r\n      </div>\r\n\r\n  </div>\r\n  </div>\r\n  )\r\n}\r\n\r\n/*\r\n<div className=\" otherOptions d-flex mx-2\">\r\n          <VisibleButton label=\"Sign Up\" className=\"optionItems px-1 py-1\">\r\n            <SignUpForm />\r\n          </VisibleButton>\r\n          <DemoButton />\r\n          <VisibleButton label=\"Join Game\" className=\"optionItems px-1 py-1\">\r\n            <JoinSession />\r\n          </VisibleButton>\r\n          </div>\r\n          <NotificationSuccess successType=\"userCreated\" />\r\n*/\r\n\r\nexport default Login","import React, { useState, useRef } from 'react'\r\n\r\nfunction VisibleButton (props) {\r\n  const [visible, setVisible] = useState(false)\r\n  const makeContentRef = useRef()\r\n  const toggleVisible = () => {\r\n    setVisible(!visible)\r\n  }\r\n\r\n  return (\r\n    <div className={props.className} style={props.style}>\r\n      <button ref={makeContentRef} onClick={toggleVisible} className=\"buttons signUpButton\">{props.label}</button>\r\n      { visible ? React.cloneElement(props.children, { ...props, visible: visible, setVisible: setVisible })\r\n        : null\r\n      }\r\n      \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default VisibleButton","import axios from 'axios'\r\n\r\nfunction blobReaderPromise (buffer) {\r\n  let arraybuffer = Uint8Array.from(buffer).buffer;\r\n  let imageBlob = new Blob([arraybuffer])\r\n\r\n  return new Promise(function(resolve, reject) {\r\n    let reader = new FileReader()\r\n    reader.readAsDataURL(imageBlob)\r\n    reader.onload = function() {\r\n      resolve(this.result)\r\n    }\r\n  })\r\n}\r\nconst convertBuffertoBlob = (buffer) => {\r\n  const base64 = blobReaderPromise(buffer)\r\n    .then(response => response )\r\n  return base64\r\n}\r\n\r\n\r\nexport default {\r\n  convertBuffertoBlob\r\n}","import React from 'react'\r\n\r\n\r\nfunction AddContentCircle({ color }) {\r\n  return (\r\n    <div style={{'backgroundColor': `${color}`}} className=\" specialBounce AddContentCircle\"> \r\n      <div className=\"noselect AddContentCircleText d-flex\">\r\n        Add content\r\n      </div> \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AddContentCircle","import React from 'react'\r\n\r\nconst LoadingSquare = () => {\r\n\r\n  return (\r\n    <div className=\"loadingSquare\">\r\n        <div className=\"noselect loadingSquareText d-flex\">\r\n        Loading\r\n      </div> \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LoadingSquare","import React, { useState, useEffect, useRef } from 'react';\r\n\r\nfunction Draggable({ \r\n  children, \r\n  position, \r\n  updatePosition, \r\n  deleteIcon, \r\n  id\r\n }) {\r\n  const [drop, setDrop] = useState({ x: position.x, y: position.y })\r\n  const dragRef = useRef()\r\n  const posRef = useRef({\r\n    x: 0,\r\n    y: 0\r\n  })\r\n\r\n  const handlePointerDown = (e) => {\r\n\r\n    const { left, top }  = dragRef.current.getBoundingClientRect()\r\n    posRef.current = {\r\n      x: left - e.clientX,\r\n      y: top - e.clientY\r\n    }\r\n\r\n    window.addEventListener('pointermove', handleDragMove);\r\n    window.addEventListener('pointerup', handlePointerUp);\r\n\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  };\r\n  \r\n  const handleDragMove = (e) => {\r\n    const aspectBox = document.getElementById('aspectRatioBoxBoard').getBoundingClientRect()\r\n\r\n    dragRef.current.style.left = `${(e.clientX + posRef.current.x - aspectBox.left)/aspectBox.width*100}%`\r\n    dragRef.current.style.top = `${(e.clientY + posRef.current.y - aspectBox.top)/aspectBox.height*100}%`\r\n \r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  };\r\n\r\n  const handlePointerUp = (e) => {\r\n    const bounding = dragRef.current.getBoundingClientRect();\r\n\r\n    if(bounding.x < 50 && bounding.y < 50) {\r\n      try {\r\n        deleteIcon(id)\r\n        dragRef.current.style.display = 'none';\r\n      } catch(exception) {\r\n        console.log('Unable to delete icon', exception)\r\n      }\r\n    } else if (drop.x !== dragRef.current.style.left && drop.y !== dragRef.current.style.top) {\r\n      setDrop({\r\n        x: dragRef.current.style.left,\r\n        y: dragRef.current.style.top\r\n      })\r\n    }\r\n    posRef.current = {\r\n      x: 0,\r\n      y: 0\r\n    }\r\n\r\n    window.removeEventListener('pointermove', handleDragMove);\r\n    window.removeEventListener('pointerup', handlePointerUp);\r\n\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  }\r\n\r\n\r\n\r\n  const preventBehavior =(e) => {\r\n    e.preventDefault();\r\n  }\r\n\r\n  useEffect(() => {\r\n    const icon = dragRef.current\r\n    icon.addEventListener('touchmove', preventBehavior, {passive: false})\r\n\r\n    return () => {\r\n      window.removeEventListener('pointerup', handlePointerUp)\r\n      icon.removeEventListener('touchmove', preventBehavior, {passive: false})\r\n      window.removeEventListener('pointermove', handleDragMove);\r\n      window.removeEventListener('pointerup', handlePointerUp);\r\n    } \r\n\r\n  }, [])\r\n\r\n\r\n  const firstRender = useRef(true);\r\n  useEffect(() => {\r\n    if(!firstRender.current) {\r\n      updatePosition({ \r\n        x: drop.x, \r\n        y: drop.y \r\n      }, id)\r\n    }\r\n  }, [drop.x, drop.y] ) \r\n\r\n  useEffect(() => { firstRender.current = false }, [])\r\n  return (\r\n    <div\r\n      onPointerDown={handlePointerDown}\r\n      style={{top: position.y, left: position.x}}\r\n      className=\"draggableBox\"\r\n      ref={dragRef}\r\n    >\r\n      {children}\r\n    </div>\r\n\r\n  )\r\n}\r\n\r\nexport default Draggable","import io from 'socket.io-client'\r\n\r\nlet socket;\r\n//${window.location.protocol}//${window.location.host}\r\nconst initiateDMSocket = (boardId) => {\r\n\r\n  console.log(`Dungeon Master connecting to socket...`);\r\n  socket = io()\r\n  console.log('DMsocket', socket)\r\n\r\n  socket.emit('join', {boardId, username: \"DungeonMaster\"})\r\n  socket.on('user_joined')\r\n  socket.on('user_disconnect')\r\n}\r\n\r\nconst initiateGuestSocket = (boardId, history, username, callback) => {\r\n\r\n  socket = io()\r\n  socket.emit('guest', boardId)\r\n\r\n  socket.on('guestCheck', (check) => {\r\n    if(check) {\r\n      console.log('Guest registering to Room')\r\n      socket.emit('join', { boardId, username })\r\n      socket.on('dm_disconnect', () => {\r\n        console.log('The guests have received notice from the Server, the DM is gone')\r\n        disconnectSocket()\r\n        return history.goBack()\r\n      })\r\n      return callback()\r\n    } else {\r\n      console.log('no access!')\r\n      socket.disconnect();\r\n      return history.goBack()\r\n    }\r\n  })\r\n}\r\n\r\nconst userEntryExit = (callback) => {\r\n  if(socket) {\r\n    socket.on('user_joined', (data) => {\r\n      callback(data)\r\n    })\r\n    socket.on('user_disconnect', (data) => {\r\n      callback(data)\r\n    })\r\n  }\r\n}\r\n\r\n\r\nconst createIcon = (newIcon) => {\r\n\r\n  if(socket) {\r\n    console.log('you want to create this icon', newIcon)\r\n    socket.emit('create_icon', newIcon)\r\n  }\r\n}\r\n\r\nconst addIcon = (callback) => {\r\n\r\n  if(socket){\r\n      socket.on('add_icon', (iconObj) => {\r\n      console.log('Creating this icon', iconObj)\r\n      return callback(iconObj)\r\n    })\r\n  }\r\n}\r\n\r\nconst moveIcon = (iconPosition, iconId) => {\r\n\r\n  if(socket) {\r\n    console.log('You want to move this icon', iconId)\r\n    socket.emit('move_icon', { iconPosition, iconId })\r\n  }\r\n}\r\n\r\nconst updateIcon = (callback) => {\r\n\r\n  if(socket) {\r\n    socket.on('icon_updated', ({ iconPosition, iconId }) => {\r\n      console.log('Moving this icon', iconId)\r\n      return callback(iconPosition, iconId)\r\n    })\r\n  }\r\n}\r\n\r\nconst deleteIcon = (id) => {\r\n\r\n  if(socket) {\r\n    console.log('You want to delete this icon', id)\r\n    socket.emit('delete_icon', id)\r\n  }\r\n}\r\n\r\nconst clearIcon = (callback) => {\r\n\r\n  if(socket) {\r\n    socket.on('clear_icon', (id) => {\r\n      console.log('Removing this icon: ', id)\r\n      callback(id)\r\n    })\r\n  }\r\n}\r\n\r\nconst changeMap = () => {\r\n\r\n  if(socket) {\r\n    console.log('You want to change the map image')\r\n    socket.emit('change_map')\r\n  }\r\n}\r\n\r\nconst updateMap = (callback) => {\r\n  if(socket) {\r\n    socket.on('update_map', () => callback())\r\n  }\r\n}\r\n\r\n\r\nconst sendMessage = (message) => {\r\n  if(socket) {\r\n    console.log('You want to send a message')\r\n    socket.emit('send_message', message)\r\n  }\r\n}\r\n\r\nconst receiveMessage = (callback) => {\r\n  if(socket) {\r\n    socket.on('receive_message', (data) => {\r\n      console.log('receiving new message!')\r\n      return callback(data)\r\n    })\r\n  }\r\n}\r\n\r\nconst dmDisconnecting = () => {\r\n  if(socket) {\r\n    console.log('The DM is sending \"dm_disconnecting\" to the Server')\r\n    socket.emit('dm_disconnecting')\r\n  }\r\n}\r\n\r\nconst disconnectSocket = () => {\r\n  if(socket) {\r\n    socket.disconnect()\r\n    socket = null;\r\n  }\r\n}\r\n\r\n\r\n\r\nexport default {\r\n  initiateDMSocket,\r\n  initiateGuestSocket,\r\n  userEntryExit,\r\n  disconnectSocket,\r\n  dmDisconnecting,\r\n  createIcon,\r\n  addIcon,\r\n  moveIcon,\r\n  updateIcon,\r\n  deleteIcon,\r\n  clearIcon,\r\n  changeMap,\r\n  updateMap,\r\n  sendMessage,\r\n  receiveMessage\r\n}","import axios from 'axios'\r\nconst baseUrl = '/api/icons'\r\n\r\nconst getIcons = async(boardId) => {\r\n  const response = await axios.get(`${baseUrl}/${boardId}`)\r\n  console.log('ICONS ', response.data)\r\n  return response.data\r\n}\r\n\r\nconst createIcon = async(iconInfo) => {\r\n  const response = await axios.post(baseUrl, iconInfo)\r\n  return response.data\r\n}\r\n\r\nconst updateIcon = async(iconInfo, id) => {\r\n  const response = await axios.put(`${baseUrl}/${id}`, iconInfo)\r\n  return response.data\r\n}\r\n\r\nconst deleteIcon = async(id) => {\r\n  console.log(id)\r\n  const response = await axios.delete(`${baseUrl}/${id}`)\r\n  return response.data\r\n}\r\n\r\nexport default {\r\n  getIcons,\r\n  createIcon,\r\n  updateIcon,\r\n  deleteIcon\r\n}","import React, { useEffect, useCallback } from 'react'\r\nimport Draggable from './DragComponent'\r\nimport iconService from '../services/icon'\r\nimport socketServices from '../services/socketManager'\r\n\r\nfunction debounce(func, timeout = 1000) {\r\n  let timer;\r\n  return (...args) => {\r\n    clearTimeout(timer)\r\n    timer = setTimeout(() => { func.apply(this, args); }, timeout)\r\n  }\r\n}\r\n\r\n\r\n\r\nfunction Icon({ \r\n  style, \r\n  content, \r\n  id, \r\n  position, \r\n  display=false, \r\n  deleteIcon,\r\n  updatePosition }) {\r\n  \r\n/*\r\n const updateIcon = useCallback(\r\n    debounce(async(position) => {\r\n      socketServices.moveIcon(position, id)\r\n      const updatedIcon = await iconService.updateIcon(position, id)\r\n    }, 1000),\r\n    []\r\n  )\r\n*/\r\n\r\n  return (\r\n    <>\r\n    {display\r\n      ? <div className=\"draggableBox\" style={{ top: position.y, left: position.x }}>\r\n          <div style={style} className=\"noselect playerIcon\">\r\n            {content}\r\n          </div>\r\n        </div>\r\n      : <Draggable \r\n          updatePosition={updatePosition} \r\n          deleteIcon={deleteIcon} \r\n          position={position}\r\n          id={id}\r\n        >\r\n          <div style={style} className=\"noselect playerIcon\">\r\n            {content}\r\n          </div>\r\n        </Draggable>\r\n    }\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Icon","import React, { useState, useEffect, useRef } from 'react'\r\nimport { Switch, Route, Link, Redirect, useRouteMatch } from 'react-router-dom'\r\nimport { BsXCircle, BsCheckCircle, BsMicFill } from 'react-icons/bs'\r\nimport { useAuth } from '../services/use-auth'\r\nimport gameBoardService from '../services/gameboard'\r\nimport VisibleButton from './VisibleButton'\r\nimport axios from 'axios'\r\nimport imageUtility from '../utils/imageHelper'\r\nimport AddContentCircle from './AddContentCircle'\r\nimport LoadingSquare from './LoadingSquare'\r\nimport Icon from './Icon'\r\n\r\nfunction LogoutButton() {\r\n  const auth = useAuth()\r\n\r\n  return (\r\n    <div className=\"logoutBox optionItems px-1 py-1 col-6\">\r\n      <button className=\"buttons logOutButton\" onClick={() => auth.logOut()}>Logout</button>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nfunction PopUpNotice(props) {\r\n  const [visible, setVisible] = useState(false)\r\n  const { label, className } = props\r\n\r\n  return (\r\n    <div onMouseEnter={() => setVisible(true)} onMouseLeave={() => setVisible(false)} className={`${className} my-2`}>\r\n      {props.children}\r\n      {visible ? <div className='popUpVisible'>{label}</div> : null }\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction BoardTile({ thisBoard, gameBoards, setBoards, setBoardId, loading, setLoading}) {\r\n  const [thumbnail, setThumbnail] = useState('')\r\n  const clickRef = useRef()\r\n\r\n  const deleteGameboard = async() => {\r\n    try {\r\n      if (window.confirm('Do you want to delete this board?')) {\r\n        setLoading(true)\r\n        await gameBoardService.deleteGameBoard(thisBoard.id)\r\n        const newGameBoards = gameBoards.filter(board => board.id !== thisBoard.id)\r\n        setBoards(newGameBoards)\r\n        setLoading(false)\r\n        if(newGameBoards.length > 0) {\r\n          document.getElementsByClassName('thumbnailBox')[newGameBoards.length-1].click()\r\n        }\r\n      }\r\n    } catch (exception) {\r\n      console.log(exception)\r\n    }\r\n  }\r\n\r\n  const highlightClick = (e) => {\r\n    setBoardId(thisBoard.id)\r\n    if(!clickRef.current.hasAttribute('id')) {\r\n      const oldSelect = document.getElementById('highlightSelect')\r\n      if(oldSelect) { \r\n        oldSelect.removeAttribute('id') \r\n      }\r\n      clickRef.current.setAttribute('id', 'highlightSelect')\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const thumbNailImage = imageUtility.convertBuffertoBlob(thisBoard.thumbnail.data)\r\n        .then( response => setThumbnail(response))\r\n        .catch( error => console.log(error) )\r\n\r\n    document.getElementsByClassName('thumbnailBox')[0].click()\r\n  }, [])\r\n\r\n  return (\r\n    <div ref={clickRef} className={`boardTile row ${thisBoard.board}`}>\r\n      <div onClick={highlightClick}  className=\"boardTitle pe-0 d-flex col-4\">\r\n        <div className=\"boardTitleText\">{thisBoard.board}</div>\r\n      </div>\r\n      <div onClick={highlightClick} className=\"thumbnailBox col-6 py-2 ps-3\">\r\n        <img alt=\"Gameboard Map minified view\" draggable=\"false\" className=\"thumbnailImage img-fluid\" src={thumbnail} />\r\n      </div>\r\n      <div className=\"buttonContainer ps-0 pe-0 col-2 row\">\r\n        <PopUpNotice label='Delete Gameboard'className=\"ps-0 deleteButton\">\r\n          <BsXCircle className=\"deleteIcon\" onClick={deleteGameboard}/>\r\n        </PopUpNotice>\r\n        <PopUpNotice label='Host Gameboard' className=\"ps-0  enterButton\">\r\n          <Link className=\"toGameboardLink\" to={`/gameboard/${thisBoard.id}`}>\r\n            <BsCheckCircle className=\"enterIcon\"/>\r\n          </Link>\r\n        </PopUpNotice>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction BoardDisplay(props) {\r\n  return (\r\n    <div className=\"boardsDisplay\">\r\n      {props.children}\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction CreateBoard({setVisible, createNewBoard}) {\r\n  const [boardName, setBoardName] = useState('')\r\n  const boxRef = useRef();\r\n  const fileRef = useRef();\r\n  const regTest = /image\\/(png|jpeg)/\r\n  const handleSubmit = async (e) => {\r\n    \r\n    e.preventDefault()\r\n    try {\r\n      let file = fileRef.current.files[0]\r\n      if(regTest.test(file.type)) {\r\n        console.log('success!')\r\n        setVisible(false)\r\n        await createNewBoard(boardName, file)\r\n      } else {\r\n        throw new Error({ message: 'wrong file type!' })\r\n      }\r\n    } catch (exception) {\r\n      console.log(exception)\r\n    }\r\n    \r\n  }\r\n\r\n  const checkForClick = (event) => {\r\n    if(!boxRef.current || !boxRef.current.contains(event.target)) {\r\n        setVisible(false)\r\n    }\r\n  }\r\n \r\n  useEffect(() => {\r\n    document.addEventListener('click', checkForClick)\r\n    return () => {\r\n      document.removeEventListener('click', checkForClick)\r\n    }\r\n  })\r\n\r\n  return(\r\n    <div ref={boxRef} className=\"newBoardFormBox popUpBoxes py-2 px-2\">\r\n      <form id=\"uploadFormDash\" className=\"row py-3 px-3\" encType='multipart/form-data' onSubmit={handleSubmit}>\r\n        <label className=\"label newMapNameLabel\">Board Name:</label>\r\n        <input\r\n          type=\"text\"\r\n          className=\"inputs pb-2 newMapName col-10 my-2\"\r\n          value={boardName}\r\n          onChange={({ target }) => setBoardName(target.value)}\r\n          required\r\n          autoFocus\r\n        />\r\n        <label htmlFor=\"fileUploadDash\" className=\"col-4 px-1 py-1 mb-2 fileUpload submitButtons buttons\">Upload Image</label>\r\n        <input\r\n          type='file'\r\n          className='inputs newMapName'\r\n          ref={fileRef}\r\n          id=\"fileUploadDash\"\r\n          name=\"file\"\r\n          required\r\n        />\r\n        <button className=\"col-6 mt-4 submitButtons buttons\" type='submit'>Create</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction DmButtons(props) {\r\n\r\n  return (\r\n    <div className=\"dmButtonsBox d-flex\">\r\n      {props.children}\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction UserBlock() {\r\n  const auth = useAuth()\r\n\r\n  return (\r\n    <div className=\"userBlock pt-1 pb-1 pt-lg-3 pb-lg-3 row\">\r\n      <div className=\"dashTitle col-12\">\r\n        <p className=\"titleName\">Dungeon Master:</p>\r\n        <p className=\"titleName ms-2 ms-lg-0\">{auth.username}</p>\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction SideBar(props) {\r\n\r\n  return (\r\n    <div className=\"sideBarColumn col-12 col-lg-2 d-flex\">\r\n      {props.children}\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction MapImageView({ displayImage, boardId, icons }) {\r\n  \r\n  return (\r\n    <div className=\"mapImageView col-9 col-md-8 d-flex\">\r\n      <div className=\"imageBox d-flex\">\r\n        <div id=\"aspectRatioBoxTray\">\r\n          {icons.map(icon => {\r\n            return <Icon\r\n              key={icon.id} \r\n              style={{backgroundColor: icon.color}} \r\n              content={icon.content}\r\n              id={icon.id}\r\n              position={icon.position}\r\n              display={true}\r\n              />\r\n          })}\r\n          <img draggable=\"false\" className=\"dashMapImage mapImage img-fluid\" key={boardId} alt='' src={displayImage} />\r\n        </div>\r\n      </div>\r\n    </div> \r\n  )\r\n}\r\n\r\nfunction MapTray(props) {\r\n\r\n  return (\r\n    <div className=\"mapTrayContainer col-12 col-lg-10  d-flex\">\r\n      {props.children}\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction Dashboard() {\r\n  const [boards, setBoards] = useState([])\r\n  const [boardId, setBoardId] = useState('')\r\n  const [displayImage, setDisplayImage] = useState(null)\r\n  const [icons, setIcons] = useState([])\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  const createNewBoard = async(boardName, file) => {\r\n    setLoading(true)\r\n    try {\r\n      const newBoard = {\r\n        name: boardName,\r\n        mapImage: file\r\n      }\r\n      const postedBoard = await gameBoardService.createGameBoard(newBoard)\r\n      if(postedBoard) {\r\n        await updateDashBoard(postedBoard)\r\n        setBoards(boards.concat(postedBoard))\r\n        setLoading(false)\r\n        document.getElementsByClassName('thumbnailBox')[boards.length].click()\r\n      }\r\n    } catch (exception) {\r\n      console.log(exception)\r\n    }\r\n  }\r\n\r\n  const updateDashBoard = (board) => {\r\n    imageUtility.convertBuffertoBlob(board.dashImage.data)\r\n      .then(response => {\r\n        setDisplayImage(response)\r\n      })\r\n      .catch(error => console.log('error with updating dash', error.message))\r\n  }\r\n\r\n  useEffect(() => {\r\n    const source = axios.CancelToken.source()\r\n    const getBoards = async() => {\r\n      setLoading(true)\r\n      try {\r\n        const loadedBoards = await gameBoardService.getGameBoards(source.token);\r\n        \r\n        setBoards(loadedBoards)\r\n        if(loadedBoards.length > 0) {\r\n          if(loadedBoards[0].dashImage) {\r\n            await updateDashBoard(loadedBoards[0])\r\n            setIcons(loadedBoards[0].icons)\r\n            setLoading(false)\r\n          }\r\n        } else {\r\n          setLoading(false)\r\n        }\r\n      } catch(exception) {\r\n        console.log(exception)\r\n      }\r\n    }\r\n    getBoards()\r\n    return () => {source.cancel()}\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const updateMapTile = async(boards) => {\r\n      setLoading(true)\r\n      try {\r\n        if(boards) {\r\n          const boardFocus = boards.find(board => board.id === boardId)\r\n          if(boardFocus && boardFocus.dashImage) {\r\n            await updateDashBoard(boardFocus)\r\n            setIcons(boardFocus.icons)\r\n            setLoading(false)\r\n          }\r\n        } \r\n      } catch(exception) {\r\n        console.log(exception)\r\n      }\r\n    }\r\n    updateMapTile(boards)\r\n    return () => updateMapTile()\r\n  }, [boardId])\r\n\r\n\r\n  const handleLinkClick = () => {\r\n    document.getElementsByClassName('signUpButton')[0].click()\r\n  }\r\n\r\n  return (\r\n    <div className=\"row dashboardRow\">\r\n      <SideBar>\r\n        <UserBlock />\r\n        <DmButtons>\r\n          <VisibleButton label=\"Create\" className=\"optionItems col-6 px-1 py-1 buttonFix\">\r\n            <CreateBoard createNewBoard={createNewBoard} />\r\n          </VisibleButton>\r\n          <LogoutButton />\r\n        </DmButtons>\r\n        <BoardDisplay> \r\n          {boards.map(board => ( \r\n            <BoardTile \r\n              key={board.id} \r\n              gameBoards={boards} \r\n              setBoards={setBoards} \r\n              thisBoard={board} \r\n              setBoardId={setBoardId}\r\n              loading={loading}\r\n              setLoading={setLoading}\r\n            /> \r\n          ))}\r\n        </BoardDisplay>\r\n      </SideBar>\r\n      <MapTray>\r\n        {loading\r\n          ? <LoadingSquare />\r\n          :  boards.length > 0\r\n              ? <MapImageView boardId={boardId} displayImage={displayImage} icons={icons} />\r\n              : <div onClick={handleLinkClick} className=\"addContentBox\">\r\n                  <AddContentCircle color={'rgb(187, 0, 0)'}/>\r\n                </div>\r\n        }\r\n      </MapTray>\r\n      \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Dashboard","import React, { useState, useRef, useEffect } from 'react'\r\nimport gameBoardService from '../services/gameboard'\r\nimport imageUtility from '../utils/imageHelper'\r\nimport iconService from '../services/icon'\r\nimport socketServices from '../services/socketManager'\r\n\r\nfunction BuildIcon({ createIcon, boardId, visible }) {\r\n  const [content, setContent] = useState('')\r\n  const [color, setColor] = useState('rgba(250,235,215,1)')\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    createIcon({\r\n      content,\r\n      color,\r\n      boardId\r\n    })\r\n    setContent('')\r\n    document.getElementById('iconContentInput').blur()\r\n  }\r\n\r\n  const raiseTheBar = ({ target }) => {\r\n    if(window.innerWidth < 420) {\r\n      target.style.transform = \"translateY(-460%)\"\r\n    }\r\n    target.setAttribute('autocomplete', 'off');\r\n  } \r\n\r\n  const lowerTheBar = ({ target }) => {\r\n    target.style.transform = 'translateY(0%)'\r\n  }\r\n \r\n  return (\r\n    <div className={`${visible ? 'visibleTool ' : ''}buildIconFormBox`}>\r\n      <form onSubmit={handleSubmit} className=\"changeMapRow row mt-5\">\r\n\r\n        <label className=\"col-4 mb-1\" htmlFor='iconContentInput'>Content: </label>\r\n        <input\r\n          id=\"iconContentInput\"\r\n          type='text'\r\n          value={content}\r\n          onChange={({ target }) => setContent(target.value) }\r\n          onFocus={raiseTheBar}\r\n          onBlur={lowerTheBar}\r\n          required\r\n          className=\"col-8\"\r\n          autoComplete=\"new-password\"\r\n        />\r\n        <label className=\"col-4 my-1\" htmlFor='iconColorInput'>Color: </label>\r\n        <select \r\n          className=\"col-4\" \r\n          name=\"colors\" \r\n          id=\"iconColorInput\" \r\n          onChange={({ target }) => setColor(target.value)} \r\n        >\r\n          <option \r\n            value=\"rgba(250,235,215,1)\"\r\n            defaultValue\r\n            >White</option>\r\n          <option \r\n            style={{backgroundColor: 'rgba(191, 63, 63, 1)'}} \r\n            value=\"rgba(191, 63, 63, 1)\"\r\n            >Red</option>\r\n          <option \r\n            style={{backgroundColor: 'rgba(63,127,191,1'}} \r\n            value=\"rgba(63,127,191,1)\"\r\n            >Blue</option>\r\n          <option \r\n            style={{backgroundColor: 'rgba(63,191,63,1)'}} \r\n            value=\"rgba(63,191,63,1)\"\r\n            >Green</option>\r\n        </select>\r\n        <button className=\"ms-2 mt-3 col-6 submitButtonFix\" type=\"submit\">Create Icon</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction FileBase64({setLoading, boardId, setImage64, visible }) {\r\n\r\n  const handleChange = async (e) => {\r\n    e.preventDefault()\r\n    setLoading(true)\r\n    let file = fileRef.current.files[0]\r\n    const buffer = await gameBoardService.updateGameBoardImage(file, boardId);\r\n    const mapImage = await imageUtility.convertBuffertoBlob(buffer.data)\r\n    if(mapImage) {\r\n      socketServices.changeMap()\r\n    }\r\n    await setImage64(mapImage)\r\n\r\n    setLoading(false)\r\n  }\r\n\r\n  const fileRef = useRef()\r\n  return (\r\n    <form id=\"uploadForm\" className={`mt-5 ${visible ? 'visibleTool ' : ''}`} encType='multipart/form-data' onSubmit={handleChange}>\r\n\r\n      <label htmlFor=\"fileUpload\" className='fileUpload px-2 mx-2' >Select Image</label>\r\n\r\n      <input ref={fileRef} type=\"file\" id=\"fileUpload\" name=\"file\" required />\r\n\r\n      <input type='submit' value='Upload' />\r\n\r\n    </form>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n\r\nfunction MasterBuilder({\r\n  icons,\r\n  setIcons,\r\n  setImage64,\r\n  setLoading,\r\n  boardId,\r\n  float,\r\n  setFloat\r\n}) {\r\n  const [option, setOption] = useState('')\r\n  const[navBarVis, setNavBarVis] = useState(true)\r\n\r\n  const createIcon = async (iconInfo) => {\r\n    const newIcon = await iconService.createIcon(iconInfo)\r\n    socketServices.createIcon(newIcon)\r\n    setIcons(icons.concat(newIcon))\r\n  }\r\n\r\n  const toggleMovement = () => {\r\n    setNavBarVis(!navBarVis)\r\n    setFloat(!float)\r\n  }\r\n\r\n  let box = null;\r\n\r\n  if(option === 'changeMap') {\r\n    box = <FileBase64 setLoading={setLoading} boardId={boardId} setImage64={setImage64}/>\r\n  } else if (option === 'buildIcon') {\r\n    box = <BuildIcon createIcon={createIcon} boardId={boardId}/>\r\n  }\r\n\r\n\r\n  return (\r\n    <div id=\"dungeonMasterSideBar\" aria-label=\"sidebar\" aria-hidden={navBarVis}className=\"sidebar row\">\r\n      <div onClick={toggleMovement} className=\" dmArmBox buttonArmBox\">\r\n        <div className=\"noselect toggleClickBox dmClickBox\">Tools</div>\r\n      </div>\r\n      <div className=\"toolBarRow row\">\r\n        <div className=\"toolButtonBar col-12 ps-0 pe-0\">\r\n          <button onClick={()=> setOption('changeMap')} \r\n            className=\"changeMap\">Change Map</button>\r\n          <button onClick={()=> setOption('buildIcon')} \r\n            className=\"addIcon\">Add Icon</button>\r\n        </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          {box}\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MasterBuilder","import React, { useState, useEffect, useRef } from 'react'\r\nimport socketServices from '../services/socketManager'\r\nimport { BsChat } from 'react-icons/bs'\r\n\r\n\r\nconst SystemMessage = ({ content }) => {\r\n\r\n  return (\r\n    <div className=\"systemMessage px-2 mb-2\" >\r\n      <div className=\"\">{content}</div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst MeMessage = ({ sender, content }) => {\r\n\r\n  return (\r\n    <div className=\"meMsgPacket mb-4\" >\r\n      <div className=\"meMsgInitial msgInitial\">{sender}</div>\r\n      <div className=\"msg meMsg\">{content}</div>\r\n    </div>\r\n  )\r\n}\r\nconst ThemMessage = ({ sender, content }) => {\r\n\r\n  return (\r\n    <div className=\"otherMsgPacket mb-4\" >\r\n      <div className=\"otherMsgInitial msgInitial\">{sender}</div>\r\n      <div className=\"msg otherMsg\">{content}</div>\r\n  </div>\r\n  )\r\n}\r\n\r\n\r\nfunction MessengerBar({id, username, session, float, setFloat}) {\r\n  const [navBarVis, setNavBarVis] = useState(true)\r\n  const [messageText, setMessageText] = useState('')\r\n  const [messages, setMessages] = useState([])\r\n  const blueCircleRef = useRef(null)\r\n  const bottomRef = useRef(null)\r\n\r\n  const textSanitizer = (messageText) => {\r\n    const map = {\r\n      '&': '&amp;',\r\n      '<': '&lt;',\r\n      '>': '&gt;',\r\n      '\"': '&quot;',\r\n      \"'\": '&#x27;',\r\n      \"/\": '&#x2F;',\r\n      \"`\": '&grave;',\r\n      \"$\": '&#36;'\r\n    };\r\n    const reg = /[&<>\"'/`$]/ig;\r\n    return messageText.replace(reg, (match)=>(map[match]));\r\n  }\r\n\r\n  const textAreaSubmit = (e) => {\r\n    if(e.key === 'Enter') {\r\n      e.preventDefault()\r\n      document.getElementById('textMsgForm').requestSubmit()\r\n    }\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n\r\n    const freshText = textSanitizer(messageText)\r\n\r\n    if(messageText) {\r\n      const newMessage = {\r\n        id: Math.random(),\r\n        userId: id,\r\n        username: username,\r\n        content: freshText,\r\n        systemMsg: false\r\n      }\r\n      setMessages(messages.concat(newMessage))\r\n      socketServices.sendMessage(newMessage)\r\n      setMessageText('')\r\n    }\r\n  }\r\n\r\n  const toggleMovement = () => {\r\n    setNavBarVis(!navBarVis)\r\n    setFloat(!float)\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    if(!session) {\r\n      return\r\n    } else {\r\n      socketServices.receiveMessage((message) => {\r\n        setMessages(messages => messages.concat(message))\r\n        \r\n        blueCircleRef.current.id = 'blueCircleBounce'\r\n        setTimeout(() => {\r\n          blueCircleRef.current.id = ''\r\n        }, 1000)\r\n      })\r\n    }\r\n  }, [session])\r\n\r\n  useEffect(() => {\r\n    bottomRef.current.scrollIntoView({ behavior: 'smooth' })\r\n  })\r\n\r\n  return (\r\n    <div id=\"messengerSideBar\" aria-label='sidebar' aria-hidden={navBarVis} className=\"sidebar row msgRow\">\r\n      <div className=\"buttonArmBox msgArmBox\">\r\n        <div ref={blueCircleRef} onClick={toggleMovement} className=\"noselect toggleClickBox msgClickBox\">Chat</div>\r\n      </div>\r\n      <div className=\"messageBox\">\r\n          {messages.map(message => {\r\n            if(message.systemMsg) {\r\n              return <SystemMessage\r\n                key={message.id}\r\n                content={message.content}\r\n                />\r\n            }\r\n            if(id === message.userId) {\r\n              return <MeMessage \r\n                key={message.id} \r\n                sender={username} \r\n                content={message.content} \r\n                />\r\n            } else {\r\n              return <ThemMessage \r\n                key={message.id} \r\n                sender={message.username} \r\n                content={message.content} \r\n                />\r\n            }\r\n          })}\r\n          <div ref={bottomRef}></div>\r\n      </div>\r\n      <div className=\"sendMessageBox\">\r\n        <form className=\"messageTextBox\" onSubmit={handleSubmit} id=\"textMsgForm\">\r\n          <textarea\r\n            id=\"chatMessageBox\"\r\n            className='textAreaBox'\r\n            value={messageText}\r\n            onChange={({ target })=> setMessageText(target.value)}\r\n            onKeyDown={textAreaSubmit}\r\n          />\r\n          <button type=\"submit\" className=\"pb-1 submitMessageButton\"><BsChat size=\"50%\" /></button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MessengerBar","import React, { useState, useRef, useEffect } from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { useHistory, useLocation } from \"react-router-dom\"\r\nimport axios from 'axios'\r\nimport gameBoardService from '../services/gameboard'\r\nimport imageUtility from '../utils/imageHelper'\r\nimport LoadingSquare from './LoadingSquare'\r\nimport Icon from './Icon'\r\nimport MasterBuilderNav from './MasterBuilderBar.js'\r\nimport MessengerBar from './MessengerBar'\r\nimport socketServices from '../services/socketManager'\r\nimport iconService from '../services/icon'\r\nimport { useAuth } from '../services/use-auth'\r\nimport { useNotify } from '../services/use-notification'\r\nimport { BsThreeDotsVertical } from 'react-icons/bs'\r\nimport { NotificationSuccess, NotificationError } from './Notification'\r\n\r\n\r\nfunction MapImageView(props) {\r\n  const  { float } = props\r\n  return (\r\n    <div className=\"gameboardMapImageView mapImageView col-11 d-flex\">\r\n      <div className={`${float? 'floating' : ''} gameboardImageBox mt-3 mb-5 d-flex`}>\r\n        <div id=\"aspectRatioBoxBoard\">\r\n          {props.children}\r\n        </div>\r\n      </div>\r\n\r\n    </div> \r\n  )\r\n}\r\n\r\nfunction MapTray({ mapSrc, loading, icons, setIcons, deleteIcon, updatePosition, float }) { \r\n  \r\n  return (\r\n    <div  className=\"mapTrayGameBoard col-12 py-5 px-5 d-flex\">\r\n      <div id=\"dropZoneDelete\" className=\"d-flex\">\r\n        <p className=\"noselect pt-3\">Delete</p>\r\n      </div>\r\n      {loading\r\n        ? <LoadingSquare />\r\n        : <MapImageView float={float}>\r\n            {icons.map(icon => {\r\n              return <Icon  \r\n                  style={{backgroundColor: icon.color}}\r\n                  content={icon.content}\r\n                  id={icon.id}\r\n                  key={icon.id}\r\n                  position={icon.position}\r\n                  setIcons={setIcons}\r\n                  icons={icons}\r\n                  deleteIcon={deleteIcon}\r\n                  updatePosition={updatePosition}\r\n                /> \r\n            })}\r\n            <img draggable=\"false\" id='gameBoardMap' className=\"noselect gameboardMapImage mapImage img-fluid\" alt='' src={mapSrc} />\r\n          </MapImageView>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction DropMenu({ userId, sessionLive, connectToSocket, history, boardId }) {\r\n\r\n  return (\r\n    <div className=\"dropMenuContainer row\">\r\n      <div className=\" dropTile col-12\">\r\n        <button className=\" dropButton\" onClick={() => history.goBack()}>\r\n          {userId ? 'Dashboard' : 'Home'}\r\n        </button>\r\n      </div>\r\n      {userId \r\n        ? <div className={` col-12 dropTile sessionButtonTile ${sessionLive && userId ? 'tweak' : ''}`}>\r\n            <button onClick={connectToSocket} className={`${sessionLive && userId ? 'tweak' : ''} dropButtonSession`}>\r\n              {sessionLive ? 'End Session' : 'Start Session'}\r\n            </button>\r\n          </div>\r\n        : null\r\n      }\r\n      {sessionLive && userId\r\n\r\n      ? <div id=\"sessionIdBox\"><span className=\" ms-5 ps-2\">Session ID: </span>{boardId}</div>\r\n      : null\r\n      }\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nfunction DropDownNav({ sessionLive, history, connectToSocket, boardId }) {\r\n  const [visibility, setVisibility] = useState(false)\r\n  const boxRef = useRef();\r\n  const auth = useAuth();\r\n  const authCheck = auth.userId ? auth.userId : null;\r\n\r\n  const checkForClick = (event) => {\r\n    if(event.target === boxRef.current) {\r\n      setVisibility(!visibility)\r\n    }\r\n    if(!boxRef.current || !boxRef.current.contains(event.target)) {\r\n        setVisibility(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('click', checkForClick)\r\n    return () => {\r\n      document.removeEventListener('click', checkForClick)\r\n    }\r\n  })\r\n\r\n  return (\r\n    <div ref={boxRef} onClick={checkForClick} className={`${sessionLive ? 'activeBurger' : ''} ${visibility ? 'openMenu' : ''}`} id=\"hamburger\">\r\n      <BsThreeDotsVertical className=\"hide\" size=\"20px\" />\r\n      {visibility\r\n        ? <DropMenu userId={authCheck} sessionLive={sessionLive} history={history} connectToSocket={connectToSocket} boardId={boardId} />\r\n        : null\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nfunction Gameboard(props) {\r\n  const [image64, setImage64] = useState('')\r\n  const [icons, setIcons] = useState([])\r\n  const [loading, setLoading] = useState(false)\r\n  const [sessionLive, setSessionLive] = useState(false)\r\n  const [float, setFloat] = useState(false)\r\n  const auth = useAuth()\r\n  const notify = useNotify()\r\n  const boardId = props.match.params.id\r\n  let history = useHistory();\r\n  const location = useLocation();\r\n  let guest = { id: '', username: ''}\r\n\r\n  if (location.state) {\r\n    guest = {\r\n      id: location.state.id,\r\n      username: location.state.username\r\n    }\r\n  }\r\n\r\n\r\n  const connectToSocket = async () => {\r\n    if(sessionLive === false) {\r\n      if(auth.userId) {\r\n        socketServices.initiateDMSocket(boardId)\r\n      }\r\n\r\n      socketServices.userEntryExit((statusType) => {\r\n        if(statusType === 'userConnect') {\r\n          notify.notify({\r\n            notification: 'New user has joined the game!',\r\n            errorType: null,\r\n            successType: 'newUserJoined'\r\n          })\r\n        }\r\n        if(statusType === \"userDisconnect\") {\r\n          notify.notify({\r\n            notification: 'User has left the game!',\r\n            errorType: 'userExit',\r\n            successType: null\r\n          })\r\n        }\r\n      })\r\n      \r\n      socketServices.addIcon((iconObj) => {\r\n        setIcons(icons => [...icons, iconObj])\r\n      })\r\n  \r\n      socketServices.updateIcon((position, id) => {\r\n        setIcons((icons) => icons.map(icon => {\r\n          if(icon.id === id) {\r\n            icon.position.x = position.x\r\n            icon.position.y = position.y\r\n          }\r\n          return icon\r\n        }))\r\n      })\r\n  \r\n      socketServices.clearIcon((id) => {\r\n        console.log('removing this id', id)\r\n        setIcons((icons) => icons.filter(icon => icon.id !== id))\r\n      })\r\n  \r\n      socketServices.updateMap( async() => {\r\n        setLoading(true)\r\n        const gameBoard = await gameBoardService.getGameBoard(boardId)\r\n        const boardImage = await imageUtility.convertBuffertoBlob(gameBoard.image.data)\r\n        setImage64(boardImage)\r\n        if(boardImage) {\r\n          setLoading(false)\r\n        }\r\n      })\r\n      setSessionLive(true)\r\n    } else {\r\n      socketServices.dmDisconnecting();\r\n      setSessionLive(false);\r\n    }\r\n\r\n  }\r\n\r\n  const updateIcon = async(position, id) => {\r\n    socketServices.moveIcon(position, id)\r\n    const updatedIcon = await iconService.updateIcon(position, id)\r\n    setIcons((icons) => icons.map(icon => {\r\n      if(icon.id === id) {\r\n        icon.position.x = position.x;\r\n        icon.position.y = position.y;\r\n      }\r\n      return icon\r\n    }))\r\n  }\r\n\r\n  const deleteIcon = async (id) => {\r\n    await iconService.deleteIcon(id)\r\n    socketServices.deleteIcon(id)\r\n    setIcons((icons) => icons.filter(icon => icon.id !== id))\r\n  }\r\n\r\n  useEffect(() => {\r\n    const source = axios.CancelToken.source()\r\n\r\n    const loadGameBoard = async() => {\r\n      try {\r\n        setLoading(true)\r\n        const gameBoard = await gameBoardService.getGameBoard(boardId, source.token)\r\n        const boardImage = await imageUtility.convertBuffertoBlob(gameBoard.image.data)\r\n        setImage64(boardImage)\r\n        setIcons(gameBoard.icons)\r\n        setLoading(false)\r\n      } catch (exception) {\r\n        console.log('loading mapImage failed', exception)\r\n      }\r\n    }\r\n    const guestAuthorization = async() => {\r\n      socketServices.initiateGuestSocket(boardId, history, guest.username, loadGameBoard)\r\n    }\r\n\r\n    if(auth.userId) {\r\n      loadGameBoard();\r\n    } else {\r\n      guestAuthorization();\r\n      connectToSocket();\r\n    }\r\n    return () => {\r\n      source.cancel()\r\n      socketServices.disconnectSocket()\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n    <div className=\"gameBoardRow row\">\r\n      <DropDownNav sessionLive={sessionLive} history={history} connectToSocket={connectToSocket} boardId={boardId} />\r\n      <MapTray \r\n        deleteIcon={deleteIcon} \r\n        mapSrc={image64} \r\n        loading={loading} \r\n        icons={icons} \r\n        setIcons={setIcons} \r\n        updatePosition={updateIcon}\r\n        float={float}\r\n      />\r\n    </div>\r\n    {auth.userId\r\n      ?    <MasterBuilderNav\r\n              setLoading={setLoading}\r\n              boardId={boardId}\r\n              setImage64={setImage64}\r\n              icons={icons}\r\n              setIcons={setIcons}\r\n              float={float}\r\n              setFloat={setFloat}\r\n            />\r\n      : null\r\n    }\r\n    <MessengerBar\r\n        id={guest.id || auth.userId}\r\n        username={guest.username || auth.username}\r\n        session={sessionLive}\r\n        float={float}\r\n        setFloat={setFloat}\r\n     />\r\n    </>\r\n  )\r\n}\r\n\r\n\r\nexport default Gameboard\r\n\r\n","import React, { useState } from 'react'\r\nimport { Switch, Route, Link, Redirect } from 'react-router-dom'\r\nimport Login from './Login'\r\nimport Dashboard from './Dashboard'\r\nimport { useAuth } from '../services/use-auth'\r\nimport Gameboard from './Gameboard'\r\n\r\nfunction Layout() {\r\n  const auth = useAuth()\r\n\r\n  return (\r\n    <>      \r\n    <Route path=\"/\" render={() => (\r\n      auth.userId \r\n        ? <Redirect from='/' to='/dashboard' /> \r\n        : <Redirect from='/' to='/login' />\r\n      )}\r\n    /> \r\n      <Switch>\r\n\r\n        <Route path=\"/dashboard\" component={Dashboard} />\r\n        <Route path='/login' component={Login} />\r\n        <Route path='/gameboard/:id' component={Gameboard} />\r\n\r\n      </Switch>\r\n    </>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport default Layout\r\n","import React, { useState, useEffect } from 'react'\nimport './App.css';\nimport { BrowserRouter as Router } from 'react-router-dom'\nimport Layout from './components/Layout'\nimport { ProvideAuth } from './services/use-auth'\nimport { ProvideNotify } from './services/use-notification'\n\n\n/*{user ?\n  <Dashboard user={user} setUser={setUser} />\n  : <div id=\"background\">\n      <Login setUser={setUser} />\n  </div>\n}*/\n\nfunction App() {\n\n  return (\n    <Router>\n      <ProvideNotify>\n        <ProvideAuth>\n          <Layout />\n        </ProvideAuth>\n      </ProvideNotify>\n\n    </Router>\n  );\n}\n\nexport default App;\n/*\nconst [notes, setNotes] = useState([])\n  const [connected, setConnected] = useState(false)\n\n  socket.on('updated-content', (res) => {\n    setNotes(res)\n  })\n  \n  useEffect(() => {\n    socket.emit('Hello_there', null);\n    const eventHandler = () => setConnected(true)\n\n    socket.on('Welcome from server', () => {\n      console.log('I am connected with the backend')\n      eventHandler()\n    });\n\n    return () => {\n      socket.off('Welcome from server', eventHandler)\n    }\n  }, [])\n\n  useEffect(() => {\n    const getAllNotes = async() => {\n      const notes = await axios.get('/api/notes')\n      setNotes(notes.data)\n    }\n\n    getAllNotes()\n  },[])\n\n  \n  const testThis = async () => {\n    const newNote = {\n      content: 'This is another test!',\n      date: new Date(),\n      important: false\n    }\n    await axios.post('/api/notes', newNote)\n\n  }\n  \n      <div className=\"App\">\n      <button onClick={testThis}>Test</button>\n      {notes.map(note => (\n        <div key={note.id}>{note.content}</div>\n      ))}\n    </div>\n\n  */","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}