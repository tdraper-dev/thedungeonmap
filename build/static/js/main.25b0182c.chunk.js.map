{"version":3,"sources":["services/login.js","services/gameboard.js","services/signup.js","components/Notification.js","services/use-notification.js","services/use-auth.js","components/VisibleButton.js","components/Login.js","utils/imageHelper.js","components/AddContentCircle.js","components/LoadingSquare.js","components/DragComponent.js","services/socketManager.js","services/icon.js","components/Icon.js","components/Dashboard.js","components/MasterBuilderBar.js","components/MessengerBar.js","components/Gameboard.js","components/Layout.js","App.js","reportWebVitals.js","index.js"],"names":["login","user","a","axios","post","response","data","baseUrl","token","setToken","newToken","getGameBoards","sourceToken","config","headers","Authorization","cancelToken","get","getGameBoard","boardId","createGameBoard","newBoard","formData","FormData","append","mapImage","name","updateGameBoardImage","file","put","deleteGameBoard","id","console","log","delete","retrieveToken","createUser","credentials","NotificationError","errorType","notify","useNotify","message","Notification","type","notification","NotificationSuccess","successType","className","notifyContext","createContext","ProvideNotify","children","useState","setMessage","setErrorType","setSuccessType","setTimeout","notificationAlert","suppliedError","useProvideNotify","Provider","value","useContext","authContext","ProvideAuth","auth","userId","setUserId","username","setUsername","logIn","loginService","loggedUser","window","localStorage","setItem","JSON","stringify","gameBoardService","logOut","removeItem","exception","signUp","newUser","signUpService","useEffect","loggedUserJson","getItem","parse","useProvideAuth","useAuth","VisibleButton","props","visible","setVisible","makeContentRef","useRef","style","ref","onClick","label","React","cloneElement","JoinSession","sessionID","setSessionID","history","useHistory","checkForClick","event","boxRef","current","contains","target","document","addEventListener","removeEventListener","onSubmit","e","preventDefault","push","pathname","from","state","Math","random","onChange","LoginForm","setUser","password","setPassword","handleSubmit","placeholder","SignUp","handleSignUp","passwordConfirm","setPasswordConfirm","SignUpForm","Login","buffer","arraybuffer","Uint8Array","imageBlob","Blob","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","this","result","blobReaderPromise","then","AddContentCircle","color","LoadingSquare","Draggable","socket","position","updatePosition","deleteIcon","x","y","drop","setDrop","dragRef","posRef","handleDragMove","aspectBox","getElementById","getBoundingClientRect","left","clientX","width","top","clientY","height","stopPropagation","handlePointerUp","bounding","display","preventBehavior","icon","passive","firstRender","onPointerDown","getIcons","createIcon","iconInfo","updateIcon","disconnectSocket","disconnect","initiateDMSocket","io","emit","on","initiateGuestSocket","callback","check","goBack","userEntryExit","dmDisconnecting","newIcon","addIcon","iconObj","moveIcon","iconPosition","iconId","clearIcon","changeMap","updateMap","sendMessage","receiveMessage","Icon","content","LogoutButton","PopUpNotice","onMouseEnter","onMouseLeave","BoardTile","thisBoard","gameBoards","setBoards","setBoardId","setLoading","loading","thumbnail","setThumbnail","clickRef","deleteGameboard","confirm","newGameBoards","filter","board","length","getElementsByClassName","click","highlightClick","hasAttribute","oldSelect","removeAttribute","setAttribute","imageUtility","catch","error","alt","draggable","src","to","BoardDisplay","CreateBoard","createNewBoard","boardName","setBoardName","fileRef","regTest","files","test","Error","encType","required","autoFocus","htmlFor","DmButtons","UserBlock","SideBar","MapImageView","displayImage","icons","map","backgroundColor","MapTray","Dashboard","boards","setDisplayImage","setIcons","postedBoard","updateDashBoard","concat","dashImage","source","CancelToken","loadedBoards","getBoards","cancel","updateMapTile","boardFocus","find","BuildIcon","setContent","setColor","blur","onFocus","innerWidth","transform","onBlur","autoComplete","defaultValue","FileBase64","setImage64","handleChange","socketServices","MasterBuilder","float","setFloat","option","setOption","navBarVis","setNavBarVis","iconService","box","SystemMessage","MeMessage","sender","ThemMessage","MessengerBar","session","messageText","setMessageText","messages","setMessages","blueCircleRef","bottomRef","scrollIntoView","behavior","systemMsg","newMessage","onKeyDown","key","requestSubmit","size","mapSrc","DropMenu","sessionLive","connectToSocket","DropDownNav","visibility","setVisibility","authCheck","Gameboard","image64","setSessionLive","match","params","location","useLocation","guest","statusType","gameBoard","image","boardImage","loadGameBoard","guestAuthorization","Layout","path","render","component","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.25b0182c.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl=\"/api/login\"\r\n\r\nconst login = async (user) => {\r\n  const response = await axios.post(baseUrl, user)\r\n  return response.data\r\n}\r\n\r\n\r\nexport default { login }","import axios from 'axios'\r\nconst baseUrl = '/api/gameboards'\r\n\r\nlet token = null\r\n\r\nconst setToken = (newToken) => {\r\n  !newToken\r\n    ? token = null\r\n    : token = `bearer ${newToken}`\r\n}\r\n\r\nconst retrieveToken = () => {\r\n  return token;\r\n}\r\n\r\nconst getGameBoards = async (sourceToken = null) => {\r\n  const config = {\r\n    headers: { Authorization: token },\r\n    cancelToken: sourceToken\r\n  }\r\n\r\n  const response = await axios.get(baseUrl, config)\r\n  return response.data\r\n}\r\n\r\nconst getGameBoard = async (boardId, sourceToken) => {\r\n  const config = {\r\n    cancelToken: sourceToken\r\n  }\r\n  const response = await axios.get(`${baseUrl}/${boardId}`, config)\r\n  return response.data\r\n}\r\n\r\nconst createGameBoard = async (newBoard) => {\r\n  const config = {\r\n    headers: {\r\n      Authorization: token,\r\n      'Content-type': 'multipart/form-data'\r\n    }\r\n  }\r\n\r\n  const formData = new FormData();\r\n  formData.append('myImage', newBoard.mapImage)\r\n  formData.append('title', newBoard.name)\r\n\r\n  const response = await axios.post(baseUrl, formData, config)\r\n  return response.data\r\n}\r\n\r\nconst updateGameBoardImage = async(file, boardId) => {\r\n  const formData = new FormData();\r\n  formData.append('myImage', file)\r\n\r\n  const response = await axios.put(`${baseUrl}/${boardId}`, formData)\r\n  return response.data\r\n}\r\n\r\nconst deleteGameBoard = async(id) => {\r\n  console.log('id', id)\r\n  const config = {\r\n    headers: { Authorization: token }\r\n  }\r\n\r\n  const response = await axios.delete(`${baseUrl}/${id}`, config)\r\n  return response.data\r\n}\r\n\r\nexport default {\r\n  setToken, \r\n  getGameBoards, \r\n  getGameBoard, \r\n  createGameBoard, \r\n  updateGameBoardImage,\r\n  deleteGameBoard, \r\n  retrieveToken\r\n}","import axios from 'axios'\r\nconst baseUrl=\"/api/users\"\r\n\r\nconst createUser = async (credentials) => {\r\n  const response = await axios.post(baseUrl, credentials)\r\n  return response.data\r\n}\r\n\r\nexport default { createUser }","import React from 'react'\r\nimport { useNotify } from '../services/use-notification'\r\n\r\nfunction NotificationError({errorType}) {\r\n  const notify = useNotify()\r\n\r\n  return (\r\n    notify.message && notify.errorType === errorType\r\n    ? <Notification type=\"errorMessage\" notification={notify.message} />\r\n    : null\r\n  )\r\n}\r\n\r\nfunction NotificationSuccess({successType}) {\r\n  const notify = useNotify()\r\n\r\n  return (\r\n    notify.message && notify.successType === successType\r\n    ? <Notification type=\"successMessage\" notification={notify.message} />\r\n    : null\r\n  )\r\n}\r\n\r\n\r\nfunction Notification({ notification, type }) {\r\n\r\n  return (\r\n    <div className={`noselect ${type}`}>\r\n      {notification}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport { NotificationError, NotificationSuccess }","import React, { useState, useEffect, useContext, createContext } from 'react'\r\nimport { NotificationError } from '../components/Notification'\r\n\r\nconst notifyContext = createContext()\r\n\r\nexport function ProvideNotify({ children }) {\r\n  const notify = useProvideNotify();\r\n  return <notifyContext.Provider value={notify}>{children}</notifyContext.Provider>\r\n}\r\n\r\nexport const useNotify = () => {\r\n  return useContext(notifyContext)\r\n}\r\n\r\nfunction useProvideNotify() {\r\n  const[message, setMessage] = useState('')\r\n  const[errorType, setErrorType] = useState('')\r\n  const[successType, setSuccessType] = useState('')\r\n\r\n  const notify = ({notification, errorType, successType }) => {\r\n    setMessage(notification)\r\n    setErrorType(errorType || '')\r\n    setSuccessType(successType || '')\r\n\r\n    setTimeout(() => {\r\n      setMessage('')\r\n      setErrorType('')\r\n      setSuccessType('')\r\n    }, 2000)\r\n  }\r\n\r\n  const notificationAlert = (suppliedError) => {\r\n    console.log(suppliedError)\r\n    return (\r\n      suppliedError === errorType\r\n        ? <NotificationError notification={message} />\r\n        : null   \r\n    )\r\n  }\r\n\r\n  return {\r\n    message,\r\n    errorType,\r\n    successType,\r\n    notify,\r\n    notificationAlert\r\n  }\r\n}\r\n\r\n","import React, { useState, useEffect, useContext, createContext } from 'react'\r\nimport loginService from './login'\r\nimport gameBoardService from './gameboard'\r\nimport signUpService from '../services/signup'\r\nimport { useNotify } from '../services/use-notification'\r\n\r\n\r\nconst authContext = createContext();\r\n\r\nexport function ProvideAuth({  children }) {\r\n  const auth = useProvideAuth();\r\n  return <authContext.Provider value={auth}>{children}</authContext.Provider>\r\n}\r\n\r\nexport const useAuth = () => {\r\n  return useContext(authContext)\r\n}\r\n\r\nfunction useProvideAuth() {\r\n  const [userId, setUserId] = useState(null)\r\n  const [username, setUsername ] = useState('')\r\n  const notify = useNotify()\r\n\r\n  const logIn = async (user) => {\r\n    try {\r\n      const loggedUser = await loginService.login(user)\r\n      window.localStorage.setItem(\r\n        'loggedDungeonMaster', JSON.stringify(loggedUser)\r\n      )\r\n\r\n      gameBoardService.setToken(loggedUser.token)\r\n\r\n      setUserId(loggedUser.id)\r\n      setUsername(loggedUser.username)\r\n    } catch(exception) {\r\n      notify.notify({\r\n        notification: 'Username or Password Incorrect',\r\n        errorType: 'badCredentials'\r\n      })\r\n      console.log('failure in useProvideAuth.logIn()', exception)\r\n    }\r\n  }\r\n\r\n  const logOut = async () => {\r\n    try {\r\n      window.localStorage.removeItem('loggedDungeonMaster')\r\n      gameBoardService.setToken(null)\r\n\r\n      setUserId(null)\r\n      setUsername('')\r\n    } catch(exception) {\r\n      console.log('failed to logout', exception);\r\n    }\r\n  }\r\n\r\n  const signUp = async (newUser) => {\r\n    const response = await signUpService.createUser(newUser)\r\n    return response\r\n  }\r\n\r\n  useEffect(() => {\r\n    const setToken = () => {\r\n      const loggedUserJson = window.localStorage.getItem('loggedDungeonMaster')\r\n      if(loggedUserJson) {\r\n        const user = JSON.parse(loggedUserJson)\r\n        setUserId(user.id)\r\n        setUsername(user.username)\r\n        gameBoardService\r\n          .setToken(user.token)\r\n      }\r\n    }\r\n    setToken()\r\n    return () => {\r\n      setToken()\r\n    }\r\n  }, [userId])\r\n\r\n  return {\r\n    username,\r\n    userId,\r\n    logIn,\r\n    logOut,\r\n    signUp\r\n  }\r\n}","import React, { useState, useRef } from 'react'\r\n\r\nfunction VisibleButton (props) {\r\n  const [visible, setVisible] = useState(false)\r\n  const makeContentRef = useRef()\r\n  const toggleVisible = () => {\r\n    setVisible(!visible)\r\n  }\r\n\r\n  return (\r\n    <div className={props.className} style={props.style}>\r\n      <button ref={makeContentRef} onClick={toggleVisible} className=\"buttons signUpButton\">{props.label}</button>\r\n      { visible ? React.cloneElement(props.children, { ...props, visible: visible, setVisible: setVisible })\r\n        : null\r\n      }\r\n      \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default VisibleButton","import React, { useState, useEffect, useRef } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useAuth } from '../services/use-auth'\r\nimport { useNotify } from '../services/use-notification'\r\nimport { NotificationError, NotificationSuccess } from './Notification'\r\nimport VisibleButton from './VisibleButton'\r\n\r\nfunction JoinSession({ setVisible }) {\r\n  const [sessionID, setSessionID] = useState('')\r\n  const [username, setUsername] = useState('')\r\n  const history = useHistory()\r\n\r\n  const checkForClick = (event) => {\r\n    if(!boxRef.current || !boxRef.current.contains(event.target)) {\r\n      setVisible(false)\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    document.addEventListener('click', checkForClick)\r\n    return () => {\r\n      document.removeEventListener('click', checkForClick)\r\n    }\r\n  })\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    setVisible(false);\r\n    return (\r\n      history.push({\r\n        pathname: `/gameboard/${sessionID}`,\r\n        from: '/',\r\n        state: {\r\n          username: username,\r\n          id: Math.random()\r\n        }\r\n      })\r\n    )\r\n  }\r\n\r\n  const boxRef = useRef()\r\n  return (\r\n    <div className=\"joinSessionBox popUpBoxes\">\r\n    <form ref={boxRef} className=\"signUpForm row pt-3\" onSubmit={handleSubmit}>\r\n      <label className=\"label col-lg-7 col-md-6 col-8 mb-2\">Player Name</label>\r\n      <input\r\n        type=\"text\"\r\n        value={username}\r\n        onChange={({ target }) => setUsername(target.value)}\r\n        className=\"submitButtons col-lg-6 col-md-6 col-8 mb-2 inputs\"\r\n        />\r\n      <label className=\"label col-lg-7 col-md-6 col-8 mb-2\">Session ID</label>\r\n      <input\r\n        type=\"text\"\r\n        value={sessionID}\r\n        onChange={({ target }) => setSessionID(target.value)}\r\n        className=\"submitButtons col-lg-6 col-md-6 col-8 mb-2 inputs\"\r\n        />\r\n        <button className=\"col-lg-4 col-md-6 col-8 mb-2 submitButtons buttons\" type=\"submit\">Join!</button>\r\n    </form>\r\n  </div>\r\n  )\r\n}\r\n\r\n\r\nfunction LoginForm({ setUser }) {\r\n  const [username, setUsername] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const auth = useAuth()\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault()\r\n\r\n    try {\r\n      const user = {\r\n        username,\r\n        password\r\n      }\r\n      auth.logIn(user)\r\n    } catch (exception) {\r\n      console.log(exception)\r\n      \r\n    }\r\n  }\r\n\r\n  return (\r\n    <form className=\"loginForm row py-5\" onSubmit={handleSubmit}>\r\n      <label className=\"label col-lg-6 col-md-6 col-8\">Username</label>\r\n      <input\r\n          type='text'\r\n          placeholder='Username'\r\n          className=\"col-lg-6 col-md-6 col-8 mt-2 mb-4 inputs\"\r\n          value={username}\r\n          onChange={({ target }) => setUsername(target.value)}\r\n      />\r\n      <label className=\"label col-lg-6 col-md-6 col-8\">Password</label>\r\n      <input\r\n        type='password'\r\n        placeholder='Password'\r\n        className=\"col-lg-6 col-md-6 col-8 mt-2 mb-4 inputs\"\r\n        value={password}\r\n        onChange={({ target }) => setPassword(target.value)}\r\n      />\r\n      <div className=\"notifyBoxes col-lg-6 col-md-6 col-8 mb-2\">\r\n        <button className=\"buttons\" type=\"submit\">Login</button>\r\n        <NotificationError errorType='badCredentials' />\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nfunction SignUp({ setVisible, handleSignUp }) {\r\n  const[username, setUsername] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [passwordConfirm, setPasswordConfirm] = useState('')\r\n  const boxRef = useRef()\r\n  const notify = useNotify();\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n\r\n    if(password === passwordConfirm) {\r\n      handleSignUp(username, password)\r\n    } else {\r\n      notify.notify({\r\n        notification: 'Please ensure passwords match',\r\n        errorType: 'passwordMatch'\r\n      })\r\n    }\r\n  }\r\n\r\n  const checkForClick = (event) => {\r\n    if(!boxRef.current || !boxRef.current.contains(event.target)) {\r\n        setVisible(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('click', checkForClick)\r\n    return () => {\r\n      document.removeEventListener('click', checkForClick)\r\n    }\r\n  })\r\n \r\n  return (\r\n    <form ref={boxRef} className=\"signUpForm row pt-3\" onSubmit={handleSubmit}>\r\n      <label className=\"label col-lg-6 col-md-8 col-8 mb-2\" >Username</label>\r\n      <input\r\n        type='text'\r\n        className=\"col-lg-6 col-md-8 col-8 mb-2 inputs\"\r\n        value={username}\r\n        onChange={({ target }) => setUsername(target.value)}\r\n      />\r\n        <NotificationError errorType='usernameLength' />\r\n      <label className=\"label col-lg-6 col-md-8 col-8 mb-2\">Password</label>\r\n      <input\r\n        type='password'\r\n        className=\"col-lg-6 col-md-8 col-8 mb-2 inputs\"\r\n        value={password}\r\n        onChange={({ target }) => setPassword(target.value)}\r\n      />\r\n      <label className=\"label col-lg-6 col-md-8 col-8 mb-2\">Confirm Password</label>\r\n      <input\r\n        type='password'\r\n        className=\"col-lg-6 col-md-8 col-8 mb-2 inputs\"\r\n        value={passwordConfirm}\r\n        onChange={({ target }) => setPasswordConfirm(target.value)}\r\n      />\r\n      <div className=\"notifyBoxes col-lg-6 col-md-8 col-8 mb-2 pt-2\">\r\n        <button className=\"buttons\" type=\"submit\">Sign Up</button>\r\n        <NotificationError errorType='passwordMatch' />\r\n      </div>\r\n    </form> \r\n  )\r\n}\r\n\r\nfunction SignUpForm ({ setVisible }) {\r\n  const notify = useNotify();\r\n  const auth = useAuth()\r\n\r\n  const handleSignUp = async (username, password) => {\r\n    try {\r\n      const newUser = { username, password }\r\n      const response = await auth.signUp(newUser)\r\n      if(response) {\r\n        setVisible(false);\r\n        notify.notify({\r\n          notification: `New user ${username} created!`,\r\n          successType: 'userCreated'\r\n        })\r\n      }\r\n    } catch (exception) {\r\n      notify.notify({\r\n        notification: 'Username taken or under 5 character mininmum length',\r\n        errorType: 'usernameLength'\r\n      })\r\n      console.log(exception)\r\n    }\r\n  }\r\n  return (\r\n    <div className=\"signUpBox popUpBoxes\">\r\n      <SignUp setVisible={setVisible} handleSignUp={handleSignUp} />\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction Login() {\r\n\r\n  return (\r\n    <div id=\"background\">\r\n    <h1 className=\"noselect loginTitle\">\r\n        Dungeon Map!\r\n    </h1>\r\n    <div className='loginContainer row mx-3'>\r\n      <div className='loginBox notifyBoxes d-flex'>\r\n        <h2 className=\"noselect titles formTitle\">Login</h2>\r\n          <LoginForm />\r\n          <div className=\" otherOptions d-flex mx-2\">\r\n          <VisibleButton label=\"Sign Up\" className=\"optionItems px-1 py-1\">\r\n            <SignUpForm />\r\n          </VisibleButton>\r\n          <VisibleButton label=\"Join Game\" className=\"optionItems px-1 py-1\">\r\n            <JoinSession />\r\n          </VisibleButton>\r\n          </div>\r\n          <NotificationSuccess successType=\"userCreated\" />\r\n      </div>\r\n\r\n  </div>\r\n  </div>\r\n  )\r\n}\r\n\r\nexport default Login","import axios from 'axios'\r\n\r\nfunction blobReaderPromise (buffer) {\r\n  let arraybuffer = Uint8Array.from(buffer).buffer;\r\n  let imageBlob = new Blob([arraybuffer])\r\n\r\n  return new Promise(function(resolve, reject) {\r\n    let reader = new FileReader()\r\n    reader.readAsDataURL(imageBlob)\r\n    reader.onload = function() {\r\n      resolve(this.result)\r\n    }\r\n  })\r\n}\r\nconst convertBuffertoBlob = (buffer) => {\r\n  const base64 = blobReaderPromise(buffer)\r\n    .then(response => response )\r\n  return base64\r\n}\r\n\r\n\r\nexport default {\r\n  convertBuffertoBlob\r\n}","import React from 'react'\r\n\r\n\r\nfunction AddContentCircle({ color }) {\r\n  return (\r\n    <div style={{'backgroundColor': `${color}`}} className=\" specialBounce AddContentCircle\"> \r\n      <div className=\"noselect AddContentCircleText d-flex\">\r\n        Add content\r\n      </div> \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AddContentCircle","import React from 'react'\r\n\r\nconst LoadingSquare = () => {\r\n\r\n  return (\r\n    <div className=\"loadingSquare\">\r\n        <div className=\"noselect loadingSquareText d-flex\">\r\n        Loading\r\n      </div> \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LoadingSquare","import React, { useState, useEffect, useRef } from 'react';\r\n\r\nfunction Draggable({ \r\n  children, \r\n  position, \r\n  updatePosition, \r\n  deleteIcon, \r\n  id\r\n }) {\r\n  const [drop, setDrop] = useState({ x: position.x, y: position.y })\r\n  const dragRef = useRef()\r\n  const posRef = useRef({\r\n    x: 0,\r\n    y: 0\r\n  })\r\n\r\n  const handlePointerDown = (e) => {\r\n\r\n    const { left, top }  = dragRef.current.getBoundingClientRect()\r\n    posRef.current = {\r\n      x: left - e.clientX,\r\n      y: top - e.clientY\r\n    }\r\n\r\n    window.addEventListener('pointermove', handleDragMove);\r\n    window.addEventListener('pointerup', handlePointerUp);\r\n\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  };\r\n  \r\n  const handleDragMove = (e) => {\r\n    const aspectBox = document.getElementById('aspectRatioBoxBoard').getBoundingClientRect()\r\n\r\n    dragRef.current.style.left = `${(e.clientX + posRef.current.x - aspectBox.left)/aspectBox.width*100}%`\r\n    dragRef.current.style.top = `${(e.clientY + posRef.current.y - aspectBox.top)/aspectBox.height*100}%`\r\n \r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  };\r\n\r\n  const handlePointerUp = (e) => {\r\n    const bounding = dragRef.current.getBoundingClientRect();\r\n\r\n    if(bounding.x < 50 && bounding.y < 50) {\r\n      try {\r\n        deleteIcon(id)\r\n        dragRef.current.style.display = 'none';\r\n      } catch(exception) {\r\n        console.log('Unable to delete icon', exception)\r\n      }\r\n    } else if (drop.x !== dragRef.current.style.left && drop.y !== dragRef.current.style.top) {\r\n      setDrop({\r\n        x: dragRef.current.style.left,\r\n        y: dragRef.current.style.top\r\n      })\r\n    }\r\n    posRef.current = {\r\n      x: 0,\r\n      y: 0\r\n    }\r\n\r\n    window.removeEventListener('pointermove', handleDragMove);\r\n    window.removeEventListener('pointerup', handlePointerUp);\r\n\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  }\r\n\r\n\r\n\r\n  const preventBehavior =(e) => {\r\n    e.preventDefault();\r\n  }\r\n\r\n  useEffect(() => {\r\n    const icon = dragRef.current\r\n    icon.addEventListener('touchmove', preventBehavior, {passive: false})\r\n\r\n    return () => {\r\n      window.removeEventListener('pointerup', handlePointerUp)\r\n      icon.removeEventListener('touchmove', preventBehavior, {passive: false})\r\n      window.removeEventListener('pointermove', handleDragMove);\r\n      window.removeEventListener('pointerup', handlePointerUp);\r\n    } \r\n\r\n  }, [])\r\n\r\n\r\n  const firstRender = useRef(true);\r\n  useEffect(() => {\r\n    if(!firstRender.current) {\r\n      updatePosition({ \r\n        x: drop.x, \r\n        y: drop.y \r\n      }, id)\r\n    }\r\n  }, [drop.x, drop.y] ) \r\n\r\n  useEffect(() => { firstRender.current = false }, [])\r\n  return (\r\n    <div\r\n      onPointerDown={handlePointerDown}\r\n      style={{top: position.y, left: position.x}}\r\n      className=\"draggableBox\"\r\n      ref={dragRef}\r\n    >\r\n      {children}\r\n    </div>\r\n\r\n  )\r\n}\r\n\r\nexport default Draggable","import io from 'socket.io-client'\r\n\r\nlet socket;\r\n//${window.location.protocol}//${window.location.host}\r\nconst initiateDMSocket = (boardId) => {\r\n\r\n  console.log(`Dungeon Master connecting to socket...`);\r\n  socket = io()\r\n  console.log('DMsocket', socket)\r\n\r\n  socket.emit('join', {boardId, username: \"DungeonMaster\"})\r\n  socket.on('user_joined')\r\n  socket.on('user_disconnect')\r\n}\r\n\r\nconst initiateGuestSocket = (boardId, history, username, callback) => {\r\n\r\n  console.log('Guest connecting to socket...')\r\n  socket = io()\r\n  socket.emit('guest', boardId)\r\n\r\n  socket.on('guestCheck', (check) => {\r\n    if(check) {\r\n      console.log('Guest registering to Room')\r\n      socket.emit('join', { boardId, username })\r\n      socket.on('dm_disconnect', () => {\r\n        console.log('The guests have received notice from the Server, the DM is gone')\r\n        disconnectSocket()\r\n        return history.goBack()\r\n      })\r\n      return callback()\r\n    } else {\r\n      console.log('no access!')\r\n      socket.disconnect();\r\n      return history.goBack()\r\n    }\r\n  })\r\n}\r\n\r\nconst userEntryExit = (callback) => {\r\n  if(socket) {\r\n    socket.on('user_joined', (data) => {\r\n      callback(data)\r\n    })\r\n    socket.on('user_disconnect', (data) => {\r\n      callback(data)\r\n    })\r\n  }\r\n}\r\n\r\n\r\nconst createIcon = (newIcon) => {\r\n\r\n  if(socket) {\r\n    console.log('you want to create this icon', newIcon)\r\n    socket.emit('create_icon', newIcon)\r\n  }\r\n}\r\n\r\nconst addIcon = (callback) => {\r\n\r\n  if(socket){\r\n      socket.on('add_icon', (iconObj) => {\r\n      console.log('Creating this icon', iconObj)\r\n      return callback(iconObj)\r\n    })\r\n  }\r\n}\r\n\r\nconst moveIcon = (iconPosition, iconId) => {\r\n\r\n  if(socket) {\r\n    console.log('You want to move this icon', iconId)\r\n    socket.emit('move_icon', { iconPosition, iconId })\r\n  }\r\n}\r\n\r\nconst updateIcon = (callback) => {\r\n\r\n  if(socket) {\r\n    socket.on('icon_updated', ({ iconPosition, iconId }) => {\r\n      console.log('Moving this icon', iconId)\r\n      return callback(iconPosition, iconId)\r\n    })\r\n  }\r\n}\r\n\r\nconst deleteIcon = (id) => {\r\n\r\n  if(socket) {\r\n    console.log('You want to delete this icon', id)\r\n    socket.emit('delete_icon', id)\r\n  }\r\n}\r\n\r\nconst clearIcon = (callback) => {\r\n\r\n  if(socket) {\r\n    socket.on('clear_icon', (id) => {\r\n      console.log('Removing this icon: ', id)\r\n      callback(id)\r\n    })\r\n  }\r\n}\r\n\r\nconst changeMap = () => {\r\n\r\n  if(socket) {\r\n    console.log('You want to change the map image')\r\n    socket.emit('change_map')\r\n  }\r\n}\r\n\r\nconst updateMap = (callback) => {\r\n  if(socket) {\r\n    socket.on('update_map', () => callback())\r\n  }\r\n}\r\n\r\n\r\nconst sendMessage = (message) => {\r\n  if(socket) {\r\n    console.log('You want to send a message')\r\n    socket.emit('send_message', message)\r\n  }\r\n}\r\n\r\nconst receiveMessage = (callback) => {\r\n  if(socket) {\r\n    socket.on('receive_message', (data) => {\r\n      console.log('receiving new message!')\r\n      return callback(data)\r\n    })\r\n  }\r\n}\r\n\r\nconst dmDisconnecting = () => {\r\n  if(socket) {\r\n    console.log('The DM is sending \"dm_disconnecting\" to the Server')\r\n    socket.emit('dm_disconnecting')\r\n  }\r\n}\r\n\r\nconst disconnectSocket = () => {\r\n  if(socket) {\r\n    console.log('Disconnecting socket...');\r\n    socket.disconnect()\r\n    socket = null;\r\n    console.log('THE SOCKET', socket)\r\n  }\r\n}\r\n\r\n\r\n\r\nexport default {\r\n  initiateDMSocket,\r\n  initiateGuestSocket,\r\n  userEntryExit,\r\n  disconnectSocket,\r\n  dmDisconnecting,\r\n  createIcon,\r\n  addIcon,\r\n  moveIcon,\r\n  updateIcon,\r\n  deleteIcon,\r\n  clearIcon,\r\n  changeMap,\r\n  updateMap,\r\n  sendMessage,\r\n  receiveMessage\r\n}","import axios from 'axios'\r\nconst baseUrl = '/api/icons'\r\n\r\nconst getIcons = async(boardId) => {\r\n  const response = await axios.get(`${baseUrl}/${boardId}`)\r\n  console.log('ICONS ', response.data)\r\n  return response.data\r\n}\r\n\r\nconst createIcon = async(iconInfo) => {\r\n  const response = await axios.post(baseUrl, iconInfo)\r\n  return response.data\r\n}\r\n\r\nconst updateIcon = async(iconInfo, id) => {\r\n  const response = await axios.put(`${baseUrl}/${id}`, iconInfo)\r\n  return response.data\r\n}\r\n\r\nconst deleteIcon = async(id) => {\r\n  console.log(id)\r\n  const response = await axios.delete(`${baseUrl}/${id}`)\r\n  return response.data\r\n}\r\n\r\nexport default {\r\n  getIcons,\r\n  createIcon,\r\n  updateIcon,\r\n  deleteIcon\r\n}","import React, { useEffect, useCallback } from 'react'\r\nimport Draggable from './DragComponent'\r\nimport iconService from '../services/icon'\r\nimport socketServices from '../services/socketManager'\r\n\r\nfunction debounce(func, timeout = 1000) {\r\n  let timer;\r\n  return (...args) => {\r\n    clearTimeout(timer)\r\n    timer = setTimeout(() => { func.apply(this, args); }, timeout)\r\n  }\r\n}\r\n\r\n\r\n\r\nfunction Icon({ \r\n  style, \r\n  content, \r\n  id, \r\n  position, \r\n  display=false, \r\n  deleteIcon,\r\n  updatePosition }) {\r\n  \r\n/*\r\n const updateIcon = useCallback(\r\n    debounce(async(position) => {\r\n      socketServices.moveIcon(position, id)\r\n      const updatedIcon = await iconService.updateIcon(position, id)\r\n    }, 1000),\r\n    []\r\n  )\r\n*/\r\n\r\n  return (\r\n    <>\r\n    {display\r\n      ? <div className=\"draggableBox\" style={{ top: position.y, left: position.x }}>\r\n          <div style={style} className=\"noselect playerIcon\">\r\n            {content}\r\n          </div>\r\n        </div>\r\n      : <Draggable \r\n          updatePosition={updatePosition} \r\n          deleteIcon={deleteIcon} \r\n          position={position}\r\n          id={id}\r\n        >\r\n          <div style={style} className=\"noselect playerIcon\">\r\n            {content}\r\n          </div>\r\n        </Draggable>\r\n    }\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Icon","import React, { useState, useEffect, useRef } from 'react'\r\nimport { Switch, Route, Link, Redirect, useRouteMatch } from 'react-router-dom'\r\nimport { BsXCircle, BsCheckCircle, BsMicFill } from 'react-icons/bs'\r\nimport { useAuth } from '../services/use-auth'\r\nimport gameBoardService from '../services/gameboard'\r\nimport VisibleButton from './VisibleButton'\r\nimport axios from 'axios'\r\nimport imageUtility from '../utils/imageHelper'\r\nimport AddContentCircle from './AddContentCircle'\r\nimport LoadingSquare from './LoadingSquare'\r\nimport Icon from './Icon'\r\n\r\nfunction LogoutButton() {\r\n  const auth = useAuth()\r\n\r\n  return (\r\n    <div className=\"logoutBox optionItems px-1 py-1 col-6\">\r\n      <button className=\"buttons logOutButton\" onClick={() => auth.logOut()}>Logout</button>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nfunction PopUpNotice(props) {\r\n  const [visible, setVisible] = useState(false)\r\n  const { label, className } = props\r\n\r\n  return (\r\n    <div onMouseEnter={() => setVisible(true)} onMouseLeave={() => setVisible(false)} className={`${className} my-2`}>\r\n      {props.children}\r\n      {visible ? <div className='popUpVisible'>{label}</div> : null }\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction BoardTile({ thisBoard, gameBoards, setBoards, setBoardId, loading, setLoading}) {\r\n  const [thumbnail, setThumbnail] = useState('')\r\n  const clickRef = useRef()\r\n\r\n  const deleteGameboard = async() => {\r\n    try {\r\n      if (window.confirm('Do you want to delete this board?')) {\r\n        setLoading(true)\r\n        await gameBoardService.deleteGameBoard(thisBoard.id)\r\n        const newGameBoards = gameBoards.filter(board => board.id !== thisBoard.id)\r\n        setBoards(newGameBoards)\r\n        setLoading(false)\r\n        if(newGameBoards.length > 0) {\r\n          document.getElementsByClassName('thumbnailBox')[newGameBoards.length-1].click()\r\n        }\r\n      }\r\n    } catch (exception) {\r\n      console.log(exception)\r\n    }\r\n  }\r\n\r\n  const highlightClick = (e) => {\r\n    setBoardId(thisBoard.id)\r\n    if(!clickRef.current.hasAttribute('id')) {\r\n      const oldSelect = document.getElementById('highlightSelect')\r\n      if(oldSelect) { \r\n        oldSelect.removeAttribute('id') \r\n      }\r\n      clickRef.current.setAttribute('id', 'highlightSelect')\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const thumbNailImage = imageUtility.convertBuffertoBlob(thisBoard.thumbnail.data)\r\n        .then( response => setThumbnail(response))\r\n        .catch( error => console.log(error) )\r\n\r\n    document.getElementsByClassName('thumbnailBox')[0].click()\r\n  }, [])\r\n\r\n  return (\r\n    <div ref={clickRef} className={`boardTile row ${thisBoard.board}`}>\r\n      <div onClick={highlightClick}  className=\"boardTitle pe-0 d-flex col-4\">\r\n        <div className=\"boardTitleText\">{thisBoard.board}</div>\r\n      </div>\r\n      <div onClick={highlightClick} className=\"thumbnailBox col-6 py-2 ps-3\">\r\n        <img alt=\"Gameboard Map minified view\" draggable=\"false\" className=\"thumbnailImage img-fluid\" src={thumbnail} />\r\n      </div>\r\n      <div className=\"buttonContainer ps-0 pe-0 col-2 row\">\r\n        <PopUpNotice label='Delete Gameboard'className=\"ps-0 deleteButton\">\r\n          <BsXCircle className=\"deleteIcon\" onClick={deleteGameboard}/>\r\n        </PopUpNotice>\r\n        <PopUpNotice label='Host Gameboard' className=\"ps-0  enterButton\">\r\n          <Link className=\"toGameboardLink\" to={`/gameboard/${thisBoard.id}`}>\r\n            <BsCheckCircle className=\"enterIcon\"/>\r\n          </Link>\r\n        </PopUpNotice>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction BoardDisplay(props) {\r\n  return (\r\n    <div className=\"boardsDisplay\">\r\n      {props.children}\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction CreateBoard({setVisible, createNewBoard}) {\r\n  const [boardName, setBoardName] = useState('')\r\n  const boxRef = useRef();\r\n  const fileRef = useRef();\r\n  const regTest = /image\\/(png|jpeg)/\r\n  const handleSubmit = async (e) => {\r\n    \r\n    e.preventDefault()\r\n    try {\r\n      let file = fileRef.current.files[0]\r\n      if(regTest.test(file.type)) {\r\n        console.log('success!')\r\n        setVisible(false)\r\n        await createNewBoard(boardName, file)\r\n      } else {\r\n        throw new Error({ message: 'wrong file type!' })\r\n      }\r\n    } catch (exception) {\r\n      console.log(exception)\r\n    }\r\n    \r\n  }\r\n\r\n  const checkForClick = (event) => {\r\n    if(!boxRef.current || !boxRef.current.contains(event.target)) {\r\n        setVisible(false)\r\n    }\r\n  }\r\n \r\n  useEffect(() => {\r\n    document.addEventListener('click', checkForClick)\r\n    return () => {\r\n      document.removeEventListener('click', checkForClick)\r\n    }\r\n  })\r\n\r\n  return(\r\n    <div ref={boxRef} className=\"newBoardFormBox popUpBoxes py-2 px-2\">\r\n      <form id=\"uploadFormDash\" className=\"row py-3 px-3\" encType='multipart/form-data' onSubmit={handleSubmit}>\r\n        <label className=\"label newMapNameLabel\">Board Name:</label>\r\n        <input\r\n          type=\"text\"\r\n          className=\"inputs pb-2 newMapName col-10 my-2\"\r\n          value={boardName}\r\n          onChange={({ target }) => setBoardName(target.value)}\r\n          required\r\n          autoFocus\r\n        />\r\n        <label htmlFor=\"fileUploadDash\" className=\"col-4 px-1 py-1 mb-2 fileUpload submitButtons buttons\">Upload Image</label>\r\n        <input\r\n          type='file'\r\n          className='inputs newMapName'\r\n          ref={fileRef}\r\n          id=\"fileUploadDash\"\r\n          name=\"file\"\r\n          required\r\n        />\r\n        <button className=\"col-6 mt-4 submitButtons buttons\" type='submit'>Create</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction DmButtons(props) {\r\n\r\n  return (\r\n    <div className=\"dmButtonsBox d-flex\">\r\n      {props.children}\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction UserBlock() {\r\n  const auth = useAuth()\r\n\r\n  return (\r\n    <div className=\"userBlock pt-1 pb-1 pt-lg-3 pb-lg-3 row\">\r\n      <div className=\"dashTitle col-12\">\r\n        <p className=\"titleName\">Dungeon Master:</p>\r\n        <p className=\"titleName ms-2 ms-lg-0\">{auth.username}</p>\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction SideBar(props) {\r\n\r\n  return (\r\n    <div className=\"sideBarColumn col-12 col-lg-2 d-flex\">\r\n      {props.children}\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction MapImageView({ displayImage, boardId, icons }) {\r\n  \r\n  return (\r\n    <div className=\"mapImageView col-9 col-md-8 d-flex\">\r\n      <div className=\"imageBox d-flex\">\r\n        <div id=\"aspectRatioBoxTray\">\r\n          {icons.map(icon => {\r\n            return <Icon\r\n              key={icon.id} \r\n              style={{backgroundColor: icon.color}} \r\n              content={icon.content}\r\n              id={icon.id}\r\n              position={icon.position}\r\n              display={true}\r\n              />\r\n          })}\r\n          <img draggable=\"false\" className=\"dashMapImage mapImage img-fluid\" key={boardId} alt='' src={displayImage} />\r\n        </div>\r\n      </div>\r\n    </div> \r\n  )\r\n}\r\n\r\nfunction MapTray(props) {\r\n\r\n  return (\r\n    <div className=\"mapTrayContainer col-12 col-lg-10  d-flex\">\r\n      {props.children}\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction Dashboard() {\r\n  const [boards, setBoards] = useState([])\r\n  const [boardId, setBoardId] = useState('')\r\n  const [displayImage, setDisplayImage] = useState(null)\r\n  const [icons, setIcons] = useState([])\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  const createNewBoard = async(boardName, file) => {\r\n    setLoading(true)\r\n    try {\r\n      const newBoard = {\r\n        name: boardName,\r\n        mapImage: file\r\n      }\r\n      const postedBoard = await gameBoardService.createGameBoard(newBoard)\r\n      if(postedBoard) {\r\n        await updateDashBoard(postedBoard)\r\n        setBoards(boards.concat(postedBoard))\r\n        setLoading(false)\r\n        document.getElementsByClassName('thumbnailBox')[boards.length].click()\r\n      }\r\n    } catch (exception) {\r\n      console.log(exception)\r\n    }\r\n  }\r\n\r\n  const updateDashBoard = (board) => {\r\n    imageUtility.convertBuffertoBlob(board.dashImage.data)\r\n      .then(response => {\r\n        setDisplayImage(response)\r\n      })\r\n      .catch(error => console.log('error with updating dash', error.message))\r\n  }\r\n\r\n  useEffect(() => {\r\n    const source = axios.CancelToken.source()\r\n    const getBoards = async() => {\r\n      setLoading(true)\r\n      try {\r\n        const loadedBoards = await gameBoardService.getGameBoards(source.token);\r\n        \r\n        setBoards(loadedBoards)\r\n        if(loadedBoards.length > 0) {\r\n          if(loadedBoards[0].dashImage) {\r\n            await updateDashBoard(loadedBoards[0])\r\n            setIcons(loadedBoards[0].icons)\r\n            setLoading(false)\r\n          }\r\n        } else {\r\n          setLoading(false)\r\n        }\r\n      } catch(exception) {\r\n        console.log(exception)\r\n      }\r\n    }\r\n    getBoards()\r\n    return () => {source.cancel()}\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const updateMapTile = async(boards) => {\r\n      setLoading(true)\r\n      try {\r\n        if(boards) {\r\n          const boardFocus = boards.find(board => board.id === boardId)\r\n          if(boardFocus && boardFocus.dashImage) {\r\n            await updateDashBoard(boardFocus)\r\n            setIcons(boardFocus.icons)\r\n            setLoading(false)\r\n          }\r\n        } \r\n      } catch(exception) {\r\n        console.log(exception)\r\n      }\r\n    }\r\n    updateMapTile(boards)\r\n    return () => updateMapTile()\r\n  }, [boardId])\r\n\r\n\r\n  const handleLinkClick = () => {\r\n    document.getElementsByClassName('signUpButton')[0].click()\r\n  }\r\n\r\n  return (\r\n    <div className=\"row dashboardRow\">\r\n      <SideBar>\r\n        <UserBlock />\r\n        <DmButtons>\r\n          <VisibleButton label=\"Create\" className=\"optionItems col-6 px-1 py-1 buttonFix\">\r\n            <CreateBoard createNewBoard={createNewBoard} />\r\n          </VisibleButton>\r\n          <LogoutButton />\r\n        </DmButtons>\r\n        <BoardDisplay> \r\n          {boards.map(board => ( \r\n            <BoardTile \r\n              key={board.id} \r\n              gameBoards={boards} \r\n              setBoards={setBoards} \r\n              thisBoard={board} \r\n              setBoardId={setBoardId}\r\n              loading={loading}\r\n              setLoading={setLoading}\r\n            /> \r\n          ))}\r\n        </BoardDisplay>\r\n      </SideBar>\r\n      <MapTray>\r\n        {loading\r\n          ? <LoadingSquare />\r\n          :  boards.length > 0\r\n              ? <MapImageView boardId={boardId} displayImage={displayImage} icons={icons} />\r\n              : <div onClick={handleLinkClick} className=\"addContentBox\">\r\n                  <AddContentCircle color={'rgb(187, 0, 0)'}/>\r\n                </div>\r\n        }\r\n      </MapTray>\r\n      \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Dashboard","import React, { useState, useRef, useEffect } from 'react'\r\nimport gameBoardService from '../services/gameboard'\r\nimport imageUtility from '../utils/imageHelper'\r\nimport iconService from '../services/icon'\r\nimport socketServices from '../services/socketManager'\r\n\r\nfunction BuildIcon({ createIcon, boardId, visible }) {\r\n  const [content, setContent] = useState('')\r\n  const [color, setColor] = useState('rgba(250,235,215,1)')\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    createIcon({\r\n      content,\r\n      color,\r\n      boardId\r\n    })\r\n    setContent('')\r\n    document.getElementById('iconContentInput').blur()\r\n  }\r\n\r\n  const raiseTheBar = ({ target }) => {\r\n    if(window.innerWidth < 420) {\r\n      target.style.transform = \"translateY(-460%)\"\r\n    }\r\n    target.setAttribute('autocomplete', 'off');\r\n  } \r\n\r\n  const lowerTheBar = ({ target }) => {\r\n    target.style.transform = 'translateY(0%)'\r\n  }\r\n \r\n  return (\r\n    <div className={`${visible ? 'visibleTool ' : ''}buildIconFormBox`}>\r\n      <form onSubmit={handleSubmit} className=\"changeMapRow row mt-5\">\r\n\r\n        <label className=\"col-4 mb-1\" htmlFor='iconContentInput'>Content: </label>\r\n        <input\r\n          id=\"iconContentInput\"\r\n          type='text'\r\n          value={content}\r\n          onChange={({ target }) => setContent(target.value) }\r\n          onFocus={raiseTheBar}\r\n          onBlur={lowerTheBar}\r\n          required\r\n          className=\"col-8\"\r\n          autoComplete=\"new-password\"\r\n        />\r\n        <label className=\"col-4 my-1\" htmlFor='iconColorInput'>Color: </label>\r\n        <select \r\n          className=\"col-4\" \r\n          name=\"colors\" \r\n          id=\"iconColorInput\" \r\n          onChange={({ target }) => setColor(target.value)} \r\n        >\r\n          <option \r\n            value=\"rgba(250,235,215,1)\"\r\n            defaultValue\r\n            >White</option>\r\n          <option \r\n            style={{backgroundColor: 'rgba(191, 63, 63, 1)'}} \r\n            value=\"rgba(191, 63, 63, 1)\"\r\n            >Red</option>\r\n          <option \r\n            style={{backgroundColor: 'rgba(63,127,191,1'}} \r\n            value=\"rgba(63,127,191,1)\"\r\n            >Blue</option>\r\n          <option \r\n            style={{backgroundColor: 'rgba(63,191,63,1)'}} \r\n            value=\"rgba(63,191,63,1)\"\r\n            >Green</option>\r\n        </select>\r\n        <button className=\"ms-2 mt-3 col-6 submitButtonFix\" type=\"submit\">Create Icon</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction FileBase64({setLoading, boardId, setImage64, visible }) {\r\n\r\n  const handleChange = async (e) => {\r\n    e.preventDefault()\r\n    setLoading(true)\r\n    let file = fileRef.current.files[0]\r\n    const buffer = await gameBoardService.updateGameBoardImage(file, boardId);\r\n    const mapImage = await imageUtility.convertBuffertoBlob(buffer.data)\r\n    if(mapImage) {\r\n      socketServices.changeMap()\r\n    }\r\n    await setImage64(mapImage)\r\n\r\n    setLoading(false)\r\n  }\r\n\r\n  const fileRef = useRef()\r\n  return (\r\n    <form id=\"uploadForm\" className={`mt-5 ${visible ? 'visibleTool ' : ''}`} encType='multipart/form-data' onSubmit={handleChange}>\r\n\r\n      <label htmlFor=\"fileUpload\" className='fileUpload px-2 mx-2' >Select Image</label>\r\n\r\n      <input ref={fileRef} type=\"file\" id=\"fileUpload\" name=\"file\" required />\r\n\r\n      <input type='submit' value='Upload' />\r\n\r\n    </form>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n\r\nfunction MasterBuilder({\r\n  icons,\r\n  setIcons,\r\n  setImage64,\r\n  setLoading,\r\n  boardId,\r\n  float,\r\n  setFloat\r\n}) {\r\n  const [option, setOption] = useState('')\r\n  const[navBarVis, setNavBarVis] = useState(true)\r\n\r\n  const createIcon = async (iconInfo) => {\r\n    const newIcon = await iconService.createIcon(iconInfo)\r\n    socketServices.createIcon(newIcon)\r\n    setIcons(icons.concat(newIcon))\r\n  }\r\n\r\n  const toggleMovement = () => {\r\n    setNavBarVis(!navBarVis)\r\n    setFloat(!float)\r\n  }\r\n\r\n  let box = null;\r\n\r\n  if(option === 'changeMap') {\r\n    box = <FileBase64 setLoading={setLoading} boardId={boardId} setImage64={setImage64}/>\r\n  } else if (option === 'buildIcon') {\r\n    box = <BuildIcon createIcon={createIcon} boardId={boardId}/>\r\n  }\r\n\r\n\r\n  return (\r\n    <div id=\"dungeonMasterSideBar\" aria-label=\"sidebar\" aria-hidden={navBarVis}className=\"sidebar row\">\r\n      <div onClick={toggleMovement} className=\" dmArmBox buttonArmBox\">\r\n        <div className=\"noselect toggleClickBox dmClickBox\">Tools</div>\r\n      </div>\r\n      <div className=\"toolBarRow row\">\r\n        <div className=\"toolButtonBar col-12 ps-0 pe-0\">\r\n          <button onClick={()=> setOption('changeMap')} \r\n            className=\"changeMap\">Change Map</button>\r\n          <button onClick={()=> setOption('buildIcon')} \r\n            className=\"addIcon\">Add Icon</button>\r\n        </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          {box}\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MasterBuilder","import React, { useState, useEffect, useRef } from 'react'\r\nimport socketServices from '../services/socketManager'\r\nimport { BsChat } from 'react-icons/bs'\r\n\r\n\r\nconst SystemMessage = ({ content }) => {\r\n\r\n  return (\r\n    <div className=\"systemMessage px-2 mb-2\" >\r\n      <div className=\"\">{content}</div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst MeMessage = ({ sender, content }) => {\r\n\r\n  return (\r\n    <div className=\"meMsgPacket mb-4\" >\r\n      <div className=\"meMsgInitial msgInitial\">{sender}</div>\r\n      <div className=\"msg meMsg\">{content}</div>\r\n    </div>\r\n  )\r\n}\r\nconst ThemMessage = ({ sender, content }) => {\r\n\r\n  return (\r\n    <div className=\"otherMsgPacket mb-4\" >\r\n      <div className=\"otherMsgInitial msgInitial\">{sender}</div>\r\n      <div className=\"msg otherMsg\">{content}</div>\r\n  </div>\r\n  )\r\n}\r\n\r\n\r\nfunction MessengerBar({id, username, session, float, setFloat}) {\r\n  const [navBarVis, setNavBarVis] = useState(true)\r\n  const [messageText, setMessageText] = useState('')\r\n  const [messages, setMessages] = useState([])\r\n  const blueCircleRef = useRef(null)\r\n  const bottomRef = useRef(null)\r\n\r\n  const textAreaSubmit = (e) => {\r\n    if(e.key === 'Enter') {\r\n      e.preventDefault()\r\n      document.getElementById('textMsgForm').requestSubmit()\r\n    }\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    if(messageText) {\r\n      const newMessage = {\r\n        id: Math.random(),\r\n        userId: id,\r\n        username: username,\r\n        content: messageText,\r\n        systemMsg: false\r\n      }\r\n      setMessages(messages.concat(newMessage))\r\n      socketServices.sendMessage(newMessage)\r\n      setMessageText('')\r\n    }\r\n  }\r\n\r\n  const toggleMovement = () => {\r\n    setNavBarVis(!navBarVis)\r\n    setFloat(!float)\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    if(!session) {\r\n      return\r\n    } else {\r\n      socketServices.receiveMessage((message) => {\r\n        setMessages(messages => messages.concat(message))\r\n        \r\n        blueCircleRef.current.id = 'blueCircleBounce'\r\n        setTimeout(() => {\r\n          blueCircleRef.current.id = ''\r\n        }, 1000)\r\n      })\r\n    }\r\n  }, [session])\r\n\r\n  useEffect(() => {\r\n    bottomRef.current.scrollIntoView({ behavior: 'smooth' })\r\n  })\r\n\r\n  return (\r\n    <div id=\"messengerSideBar\" aria-label='sidebar' aria-hidden={navBarVis} className=\"sidebar row msgRow\">\r\n      <div className=\"buttonArmBox msgArmBox\">\r\n        <div ref={blueCircleRef} onClick={toggleMovement} className=\"noselect toggleClickBox msgClickBox\">Chat</div>\r\n      </div>\r\n      <div className=\"messageBox\">\r\n          {messages.map(message => {\r\n            if(message.systemMsg) {\r\n              return <SystemMessage\r\n                key={message.id}\r\n                content={message.content}\r\n                />\r\n            }\r\n            if(id === message.userId) {\r\n              return <MeMessage \r\n                key={message.id} \r\n                sender={username} \r\n                content={message.content} \r\n                />\r\n            } else {\r\n              return <ThemMessage \r\n                key={message.id} \r\n                sender={message.username} \r\n                content={message.content} \r\n                />\r\n            }\r\n          })}\r\n          <div ref={bottomRef}></div>\r\n      </div>\r\n      <div className=\"sendMessageBox\">\r\n        <form className=\"messageTextBox\" onSubmit={handleSubmit} id=\"textMsgForm\">\r\n          <textarea\r\n            id=\"chatMessageBox\"\r\n            className='textAreaBox'\r\n            value={messageText}\r\n            onChange={({ target })=> setMessageText(target.value)}\r\n            onKeyDown={textAreaSubmit}\r\n          />\r\n          <button type=\"submit\" className=\"pb-1 submitMessageButton\"><BsChat size=\"50%\" /></button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MessengerBar","import React, { useState, useRef, useEffect } from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { useHistory, useLocation } from \"react-router-dom\"\r\nimport axios from 'axios'\r\nimport gameBoardService from '../services/gameboard'\r\nimport imageUtility from '../utils/imageHelper'\r\nimport LoadingSquare from './LoadingSquare'\r\nimport Icon from './Icon'\r\nimport MasterBuilderNav from './MasterBuilderBar.js'\r\nimport MessengerBar from './MessengerBar'\r\nimport socketServices from '../services/socketManager'\r\nimport iconService from '../services/icon'\r\nimport { useAuth } from '../services/use-auth'\r\nimport { useNotify } from '../services/use-notification'\r\nimport { BsThreeDotsVertical } from 'react-icons/bs'\r\nimport { NotificationSuccess, NotificationError } from './Notification'\r\n\r\n\r\nfunction MapImageView(props) {\r\n  const  { float } = props\r\n  return (\r\n    <div className=\"gameboardMapImageView mapImageView col-11 d-flex\">\r\n      <div className={`${float? 'floating' : ''} gameboardImageBox mt-3 mb-5 d-flex`}>\r\n        <div id=\"aspectRatioBoxBoard\">\r\n          {props.children}\r\n        </div>\r\n      </div>\r\n\r\n    </div> \r\n  )\r\n}\r\n\r\nfunction MapTray({ mapSrc, loading, icons, setIcons, deleteIcon, updatePosition, float }) { \r\n  \r\n  return (\r\n    <div  className=\"mapTrayGameBoard col-12 py-5 px-5 d-flex\">\r\n      <div id=\"dropZoneDelete\" className=\"d-flex\">\r\n        <p className=\"noselect pt-3\">Delete</p>\r\n      </div>\r\n      {loading\r\n        ? <LoadingSquare />\r\n        : <MapImageView float={float}>\r\n            {icons.map(icon => {\r\n              return <Icon  \r\n                  style={{backgroundColor: icon.color}}\r\n                  content={icon.content}\r\n                  id={icon.id}\r\n                  key={icon.id}\r\n                  position={icon.position}\r\n                  setIcons={setIcons}\r\n                  icons={icons}\r\n                  deleteIcon={deleteIcon}\r\n                  updatePosition={updatePosition}\r\n                /> \r\n            })}\r\n            <img draggable=\"false\" id='gameBoardMap' className=\"noselect gameboardMapImage mapImage img-fluid\" alt='' src={mapSrc} />\r\n          </MapImageView>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction DropMenu({ userId, sessionLive, connectToSocket, history, boardId }) {\r\n\r\n  return (\r\n    <div className=\"dropMenuContainer row\">\r\n      <div className=\" dropTile col-12\">\r\n        <button className=\" dropButton\" onClick={() => history.goBack()}>\r\n          {userId ? 'Dashboard' : 'Home'}\r\n        </button>\r\n      </div>\r\n      {userId \r\n        ? <div className={` col-12 dropTile sessionButtonTile ${sessionLive && userId ? 'tweak' : ''}`}>\r\n            <button onClick={connectToSocket} className={`${sessionLive && userId ? 'tweak' : ''} dropButtonSession`}>\r\n              {sessionLive ? 'End Session' : 'Start Session'}\r\n            </button>\r\n          </div>\r\n        : null\r\n      }\r\n      {sessionLive && userId\r\n\r\n      ? <div id=\"sessionIdBox\"><span className=\" ms-5 ps-2\">Session ID: </span>{boardId}</div>\r\n      : null\r\n      }\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nfunction DropDownNav({ sessionLive, history, connectToSocket, boardId }) {\r\n  const [visibility, setVisibility] = useState(false)\r\n  const boxRef = useRef();\r\n  const auth = useAuth();\r\n  const authCheck = auth.userId ? auth.userId : null;\r\n\r\n  const checkForClick = (event) => {\r\n    if(event.target === boxRef.current) {\r\n      setVisibility(!visibility)\r\n    }\r\n    if(!boxRef.current || !boxRef.current.contains(event.target)) {\r\n        setVisibility(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('click', checkForClick)\r\n    return () => {\r\n      document.removeEventListener('click', checkForClick)\r\n    }\r\n  })\r\n\r\n  return (\r\n    <div ref={boxRef} onClick={checkForClick} className={`${sessionLive ? 'activeBurger' : ''} ${visibility ? 'openMenu' : ''}`} id=\"hamburger\">\r\n      <BsThreeDotsVertical className=\"hide\" size=\"20px\" />\r\n      {visibility\r\n        ? <DropMenu userId={authCheck} sessionLive={sessionLive} history={history} connectToSocket={connectToSocket} boardId={boardId} />\r\n        : null\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nfunction Gameboard(props) {\r\n  const [image64, setImage64] = useState('')\r\n  const [icons, setIcons] = useState([])\r\n  const [loading, setLoading] = useState(false)\r\n  const [sessionLive, setSessionLive] = useState(false)\r\n  const [float, setFloat] = useState(false)\r\n  const auth = useAuth()\r\n  const notify = useNotify()\r\n  const boardId = props.match.params.id\r\n  let history = useHistory();\r\n  const location = useLocation();\r\n  let guest = { id: '', username: ''}\r\n\r\n  if (location.state) {\r\n    guest = {\r\n      id: location.state.id,\r\n      username: location.state.username\r\n    }\r\n  }\r\n\r\n\r\n  const connectToSocket = async () => {\r\n    if(sessionLive === false) {\r\n      if(auth.userId) {\r\n        socketServices.initiateDMSocket(boardId)\r\n      }\r\n\r\n      socketServices.userEntryExit((statusType) => {\r\n        if(statusType === 'userConnect') {\r\n          notify.notify({\r\n            notification: 'New user has joined the game!',\r\n            errorType: null,\r\n            successType: 'newUserJoined'\r\n          })\r\n        }\r\n        if(statusType === \"userDisconnect\") {\r\n          notify.notify({\r\n            notification: 'User has left the game!',\r\n            errorType: 'userExit',\r\n            successType: null\r\n          })\r\n        }\r\n      })\r\n      \r\n      socketServices.addIcon((iconObj) => {\r\n        setIcons(icons => [...icons, iconObj])\r\n      })\r\n  \r\n      socketServices.updateIcon((position, id) => {\r\n        setIcons((icons) => icons.map(icon => {\r\n          if(icon.id === id) {\r\n            icon.position.x = position.x\r\n            icon.position.y = position.y\r\n          }\r\n          return icon\r\n        }))\r\n      })\r\n  \r\n      socketServices.clearIcon((id) => {\r\n        console.log('removing this id', id)\r\n        setIcons((icons) => icons.filter(icon => icon.id !== id))\r\n      })\r\n  \r\n      socketServices.updateMap( async() => {\r\n        setLoading(true)\r\n        const gameBoard = await gameBoardService.getGameBoard(boardId)\r\n        const boardImage = await imageUtility.convertBuffertoBlob(gameBoard.image.data)\r\n        setImage64(boardImage)\r\n        if(boardImage) {\r\n          setLoading(false)\r\n        }\r\n      })\r\n      setSessionLive(true)\r\n    } else {\r\n      socketServices.dmDisconnecting();\r\n      setSessionLive(false);\r\n    }\r\n\r\n  }\r\n\r\n  const updateIcon = async(position, id) => {\r\n    socketServices.moveIcon(position, id)\r\n    const updatedIcon = await iconService.updateIcon(position, id)\r\n    setIcons((icons) => icons.map(icon => {\r\n      if(icon.id === id) {\r\n        icon.position.x = position.x;\r\n        icon.position.y = position.y;\r\n      }\r\n      return icon\r\n    }))\r\n  }\r\n\r\n  const deleteIcon = async (id) => {\r\n    await iconService.deleteIcon(id)\r\n    socketServices.deleteIcon(id)\r\n    setIcons((icons) => icons.filter(icon => icon.id !== id))\r\n  }\r\n\r\n  useEffect(() => {\r\n    const source = axios.CancelToken.source()\r\n\r\n    const loadGameBoard = async() => {\r\n      try {\r\n        setLoading(true)\r\n        const gameBoard = await gameBoardService.getGameBoard(boardId, source.token)\r\n        const boardImage = await imageUtility.convertBuffertoBlob(gameBoard.image.data)\r\n        setImage64(boardImage)\r\n        setIcons(gameBoard.icons)\r\n        setLoading(false)\r\n      } catch (exception) {\r\n        console.log('loading mapImage failed', exception)\r\n      }\r\n    }\r\n    const guestAuthorization = async() => {\r\n      console.log(\"Authorizing guest. . .\")\r\n      socketServices.initiateGuestSocket(boardId, history, guest.username, loadGameBoard)\r\n    }\r\n\r\n    if(auth.userId) {\r\n      loadGameBoard();\r\n    } else {\r\n      guestAuthorization();\r\n      connectToSocket();\r\n    }\r\n    return () => {\r\n      source.cancel()\r\n      socketServices.disconnectSocket()\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n    <div className=\"gameBoardRow row\">\r\n      <DropDownNav sessionLive={sessionLive} history={history} connectToSocket={connectToSocket} boardId={boardId} />\r\n      <MapTray \r\n        deleteIcon={deleteIcon} \r\n        mapSrc={image64} \r\n        loading={loading} \r\n        icons={icons} \r\n        setIcons={setIcons} \r\n        updatePosition={updateIcon}\r\n        float={float}\r\n      />\r\n    </div>\r\n    {auth.userId\r\n      ?    <MasterBuilderNav\r\n              setLoading={setLoading}\r\n              boardId={boardId}\r\n              setImage64={setImage64}\r\n              icons={icons}\r\n              setIcons={setIcons}\r\n              float={float}\r\n              setFloat={setFloat}\r\n            />\r\n      : null\r\n    }\r\n    <MessengerBar\r\n        id={guest.id || auth.userId}\r\n        username={guest.username || auth.username}\r\n        session={sessionLive}\r\n        float={float}\r\n        setFloat={setFloat}\r\n     />\r\n    </>\r\n  )\r\n}\r\n\r\n\r\nexport default Gameboard\r\n\r\n","import React, { useState } from 'react'\r\nimport { Switch, Route, Link, Redirect } from 'react-router-dom'\r\nimport Login from './Login'\r\nimport Dashboard from './Dashboard'\r\nimport { useAuth } from '../services/use-auth'\r\nimport Gameboard from './Gameboard'\r\n\r\nfunction Layout() {\r\n  const auth = useAuth()\r\n\r\n  return (\r\n    <>      \r\n    <Route path=\"/\" render={() => (\r\n      auth.userId \r\n        ? <Redirect from='/' to='/dashboard' /> \r\n        : <Redirect from='/' to='/login' />\r\n      )}\r\n    /> \r\n      <Switch>\r\n\r\n        <Route path=\"/dashboard\" component={Dashboard} />\r\n        <Route path='/login' component={Login} />\r\n        <Route path='/gameboard/:id' component={Gameboard} />\r\n\r\n      </Switch>\r\n    </>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport default Layout\r\n","import React, { useState, useEffect } from 'react'\nimport './App.css';\nimport { BrowserRouter as Router } from 'react-router-dom'\nimport Layout from './components/Layout'\nimport { ProvideAuth } from './services/use-auth'\nimport { ProvideNotify } from './services/use-notification'\n\n\n/*{user ?\n  <Dashboard user={user} setUser={setUser} />\n  : <div id=\"background\">\n      <Login setUser={setUser} />\n  </div>\n}*/\n\nfunction App() {\n\n  return (\n    <Router>\n      <ProvideNotify>\n        <ProvideAuth>\n          <Layout />\n        </ProvideAuth>\n      </ProvideNotify>\n\n    </Router>\n  );\n}\n\nexport default App;\n/*\nconst [notes, setNotes] = useState([])\n  const [connected, setConnected] = useState(false)\n\n  socket.on('updated-content', (res) => {\n    setNotes(res)\n  })\n  \n  useEffect(() => {\n    socket.emit('Hello_there', null);\n    const eventHandler = () => setConnected(true)\n\n    socket.on('Welcome from server', () => {\n      console.log('I am connected with the backend')\n      eventHandler()\n    });\n\n    return () => {\n      socket.off('Welcome from server', eventHandler)\n    }\n  }, [])\n\n  useEffect(() => {\n    const getAllNotes = async() => {\n      const notes = await axios.get('/api/notes')\n      setNotes(notes.data)\n    }\n\n    getAllNotes()\n  },[])\n\n  \n  const testThis = async () => {\n    const newNote = {\n      content: 'This is another test!',\n      date: new Date(),\n      important: false\n    }\n    await axios.post('/api/notes', newNote)\n\n  }\n  \n      <div className=\"App\">\n      <button onClick={testThis}>Test</button>\n      {notes.map(note => (\n        <div key={note.id}>{note.content}</div>\n      ))}\n    </div>\n\n  */","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}