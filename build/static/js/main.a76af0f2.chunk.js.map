{"version":3,"sources":["services/login.js","services/gameboard.js","services/signup.js","components/Notification.js","services/use-notification.js","services/use-auth.js","services/socketManager.js","components/Login.js","components/VisibleButton.js","utils/imageHelper.js","components/AddContentCircle.js","components/LoadingSquare.js","components/DragComponent.js","services/icon.js","components/Icon.js","components/Dashboard.js","components/MasterBuilderBar.js","components/MessengerBar.js","components/Gameboard.js","components/Layout.js","App.js","reportWebVitals.js","index.js"],"names":["login","user","a","axios","post","response","console","log","headers","data","baseUrl","token","setToken","newToken","getGameBoards","sourceToken","config","Authorization","cancelToken","get","getGameBoard","boardId","createGameBoard","newBoard","formData","FormData","append","mapImage","name","updateGameBoardImage","file","put","deleteGameBoard","id","delete","retrieveToken","createUser","credentials","NotificationError","errorType","notify","useNotify","message","Notification","type","notification","className","notifyContext","createContext","ProvideNotify","children","useState","setMessage","setErrorType","successType","setSuccessType","setTimeout","notificationAlert","suppliedError","useProvideNotify","Provider","value","useContext","authContext","ProvideAuth","auth","userId","setUserId","username","setUsername","logIn","loginService","loggedUser","window","localStorage","setItem","JSON","stringify","gameBoardService","logOut","removeItem","exception","signUp","newUser","signUpService","useEffect","loggedUserJson","getItem","parse","useProvideAuth","useAuth","socket","verified","disconnectSocket","disconnect","initiateDMSocket","io","emit","on","initiateGuestSocket","history","callback","check","goBack","guestQuickCheck","userEntryExit","dmDisconnecting","createIcon","newIcon","addIcon","iconObj","moveIcon","iconPosition","iconId","updateIcon","deleteIcon","clearIcon","changeMap","updateMap","sendMessage","receiveMessage","JoinSession","sessionID","setSessionID","useHistory","quickCheck","push","pathname","from","state","Math","random","onSubmit","e","preventDefault","checkName","test","checkSession","socketServices","onChange","target","LoginForm","password","setPassword","handleSubmit","placeholder","SignUp","handleSignUp","passwordConfirm","setPasswordConfirm","SignUpForm","OptionButton","handleClick","onClick","DemoButton","Login","field","setField","VisibleButton","props","visible","setVisible","makeContentRef","useRef","style","ref","label","React","cloneElement","buffer","arraybuffer","Uint8Array","imageBlob","Blob","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","this","result","blobReaderPromise","then","AddContentCircle","color","LoadingSquare","Draggable","position","updatePosition","x","y","drop","setDrop","dragRef","posRef","handleDragMove","aspectBox","document","getElementById","getBoundingClientRect","current","left","clientX","width","top","clientY","height","stopPropagation","handlePointerUp","bounding","display","removeEventListener","preventBehavior","icon","addEventListener","passive","firstRender","onPointerDown","getIcons","iconInfo","Icon","content","LogoutButton","PopUpNotice","onMouseEnter","onMouseLeave","BoardTile","thisBoard","gameBoards","setBoards","setBoardId","setLoading","loading","thumbnail","setThumbnail","clickRef","deleteGameboard","confirm","boardPath","newGameBoards","filter","board","length","getElementsByClassName","click","highlightClick","hasAttribute","oldSelect","removeAttribute","setAttribute","imageUtility","catch","error","alt","draggable","src","to","BoardDisplay","CreateBoard","createNewBoard","boardName","setBoardName","boxRef","fileRef","regTest","files","Error","checkForClick","event","contains","encType","required","autoFocus","htmlFor","DmButtons","UserBlock","SideBar","MapImageView","displayImage","icons","map","backgroundColor","MapTray","Dashboard","boards","setDisplayImage","setIcons","postedBoard","updateDashBoard","concat","dashImage","source","CancelToken","loadedBoards","getBoards","cancel","updateMapTile","boardFocus","find","BuildIcon","setContent","setColor","blur","onFocus","innerWidth","transform","onBlur","autoComplete","defaultValue","FileBase64","setImage64","handleChange","MasterBuilder","float","setFloat","option","setOption","navBarVis","setNavBarVis","iconService","box","SystemMessage","sender","MeMessage","ThemMessage","MessengerBar","session","messageText","setMessageText","messages","setMessages","blueCircleRef","bottomRef","scrollIntoView","behavior","systemMsg","freshText","replace","match","textSanitizer","newMessage","onKeyDown","key","requestSubmit","size","mapSrc","title","DropMenu","sessionLive","connectToSocket","location","host","DropDownNav","visibility","setVisibility","authCheck","Gameboard","image64","setSessionLive","guest","setGuest","params","useLocation","statusType","gameBoard","image","boardImage","loadGameBoard","guestAuthorization","guestName","prompt","Layout","path","component","render","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.a76af0f2.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl=\"/api/login\"\r\n\r\nconst login = async (user) => {\r\n  const response = await axios.post(baseUrl, user)\r\n  console.log(response.headers)\r\n  return response.data\r\n}\r\n\r\n\r\nexport default { login }","import axios from 'axios'\r\nconst baseUrl = '/api/gameboards'\r\n\r\nlet token = null\r\n\r\nconst setToken = (newToken) => {\r\n  !newToken\r\n    ? token = null\r\n    : token = `bearer ${newToken}`\r\n}\r\n\r\nconst retrieveToken = () => {\r\n  return token;\r\n}\r\n\r\nconst getGameBoards = async (sourceToken = null) => {\r\n  const config = {\r\n    headers: { Authorization: token },\r\n    cancelToken: sourceToken\r\n  }\r\n\r\n  const response = await axios.get(baseUrl, config)\r\n  return response.data\r\n}\r\n\r\nconst getGameBoard = async (boardId, sourceToken) => {\r\n  const config = {\r\n    cancelToken: sourceToken\r\n  }\r\n  const response = await axios.get(`${baseUrl}/${boardId}`, config)\r\n  return response.data\r\n}\r\n\r\nconst createGameBoard = async (newBoard) => {\r\n  const config = {\r\n    headers: {\r\n      Authorization: token,\r\n      'Content-type': 'multipart/form-data'\r\n    }\r\n  }\r\n\r\n  const formData = new FormData();\r\n  formData.append('myImage', newBoard.mapImage)\r\n  formData.append('title', newBoard.name)\r\n\r\n  const response = await axios.post(baseUrl, formData, config)\r\n  return response.data\r\n}\r\n\r\nconst updateGameBoardImage = async(file, boardId) => {\r\n  const formData = new FormData();\r\n  formData.append('myImage', file)\r\n\r\n  const response = await axios.put(`${baseUrl}/${boardId}`, formData)\r\n  return response.data\r\n}\r\n\r\nconst deleteGameBoard = async(id) => {\r\n  console.log('id', id)\r\n  const config = {\r\n    headers: { Authorization: token }\r\n  }\r\n\r\n  const response = await axios.delete(`${baseUrl}/${id}`, config)\r\n  return response.data\r\n}\r\n\r\nexport default {\r\n  setToken, \r\n  getGameBoards, \r\n  getGameBoard, \r\n  createGameBoard, \r\n  updateGameBoardImage,\r\n  deleteGameBoard, \r\n  retrieveToken\r\n}","import axios from 'axios'\r\nconst baseUrl=\"/api/users\"\r\n\r\nconst createUser = async (credentials) => {\r\n  const response = await axios.post(baseUrl, credentials)\r\n  return response.data\r\n}\r\n\r\nexport default { createUser }","import React from 'react'\r\nimport { useNotify } from '../services/use-notification'\r\n\r\nfunction NotificationError({errorType}) {\r\n  const notify = useNotify()\r\n\r\n  return (\r\n    notify.message && notify.errorType === errorType\r\n    ? <Notification type=\"errorMessage\" notification={notify.message} />\r\n    : null\r\n  )\r\n}\r\n\r\nfunction NotificationSuccess({successType}) {\r\n  const notify = useNotify()\r\n\r\n  return (\r\n    notify.message && notify.successType === successType\r\n    ? <Notification type=\"successMessage\" notification={notify.message} />\r\n    : null\r\n  )\r\n}\r\n\r\n\r\nfunction Notification({ notification, type }) {\r\n\r\n  return (\r\n    <div className={`noselect ${type}`}>\r\n      {notification}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport { NotificationError, NotificationSuccess }","import React, { useState, useEffect, useContext, createContext } from 'react'\r\nimport { NotificationError } from '../components/Notification'\r\n\r\nconst notifyContext = createContext()\r\n\r\nexport function ProvideNotify({ children }) {\r\n  const notify = useProvideNotify();\r\n  return <notifyContext.Provider value={notify}>{children}</notifyContext.Provider>\r\n}\r\n\r\nexport const useNotify = () => {\r\n  return useContext(notifyContext)\r\n}\r\n\r\nfunction useProvideNotify() {\r\n  const[message, setMessage] = useState('')\r\n  const[errorType, setErrorType] = useState('')\r\n  const[successType, setSuccessType] = useState('')\r\n\r\n  const notify = ({notification, errorType, successType }) => {\r\n    setMessage(notification)\r\n    setErrorType(errorType || '')\r\n    setSuccessType(successType || '')\r\n\r\n    setTimeout(() => {\r\n      setMessage('')\r\n      setErrorType('')\r\n      setSuccessType('')\r\n    }, 2000)\r\n  }\r\n\r\n  const notificationAlert = (suppliedError) => {\r\n    console.log(suppliedError)\r\n    return (\r\n      suppliedError === errorType\r\n        ? <NotificationError notification={message} />\r\n        : null   \r\n    )\r\n  }\r\n\r\n  return {\r\n    message,\r\n    errorType,\r\n    successType,\r\n    notify,\r\n    notificationAlert\r\n  }\r\n}\r\n\r\n","import React, { useState, useEffect, useContext, createContext } from 'react'\r\nimport loginService from './login'\r\nimport gameBoardService from './gameboard'\r\nimport signUpService from '../services/signup'\r\nimport { useNotify } from '../services/use-notification'\r\n\r\n\r\nconst authContext = createContext();\r\n\r\nexport function ProvideAuth({  children }) {\r\n  const auth = useProvideAuth();\r\n  return <authContext.Provider value={auth}>{children}</authContext.Provider>\r\n}\r\n\r\nexport const useAuth = () => {\r\n  return useContext(authContext)\r\n}\r\n\r\nfunction useProvideAuth() {\r\n  const [userId, setUserId] = useState(null)\r\n  const [username, setUsername ] = useState('')\r\n  const notify = useNotify()\r\n\r\n  const logIn = async (user) => {\r\n    try {\r\n      const loggedUser = await loginService.login(user)\r\n      window.localStorage.setItem(\r\n        'loggedDungeonMaster', JSON.stringify(loggedUser)\r\n      )\r\n\r\n      gameBoardService.setToken(loggedUser.token)\r\n\r\n      setUserId(loggedUser.id)\r\n      setUsername(loggedUser.username)\r\n    } catch(exception) {\r\n      notify.notify({\r\n        notification: 'Username or Password Incorrect',\r\n        errorType: 'badCredentials'\r\n      })\r\n      console.log('failure in useProvideAuth.logIn()', exception)\r\n    }\r\n  }\r\n\r\n  const logOut = async () => {\r\n    try {\r\n      window.localStorage.removeItem('loggedDungeonMaster')\r\n      gameBoardService.setToken(null)\r\n\r\n      setUserId(null)\r\n      setUsername('')\r\n    } catch(exception) {\r\n      console.log('failed to logout', exception);\r\n    }\r\n  }\r\n\r\n  const signUp = async (newUser) => {\r\n    const response = await signUpService.createUser(newUser)\r\n    return response\r\n  }\r\n\r\n  useEffect(() => {\r\n    const setToken = () => {\r\n      const loggedUserJson = window.localStorage.getItem('loggedDungeonMaster')\r\n      if(loggedUserJson) {\r\n        const user = JSON.parse(loggedUserJson)\r\n        setUserId(user.id)\r\n        setUsername(user.username)\r\n        gameBoardService\r\n          .setToken(user.token)\r\n      }\r\n    }\r\n    setToken()\r\n    return () => {\r\n      setToken()\r\n    }\r\n  }, [userId])\r\n\r\n  return {\r\n    username,\r\n    userId,\r\n    logIn,\r\n    logOut,\r\n    signUp\r\n  }\r\n}","import io from 'socket.io-client'\r\n\r\nlet socket;\r\nlet verified = false;\r\n//${window.location.protocol}//${window.location.host}\r\nconst initiateDMSocket = (boardId) => {\r\n\r\n  console.log(`Dungeon Master connecting to socket...`);\r\n  socket = io()\r\n  console.log('DMsocket', socket)\r\n\r\n  socket.emit('join', {boardId, username: \"DungeonMaster\"})\r\n  socket.on('user_joined')\r\n  socket.on('user_disconnect')\r\n}\r\n\r\nconst guestQuickCheck = (boardId, notify, callback) => {\r\n\r\n  socket = io()\r\n\r\n  socket.emit('guestQuick', boardId)\r\n\r\n  socket.on('guestCheckQuick', (check) => {\r\n    if(check) {\r\n      verified = true;\r\n      callback(boardId)\r\n    } else {\r\n      disconnectSocket();\r\n      notify.notify({\r\n        notification: 'Session not live or ID incorrect',\r\n        errorType: 'guestJoin'\r\n      })\r\n    } \r\n  })\r\n}\r\n\r\nconst initiateGuestSocket = (boardId, history, username, callback) => {\r\n  if(!socket) {\r\n    socket = io()\r\n\r\n    socket.emit('guest', boardId)\r\n    \r\n    socket.on('guestCheck', (check) => {\r\n      if(!check) {\r\n        console.log('no access!')\r\n        disconnectSocket()\r\n        return history.goBack()\r\n      } else {\r\n        return callback()\r\n      }\r\n    })\r\n  }\r\n      console.log('Guest registering to Room')\r\n      socket.emit('join', { boardId, username })\r\n      socket.on('dm_disconnect', () => {\r\n        console.log('The guests have received notice from the Server, the DM is gone')\r\n        disconnectSocket()\r\n        return history.goBack()\r\n      })\r\n\r\n      if(verified) {\r\n        return callback()\r\n      }\r\n}\r\n\r\nconst userEntryExit = (callback) => {\r\n  if(socket) {\r\n    socket.on('user_joined', (data) => {\r\n      callback(data)\r\n    })\r\n    socket.on('user_disconnect', (data) => {\r\n      callback(data)\r\n    })\r\n  }\r\n}\r\n\r\n\r\nconst createIcon = (newIcon) => {\r\n\r\n  if(socket) {\r\n    socket.emit('create_icon', newIcon)\r\n  }\r\n}\r\n\r\nconst addIcon = (callback) => {\r\n\r\n  if(socket){\r\n      socket.on('add_icon', (iconObj) => {\r\n      return callback(iconObj)\r\n    })\r\n  }\r\n}\r\n\r\nconst moveIcon = (iconPosition, iconId) => {\r\n\r\n  if(socket) {\r\n\r\n    socket.emit('move_icon', { iconPosition, iconId })\r\n  }\r\n}\r\n\r\nconst updateIcon = (callback) => {\r\n\r\n  if(socket) {\r\n    socket.on('icon_updated', ({ iconPosition, iconId }) => {\r\n\r\n      return callback(iconPosition, iconId)\r\n    })\r\n  }\r\n}\r\n\r\nconst deleteIcon = (id) => {\r\n\r\n  if(socket) {\r\n\r\n    socket.emit('delete_icon', id)\r\n  }\r\n}\r\n\r\nconst clearIcon = (callback) => {\r\n\r\n  if(socket) {\r\n    socket.on('clear_icon', (id) => {\r\n\r\n      callback(id)\r\n    })\r\n  }\r\n}\r\n\r\nconst changeMap = () => {\r\n\r\n  if(socket) {\r\n\r\n    socket.emit('change_map')\r\n  }\r\n}\r\n\r\nconst updateMap = (callback) => {\r\n  if(socket) {\r\n    socket.on('update_map', () => callback())\r\n  }\r\n}\r\n\r\n\r\nconst sendMessage = (message) => {\r\n  if(socket) {\r\n\r\n    socket.emit('send_message', message)\r\n  }\r\n}\r\n\r\nconst receiveMessage = (callback) => {\r\n  if(socket) {\r\n    socket.on('receive_message', (data) => {\r\n\r\n      return callback(data)\r\n    })\r\n  }\r\n}\r\n\r\nconst dmDisconnecting = () => {\r\n  if(socket) {\r\n\r\n    socket.emit('dm_disconnecting')\r\n  }\r\n}\r\n\r\nconst disconnectSocket = () => {\r\n  if(socket) {\r\n    socket.disconnect()\r\n    socket = null;\r\n  }\r\n}\r\n\r\n\r\n\r\nexport default {\r\n  initiateDMSocket,\r\n  initiateGuestSocket,\r\n  guestQuickCheck,\r\n  userEntryExit,\r\n  disconnectSocket,\r\n  dmDisconnecting,\r\n  createIcon,\r\n  addIcon,\r\n  moveIcon,\r\n  updateIcon,\r\n  deleteIcon,\r\n  clearIcon,\r\n  changeMap,\r\n  updateMap,\r\n  sendMessage,\r\n  receiveMessage\r\n}","import React, { useState, useEffect, useRef } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useAuth } from '../services/use-auth'\r\nimport { useNotify } from '../services/use-notification'\r\nimport { NotificationError, NotificationSuccess } from './Notification'\r\nimport socketServices from '../services/socketManager'\r\n\r\nfunction JoinSession() {\r\n  const [sessionID, setSessionID] = useState('')\r\n  const [username, setUsername] = useState('')\r\n  const history = useHistory()\r\n  const notify = useNotify();\r\n\r\n  const quickCheck = (sessionID) => {\r\n    return (\r\n      history.push({\r\n        pathname: `/gameboard/${sessionID}`,\r\n        from: '/',\r\n        state: {\r\n          username: username,\r\n          id: Math.random()\r\n        }\r\n      })\r\n    )\r\n  }\r\n\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    const checkName = /(\\$|{|}|\\/|\\\\|\\*|\\(|\\)\\`)+/g.test(username)\r\n    const checkSession = /(\\$|{|}|\\/|\\\\|\\*|\\(|\\)\\`)+/g.test(username)\r\n\r\n    if(!checkName && !checkSession && sessionID && username) {\r\n      socketServices.guestQuickCheck(sessionID, notify, quickCheck);\r\n    } else {\r\n      notify.notify({\r\n        notification: 'Please ensure no special characters in name and valid sessionID',\r\n        errorType: 'guestJoin'\r\n      })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form className=\"formContainer row\" onSubmit={handleSubmit}>\r\n      \r\n      <label className=\"label col-lg-7 col-md-6 col-8 mb-2\">Player Name</label>\r\n      <input\r\n        type=\"text\"\r\n        value={username}\r\n        onChange={({ target }) => setUsername(target.value)}\r\n        className=\"submitButtons col-lg-6 col-md-6 col-8 mb-2 inputs\"\r\n        />\r\n      <label className=\"label col-lg-7 col-md-6 col-8 mb-2\">Session ID</label>\r\n      <input\r\n        type=\"text\"\r\n        value={sessionID}\r\n        onChange={({ target }) => setSessionID(target.value)}\r\n        className=\"submitButtons col-lg-6 col-md-6 col-8 mb-2 inputs\"\r\n        />\r\n      <div className=\"notifyBoxes col-lg-6 col-md-6 col-8 mb-2\">\r\n        <button className=\"buttons\" type=\"submit\">Join</button>\r\n        <NotificationError errorType='guestJoin' />\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\n\r\nfunction LoginForm () {\r\n  const [username, setUsername] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const auth = useAuth()\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault()\r\n\r\n    try {\r\n      const user = {\r\n        username,\r\n        password\r\n      }\r\n      auth.logIn(user)\r\n    } catch (exception) {\r\n      console.log(exception)\r\n      \r\n    }\r\n  }\r\n\r\n  return (\r\n    <form className=\"formContainer row\" onSubmit={handleSubmit}>\r\n      <label className=\"label col-lg-6 col-md-6 col-8\">Username</label>\r\n      <input\r\n          type='text'\r\n          placeholder='Username'\r\n          className=\"col-lg-6 col-md-6 col-8 mt-2 mb-4 inputs\"\r\n          value={username}\r\n          onChange={({ target }) => setUsername(target.value)}\r\n      />\r\n      <label className=\"label col-lg-6 col-md-6 col-8\">Password</label>\r\n      <input\r\n        type='password'\r\n        placeholder='Password'\r\n        className=\"col-lg-6 col-md-6 col-8 mt-2 mb-4 inputs\"\r\n        value={password}\r\n        onChange={({ target }) => setPassword(target.value)}\r\n      />\r\n      <div className=\"notifyBoxes col-lg-6 col-md-6 col-8 mb-2\">\r\n        <button className=\"buttons\" type=\"submit\">Login</button>\r\n        <NotificationError errorType='badCredentials' />\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nfunction SignUp({ handleSignUp }) {\r\n  const[username, setUsername] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [passwordConfirm, setPasswordConfirm] = useState('')\r\n  const notify = useNotify();\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n\r\n    if(password === passwordConfirm) {\r\n      handleSignUp(username, password)\r\n    } else {\r\n      notify.notify({\r\n        notification: 'Please ensure passwords match',\r\n        errorType: 'passwordMatch'\r\n      })\r\n    }\r\n  }\r\n \r\n  return (\r\n    <form className=\"formContainer row\" onSubmit={handleSubmit}>\r\n      <label className=\"label col-lg-6 col-md-8 col-8 mb-2\" >Username</label>\r\n      <input\r\n        type='text'\r\n        className=\"col-lg-6 col-md-8 col-8 mb-2 inputs\"\r\n        value={username}\r\n        onChange={({ target }) => setUsername(target.value)}\r\n      />\r\n      <label className=\"label col-lg-6 col-md-8 col-8 mb-2\">Password</label>\r\n      <input\r\n        type='password'\r\n        className=\"col-lg-6 col-md-8 col-8 mb-2 inputs\"\r\n        value={password}\r\n        onChange={({ target }) => setPassword(target.value)}\r\n      />\r\n      <label className=\"label col-lg-6 col-md-8 col-8 mb-2\">Confirm Password</label>\r\n      <input\r\n        type='password'\r\n        className=\"col-lg-6 col-md-8 col-8 mb-2 inputs\"\r\n        value={passwordConfirm}\r\n        onChange={({ target }) => setPasswordConfirm(target.value)}\r\n      />\r\n      <div className=\"notifyBoxes col-lg-6 col-md-8 col-8 mb-2 pt-2\">\r\n        <button className=\"buttons\" type=\"submit\">Sign Up</button>\r\n        <NotificationError errorType='passwordMatch' />\r\n        <NotificationError errorType='usernameLength' />\r\n      </div>\r\n    </form> \r\n  )\r\n}\r\n\r\nfunction SignUpForm () {\r\n  const notify = useNotify();\r\n  const auth = useAuth()\r\n\r\n  const handleSignUp = async (username, password) => {\r\n    try {\r\n      const newUser = { username, password }\r\n      const response = await auth.signUp(newUser)\r\n      if(response) {\r\n        notify.notify({\r\n          notification: `New user ${username} created!`,\r\n          successType: 'userCreated'\r\n        })\r\n      }\r\n    } catch (exception) {\r\n      notify.notify({\r\n        notification: 'Username taken or under 5 character mininmum length',\r\n        errorType: 'usernameLength'\r\n      })\r\n      console.log(exception)\r\n    }\r\n  }\r\n  return (\r\n      <SignUp handleSignUp={handleSignUp} />\r\n  )\r\n}\r\n\r\nconst OptionButton = ({ handleClick, value }) => {\r\n\r\n  return (\r\n    <button value={value} onClick={handleClick} className=\"optionItems px-2 py-1 buttons\">\r\n      {value}\r\n    </button>\r\n  )\r\n}\r\n\r\nconst DemoButton = () => {\r\n  const auth = useAuth()\r\n\r\n  const handleClick = () => {\r\n    try {\r\n      const user = {\r\n        username: 'Travis Draper',\r\n        password: 'travis'\r\n      }\r\n      auth.logIn(user)\r\n    } catch (exception) {\r\n      console.log(exception)\r\n      \r\n    }\r\n  }\r\n\r\n  return (\r\n    <button className=\"optionItems px-1 py-1 mb-2 buttons\" onClick={handleClick}>\r\n      Demo\r\n    </button>\r\n  )\r\n}\r\n\r\nfunction Login() {\r\n  const [field, setField] = useState('Login')\r\n\r\n  const handleClick = ({ target }) => {\r\n    setField(target.value)\r\n  }\r\n\r\n  return (\r\n    <div id=\"background\">\r\n    <h1 className=\"noselect loginTitle\">\r\n        Dungeon Map!\r\n    </h1>\r\n    <div className='loginContainer row mx-3'>\r\n      <div className='loginBox notifyBoxes d-flex'>\r\n        <h2 className=\"noselect titles formTitle\">Login</h2>\r\n        <div className=\"formBoxContainer py-5\">\r\n\r\n        {field === 'Login' ? <LoginForm /> : null}\r\n        {field === 'Join Session' ? <JoinSession /> : null}\r\n        {field === 'Sign Up' ? <SignUpForm /> : null}\r\n\r\n        </div>\r\n        <div className=\" otherOptions d-flex mt-4 mx-2\">\r\n          <OptionButton value=\"Login\" handleClick={handleClick} />\r\n          <OptionButton value=\"Sign Up\" handleClick={handleClick} />\r\n          <OptionButton value=\"Join Session\" handleClick={handleClick} />\r\n        </div>\r\n        <DemoButton />\r\n          \r\n      </div>\r\n\r\n  </div>\r\n  </div>\r\n  )\r\n}\r\n\r\nexport default Login","import React, { useState, useRef } from 'react'\r\n\r\nfunction VisibleButton (props) {\r\n  const [visible, setVisible] = useState(false)\r\n  const makeContentRef = useRef()\r\n  const toggleVisible = () => {\r\n    setVisible(!visible)\r\n  }\r\n\r\n  return (\r\n    <div className={props.className} style={props.style}>\r\n      <button ref={makeContentRef} onClick={toggleVisible} className=\"buttons signUpButton\">{props.label}</button>\r\n      { visible ? React.cloneElement(props.children, { ...props, visible: visible, setVisible: setVisible })\r\n        : null\r\n      }\r\n      \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default VisibleButton","import axios from 'axios'\r\n\r\nfunction blobReaderPromise (buffer) {\r\n  let arraybuffer = Uint8Array.from(buffer).buffer;\r\n  let imageBlob = new Blob([arraybuffer])\r\n\r\n  return new Promise(function(resolve, reject) {\r\n    let reader = new FileReader()\r\n    reader.readAsDataURL(imageBlob)\r\n    reader.onload = function() {\r\n      resolve(this.result)\r\n    }\r\n  })\r\n}\r\nconst convertBuffertoBlob = (buffer) => {\r\n  const base64 = blobReaderPromise(buffer)\r\n    .then(response => response )\r\n  return base64\r\n}\r\n\r\n\r\nexport default {\r\n  convertBuffertoBlob\r\n}","import React from 'react'\r\n\r\n\r\nfunction AddContentCircle({ color }) {\r\n  return (\r\n    <div style={{'backgroundColor': `${color}`}} className=\" specialBounce AddContentCircle\"> \r\n      <div className=\"noselect AddContentCircleText d-flex\">\r\n        Add content\r\n      </div> \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AddContentCircle","import React from 'react'\r\n\r\nconst LoadingSquare = () => {\r\n\r\n  return (\r\n    <div className=\"loadingSquare\">\r\n        <div className=\"noselect loadingSquareText d-flex\">\r\n        Loading\r\n      </div> \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LoadingSquare","import React, { useState, useEffect, useRef } from 'react';\r\n\r\nfunction Draggable({ \r\n  children, \r\n  position, \r\n  updatePosition, \r\n  deleteIcon, \r\n  id\r\n }) {\r\n  const [drop, setDrop] = useState({ x: position.x, y: position.y })\r\n  const dragRef = useRef()\r\n  const posRef = useRef({\r\n    x: 0,\r\n    y: 0\r\n  })\r\n\r\n  const handlePointerDown = (e) => {\r\n\r\n    const { left, top }  = dragRef.current.getBoundingClientRect()\r\n    posRef.current = {\r\n      x: left - e.clientX,\r\n      y: top - e.clientY\r\n    }\r\n\r\n    window.addEventListener('pointermove', handleDragMove);\r\n    window.addEventListener('pointerup', handlePointerUp);\r\n\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  };\r\n  \r\n  const handleDragMove = (e) => {\r\n    const aspectBox = document.getElementById('aspectRatioBoxBoard').getBoundingClientRect()\r\n\r\n    dragRef.current.style.left = `${(e.clientX + posRef.current.x - aspectBox.left)/aspectBox.width*100}%`\r\n    dragRef.current.style.top = `${(e.clientY + posRef.current.y - aspectBox.top)/aspectBox.height*100}%`\r\n \r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  };\r\n\r\n  const handlePointerUp = (e) => {\r\n    const bounding = dragRef.current.getBoundingClientRect();\r\n\r\n    if(bounding.x < 50 && bounding.y < 50) {\r\n      try {\r\n        deleteIcon(id)\r\n        dragRef.current.style.display = 'none';\r\n      } catch(exception) {\r\n        console.log('Unable to delete icon', exception)\r\n      }\r\n    } else if (drop.x !== dragRef.current.style.left && drop.y !== dragRef.current.style.top) {\r\n      setDrop({\r\n        x: dragRef.current.style.left,\r\n        y: dragRef.current.style.top\r\n      })\r\n    }\r\n    posRef.current = {\r\n      x: 0,\r\n      y: 0\r\n    }\r\n\r\n    window.removeEventListener('pointermove', handleDragMove);\r\n    window.removeEventListener('pointerup', handlePointerUp);\r\n\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  }\r\n\r\n\r\n\r\n  const preventBehavior =(e) => {\r\n    e.preventDefault();\r\n  }\r\n\r\n  useEffect(() => {\r\n    const icon = dragRef.current\r\n    icon.addEventListener('touchmove', preventBehavior, {passive: false})\r\n\r\n    return () => {\r\n      window.removeEventListener('pointerup', handlePointerUp)\r\n      icon.removeEventListener('touchmove', preventBehavior, {passive: false})\r\n      window.removeEventListener('pointermove', handleDragMove);\r\n      window.removeEventListener('pointerup', handlePointerUp);\r\n    } \r\n\r\n  }, [])\r\n\r\n\r\n  const firstRender = useRef(true);\r\n  useEffect(() => {\r\n    if(!firstRender.current) {\r\n      updatePosition({ \r\n        x: drop.x, \r\n        y: drop.y \r\n      }, id)\r\n    }\r\n  }, [drop.x, drop.y] ) \r\n\r\n  useEffect(() => { firstRender.current = false }, [])\r\n  return (\r\n    <div\r\n      onPointerDown={handlePointerDown}\r\n      style={{top: position.y, left: position.x}}\r\n      className=\"draggableBox\"\r\n      ref={dragRef}\r\n    >\r\n      {children}\r\n    </div>\r\n\r\n  )\r\n}\r\n\r\nexport default Draggable","import axios from 'axios'\r\nconst baseUrl = '/api/icons'\r\n\r\nconst getIcons = async(boardId) => {\r\n  const response = await axios.get(`${baseUrl}/${boardId}`)\r\n  console.log('ICONS ', response.data)\r\n  return response.data\r\n}\r\n\r\nconst createIcon = async(iconInfo) => {\r\n  const response = await axios.post(baseUrl, iconInfo)\r\n  return response.data\r\n}\r\n\r\nconst updateIcon = async(iconInfo, id) => {\r\n  const response = await axios.put(`${baseUrl}/${id}`, iconInfo)\r\n  return response.data\r\n}\r\n\r\nconst deleteIcon = async(id) => {\r\n  console.log(id)\r\n  const response = await axios.delete(`${baseUrl}/${id}`)\r\n  return response.data\r\n}\r\n\r\nexport default {\r\n  getIcons,\r\n  createIcon,\r\n  updateIcon,\r\n  deleteIcon\r\n}","import React, { useEffect, useCallback } from 'react'\r\nimport Draggable from './DragComponent'\r\nimport iconService from '../services/icon'\r\nimport socketServices from '../services/socketManager'\r\n\r\nfunction debounce(func, timeout = 1000) {\r\n  let timer;\r\n  return (...args) => {\r\n    clearTimeout(timer)\r\n    timer = setTimeout(() => { func.apply(this, args); }, timeout)\r\n  }\r\n}\r\n\r\n\r\n\r\nfunction Icon({ \r\n  style, \r\n  content, \r\n  id, \r\n  position, \r\n  display=false, \r\n  deleteIcon,\r\n  updatePosition }) {\r\n  \r\n/*\r\n const updateIcon = useCallback(\r\n    debounce(async(position) => {\r\n      socketServices.moveIcon(position, id)\r\n      const updatedIcon = await iconService.updateIcon(position, id)\r\n    }, 1000),\r\n    []\r\n  )\r\n*/\r\n\r\n  return (\r\n    <>\r\n    {display\r\n      ? <div className=\"draggableBox\" style={{ top: position.y, left: position.x }}>\r\n          <div style={style} className=\"noselect playerIcon\">\r\n            {content}\r\n          </div>\r\n        </div>\r\n      : <Draggable \r\n          updatePosition={updatePosition} \r\n          deleteIcon={deleteIcon} \r\n          position={position}\r\n          id={id}\r\n        >\r\n          <div style={style} className=\"noselect playerIcon\">\r\n            {content}\r\n          </div>\r\n        </Draggable>\r\n    }\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Icon","import React, { useState, useEffect, useRef } from 'react'\r\nimport { Switch, Route, Link, Redirect, useRouteMatch } from 'react-router-dom'\r\nimport { BsXCircle, BsCheckCircle, BsMicFill } from 'react-icons/bs'\r\nimport { useAuth } from '../services/use-auth'\r\nimport gameBoardService from '../services/gameboard'\r\nimport VisibleButton from './VisibleButton'\r\nimport axios from 'axios'\r\nimport imageUtility from '../utils/imageHelper'\r\nimport AddContentCircle from './AddContentCircle'\r\nimport LoadingSquare from './LoadingSquare'\r\nimport Icon from './Icon'\r\n\r\nfunction LogoutButton() {\r\n  const auth = useAuth()\r\n\r\n  return (\r\n    <div className=\"logoutBox optionItems px-1 py-1 col-6\">\r\n      <button className=\"buttons logOutButton\" onClick={() => auth.logOut()}>Logout</button>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nfunction PopUpNotice(props) {\r\n  const [visible, setVisible] = useState(false)\r\n  const { label, className } = props\r\n\r\n  return (\r\n    <div onMouseEnter={() => setVisible(true)} onMouseLeave={() => setVisible(false)} className={`${className} my-2`}>\r\n      {props.children}\r\n      {visible ? <div className='popUpVisible'>{label}</div> : null }\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction BoardTile({ thisBoard, gameBoards, setBoards, setBoardId, loading, setLoading}) {\r\n  const [thumbnail, setThumbnail] = useState('')\r\n  const clickRef = useRef()\r\n\r\n  const deleteGameboard = async() => {\r\n    try {\r\n      if (window.confirm('Do you want to delete this board?')) {\r\n        setLoading(true)\r\n        await gameBoardService.deleteGameBoard(thisBoard.boardPath)\r\n        const newGameBoards = gameBoards.filter(board => board.id !== thisBoard.id)\r\n        setBoards(newGameBoards)\r\n        setLoading(false)\r\n        if(newGameBoards.length > 0) {\r\n          document.getElementsByClassName('thumbnailBox')[newGameBoards.length-1].click()\r\n        }\r\n      }\r\n    } catch (exception) {\r\n      console.log(exception)\r\n    }\r\n  }\r\n\r\n  const highlightClick = (e) => {\r\n    setBoardId(thisBoard.id)\r\n    if(!clickRef.current.hasAttribute('id')) {\r\n      const oldSelect = document.getElementById('highlightSelect')\r\n      if(oldSelect) { \r\n        oldSelect.removeAttribute('id') \r\n      }\r\n      clickRef.current.setAttribute('id', 'highlightSelect')\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const thumbNailImage = imageUtility.convertBuffertoBlob(thisBoard.thumbnail.data)\r\n        .then( response => setThumbnail(response))\r\n        .catch( error => console.log(error) )\r\n\r\n    document.getElementsByClassName('thumbnailBox')[0].click()\r\n  }, [])\r\n\r\n  return (\r\n    <div ref={clickRef} className={`boardTile row ${thisBoard.board}`}>\r\n      <div onClick={highlightClick}  className=\"boardTitle pe-0 d-flex col-4\">\r\n        <div className=\"boardTitleText\">{thisBoard.board}</div>\r\n      </div>\r\n      <div onClick={highlightClick} className=\"thumbnailBox col-6 py-2 ps-3\">\r\n        <img alt=\"Gameboard Map minified view\" draggable=\"false\" className=\"thumbnailImage img-fluid\" src={thumbnail} />\r\n      </div>\r\n      <div className=\"buttonContainer ps-0 pe-0 col-2 row\">\r\n        <PopUpNotice label='Delete Gameboard'className=\"ps-0 deleteButton\">\r\n          <BsXCircle className=\"deleteIcon\" onClick={deleteGameboard}/>\r\n        </PopUpNotice>\r\n        <PopUpNotice label='Host Gameboard' className=\"ps-0  enterButton\">\r\n          <Link className=\"toGameboardLink\" to={`/gameboard/${thisBoard.boardPath}`}>\r\n            <BsCheckCircle className=\"enterIcon\"/>\r\n          </Link>\r\n        </PopUpNotice>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction BoardDisplay(props) {\r\n  return (\r\n    <div className=\"boardsDisplay\">\r\n      {props.children}\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction CreateBoard({setVisible, createNewBoard}) {\r\n  const [boardName, setBoardName] = useState('')\r\n  const boxRef = useRef();\r\n  const fileRef = useRef();\r\n  const regTest = /image\\/(png|jpeg)/\r\n  const handleSubmit = async (e) => {\r\n    \r\n    e.preventDefault()\r\n    try {\r\n      let file = fileRef.current.files[0]\r\n      if(regTest.test(file.type)) {\r\n        console.log('success!')\r\n        setVisible(false)\r\n        await createNewBoard(boardName, file)\r\n      } else {\r\n        throw new Error({ message: 'wrong file type!' })\r\n      }\r\n    } catch (exception) {\r\n      console.log(exception)\r\n    }\r\n    \r\n  }\r\n\r\n  const checkForClick = (event) => {\r\n    if(!boxRef.current || !boxRef.current.contains(event.target)) {\r\n        setVisible(false)\r\n    }\r\n  }\r\n \r\n  useEffect(() => {\r\n    document.addEventListener('click', checkForClick)\r\n    return () => {\r\n      document.removeEventListener('click', checkForClick)\r\n    }\r\n  })\r\n\r\n  return(\r\n    <div ref={boxRef} className=\"newBoardFormBox popUpBoxes py-2 px-2\">\r\n      <form id=\"uploadFormDash\" className=\"row py-3 px-3\" encType='multipart/form-data' onSubmit={handleSubmit}>\r\n        <label className=\"label newMapNameLabel\">Board Name:</label>\r\n        <input\r\n          type=\"text\"\r\n          className=\"inputs pb-2 newMapName col-10 my-2\"\r\n          value={boardName}\r\n          onChange={({ target }) => setBoardName(target.value)}\r\n          required\r\n          autoFocus\r\n        />\r\n        <label htmlFor=\"fileUploadDash\" className=\"col-4 px-1 py-1 mb-2 fileUpload submitButtons buttons\">Upload Image</label>\r\n        <input\r\n          type='file'\r\n          className='inputs newMapName'\r\n          ref={fileRef}\r\n          id=\"fileUploadDash\"\r\n          name=\"file\"\r\n          required\r\n        />\r\n        <button className=\"col-6 mt-4 submitButtons buttons\" type='submit'>Create</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction DmButtons(props) {\r\n\r\n  return (\r\n    <div className=\"dmButtonsBox d-flex\">\r\n      {props.children}\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction UserBlock() {\r\n  const auth = useAuth()\r\n\r\n  return (\r\n    <div className=\"userBlock pt-1 pb-1 pt-lg-3 pb-lg-3 row\">\r\n      <div className=\"dashTitle col-12\">\r\n        <p className=\"titleName\">Dungeon Master:</p>\r\n        <p className=\"titleName ms-2 ms-lg-0\">{auth.username}</p>\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction SideBar(props) {\r\n\r\n  return (\r\n    <div className=\"sideBarColumn col-12 col-lg-2 d-flex\">\r\n      {props.children}\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction MapImageView({ displayImage, boardId, icons }) {\r\n  \r\n  return (\r\n    <div className=\"mapImageView col-9 col-md-8 d-flex\">\r\n      <div className=\"imageBox d-flex\">\r\n        <div id=\"aspectRatioBoxTray\">\r\n          {icons.map(icon => {\r\n            return <Icon\r\n              key={icon.id} \r\n              style={{backgroundColor: icon.color}} \r\n              content={icon.content}\r\n              id={icon.id}\r\n              position={icon.position}\r\n              display={true}\r\n              />\r\n          })}\r\n          <img draggable=\"false\" className=\"dashMapImage mapImage img-fluid\" key={boardId} alt='' src={displayImage} />\r\n        </div>\r\n      </div>\r\n    </div> \r\n  )\r\n}\r\n\r\nfunction MapTray(props) {\r\n\r\n  return (\r\n    <div className=\"mapTrayContainer col-12 col-lg-10  d-flex\">\r\n      {props.children}\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction Dashboard() {\r\n  const [boards, setBoards] = useState([])\r\n  const [boardId, setBoardId] = useState('')\r\n  const [displayImage, setDisplayImage] = useState(null)\r\n  const [icons, setIcons] = useState([])\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  const createNewBoard = async(boardName, file) => {\r\n    setLoading(true)\r\n    try {\r\n      const newBoard = {\r\n        name: boardName,\r\n        mapImage: file\r\n      }\r\n      const postedBoard = await gameBoardService.createGameBoard(newBoard)\r\n      if(postedBoard) {\r\n        await updateDashBoard(postedBoard)\r\n        setBoards(boards.concat(postedBoard))\r\n        setLoading(false)\r\n        document.getElementsByClassName('thumbnailBox')[boards.length].click()\r\n      }\r\n    } catch (exception) {\r\n      console.log(exception)\r\n    }\r\n  }\r\n\r\n  const updateDashBoard = (board) => {\r\n    imageUtility.convertBuffertoBlob(board.dashImage.data)\r\n      .then(response => {\r\n        setDisplayImage(response)\r\n      })\r\n      .catch(error => console.log('error with updating dash', error.message))\r\n  }\r\n\r\n  useEffect(() => {\r\n    const source = axios.CancelToken.source()\r\n    const getBoards = async() => {\r\n      setLoading(true)\r\n      try {\r\n        const loadedBoards = await gameBoardService.getGameBoards(source.token);\r\n        \r\n        setBoards(loadedBoards)\r\n        if(loadedBoards.length > 0) {\r\n          if(loadedBoards[0].dashImage) {\r\n            await updateDashBoard(loadedBoards[0])\r\n            setIcons(loadedBoards[0].icons)\r\n            setLoading(false)\r\n          }\r\n        } else {\r\n          setLoading(false)\r\n        }\r\n      } catch(exception) {\r\n        console.log(exception)\r\n      }\r\n    }\r\n    getBoards()\r\n    return () => {source.cancel()}\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const updateMapTile = async(boards) => {\r\n      setLoading(true)\r\n      try {\r\n        if(boards) {\r\n          const boardFocus = boards.find(board => board.id === boardId)\r\n          if(boardFocus && boardFocus.dashImage) {\r\n            await updateDashBoard(boardFocus)\r\n            setIcons(boardFocus.icons)\r\n            setLoading(false)\r\n          }\r\n        } \r\n      } catch(exception) {\r\n        console.log(exception)\r\n      }\r\n    }\r\n    updateMapTile(boards)\r\n    return () => updateMapTile()\r\n  }, [boardId])\r\n\r\n\r\n  const handleLinkClick = () => {\r\n    document.getElementsByClassName('signUpButton')[0].click()\r\n  }\r\n\r\n  return (\r\n    <div className=\"row dashboardRow\">\r\n      <SideBar>\r\n        <UserBlock />\r\n        <DmButtons>\r\n          <VisibleButton label=\"Create\" className=\"optionItems col-6 px-1 py-1 buttonFix\">\r\n            <CreateBoard createNewBoard={createNewBoard} />\r\n          </VisibleButton>\r\n          <LogoutButton />\r\n        </DmButtons>\r\n        <BoardDisplay> \r\n          {boards.map(board => ( \r\n            <BoardTile \r\n              key={board.id} \r\n              gameBoards={boards} \r\n              setBoards={setBoards} \r\n              thisBoard={board} \r\n              setBoardId={setBoardId}\r\n              loading={loading}\r\n              setLoading={setLoading}\r\n            /> \r\n          ))}\r\n        </BoardDisplay>\r\n      </SideBar>\r\n      <MapTray>\r\n        {loading\r\n          ? <LoadingSquare />\r\n          :  boards.length > 0\r\n              ? <MapImageView boardId={boardId} displayImage={displayImage} icons={icons} />\r\n              : <div onClick={handleLinkClick} className=\"addContentBox\">\r\n                  <AddContentCircle color={'rgb(187, 0, 0)'}/>\r\n                </div>\r\n        }\r\n      </MapTray>\r\n      \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Dashboard","import React, { useState, useRef, useEffect } from 'react'\r\nimport gameBoardService from '../services/gameboard'\r\nimport imageUtility from '../utils/imageHelper'\r\nimport iconService from '../services/icon'\r\nimport socketServices from '../services/socketManager'\r\n\r\nfunction BuildIcon({ createIcon, boardId, visible }) {\r\n  const [content, setContent] = useState('')\r\n  const [color, setColor] = useState('rgba(250,235,215,1)')\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    createIcon({\r\n      content,\r\n      color,\r\n      boardId\r\n    })\r\n    setContent('')\r\n    document.getElementById('iconContentInput').blur()\r\n  }\r\n\r\n  const raiseTheBar = ({ target }) => {\r\n    if(window.innerWidth < 420) {\r\n      target.style.transform = \"translateY(-460%)\"\r\n    }\r\n    target.setAttribute('autocomplete', 'off');\r\n  } \r\n\r\n  const lowerTheBar = ({ target }) => {\r\n    target.style.transform = 'translateY(0%)'\r\n  }\r\n \r\n  return (\r\n    <div className={`${visible ? 'visibleTool ' : ''}buildIconFormBox`}>\r\n      <form onSubmit={handleSubmit} className=\"changeMapRow row mt-5\">\r\n\r\n        <label className=\"col-4 mb-1\" htmlFor='iconContentInput'>Content: </label>\r\n        <input\r\n          id=\"iconContentInput\"\r\n          type='text'\r\n          value={content}\r\n          onChange={({ target }) => setContent(target.value) }\r\n          onFocus={raiseTheBar}\r\n          onBlur={lowerTheBar}\r\n          required\r\n          className=\"col-8\"\r\n          autoComplete=\"new-password\"\r\n        />\r\n        <label className=\"col-4 my-1\" htmlFor='iconColorInput'>Color: </label>\r\n        <select \r\n          className=\"col-4\" \r\n          name=\"colors\" \r\n          id=\"iconColorInput\" \r\n          onChange={({ target }) => setColor(target.value)} \r\n        >\r\n          <option \r\n            value=\"rgba(250,235,215,1)\"\r\n            defaultValue\r\n            >White</option>\r\n          <option \r\n            style={{backgroundColor: 'rgba(191, 63, 63, 1)'}} \r\n            value=\"rgba(191, 63, 63, 1)\"\r\n            >Red</option>\r\n          <option \r\n            style={{backgroundColor: 'rgba(63,127,191,1'}} \r\n            value=\"rgba(63,127,191,1)\"\r\n            >Blue</option>\r\n          <option \r\n            style={{backgroundColor: 'rgba(63,191,63,1)'}} \r\n            value=\"rgba(63,191,63,1)\"\r\n            >Green</option>\r\n        </select>\r\n        <button className=\"ms-2 mt-3 col-6 submitButtonFix\" type=\"submit\">Create Icon</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction FileBase64({setLoading, boardId, setImage64, visible }) {\r\n\r\n  const handleChange = async (e) => {\r\n    e.preventDefault()\r\n    setLoading(true)\r\n    let file = fileRef.current.files[0]\r\n    const buffer = await gameBoardService.updateGameBoardImage(file, boardId);\r\n    const mapImage = await imageUtility.convertBuffertoBlob(buffer.data)\r\n    if(mapImage) {\r\n      socketServices.changeMap()\r\n    }\r\n    await setImage64(mapImage)\r\n\r\n    setLoading(false)\r\n  }\r\n\r\n  const fileRef = useRef()\r\n  return (\r\n    <form id=\"uploadForm\" className={`mt-5 ${visible ? 'visibleTool ' : ''}`} encType='multipart/form-data' onSubmit={handleChange}>\r\n\r\n      <label htmlFor=\"fileUpload\" className='fileUpload px-2 mx-2' >Select Image</label>\r\n\r\n      <input ref={fileRef} type=\"file\" id=\"fileUpload\" name=\"file\" required />\r\n\r\n      <input type='submit' value='Upload' />\r\n\r\n    </form>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n\r\nfunction MasterBuilder({\r\n  icons,\r\n  setIcons,\r\n  setImage64,\r\n  setLoading,\r\n  boardId,\r\n  float,\r\n  setFloat\r\n}) {\r\n  const [option, setOption] = useState('')\r\n  const[navBarVis, setNavBarVis] = useState(true)\r\n\r\n  const createIcon = async (iconInfo) => {\r\n    const newIcon = await iconService.createIcon(iconInfo)\r\n    socketServices.createIcon(newIcon)\r\n    setIcons(icons.concat(newIcon))\r\n  }\r\n\r\n  const toggleMovement = () => {\r\n    setNavBarVis(!navBarVis)\r\n    setFloat(!float)\r\n  }\r\n\r\n  let box = null;\r\n\r\n  if(option === 'changeMap') {\r\n    box = <FileBase64 setLoading={setLoading} boardId={boardId} setImage64={setImage64}/>\r\n  } else if (option === 'buildIcon') {\r\n    box = <BuildIcon createIcon={createIcon} boardId={boardId}/>\r\n  }\r\n\r\n\r\n  return (\r\n    <div id=\"dungeonMasterSideBar\" aria-label=\"sidebar\" aria-hidden={navBarVis}className=\"sidebar row\">\r\n      <div onClick={toggleMovement} className=\" dmArmBox buttonArmBox\">\r\n        <div className=\"noselect toggleClickBox dmClickBox\">Tools</div>\r\n      </div>\r\n      <div className=\"toolBarRow row\">\r\n        <div className=\"toolButtonBar col-12 ps-0 pe-0\">\r\n          <button onClick={()=> setOption('changeMap')} \r\n            className=\"changeMap\">Change Map</button>\r\n          <button onClick={()=> setOption('buildIcon')} \r\n            className=\"addIcon\">Add Icon</button>\r\n        </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          {box}\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MasterBuilder","import React, { useState, useEffect, useRef } from 'react'\r\nimport socketServices from '../services/socketManager'\r\nimport { BsChat } from 'react-icons/bs'\r\n\r\n\r\nconst SystemMessage = ({ sender, content }) => {\r\n\r\n  return (\r\n    <div className=\"systemMessage px-2 mb-2\" >\r\n      <div className=\"\">{sender} {content}</div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst MeMessage = ({ sender, content }) => {\r\n\r\n  return (\r\n    <div className=\"meMsgPacket mb-4\" >\r\n      <div className=\"meMsgInitial msgInitial\">{sender}</div>\r\n      <div className=\"msg meMsg\">{content}</div>\r\n    </div>\r\n  )\r\n}\r\nconst ThemMessage = ({ sender, content }) => {\r\n\r\n  return (\r\n    <div className=\"otherMsgPacket mb-4\" >\r\n      <div className=\"otherMsgInitial msgInitial\">{sender}</div>\r\n      <div className=\"msg otherMsg\">{content}</div>\r\n  </div>\r\n  )\r\n}\r\n\r\n\r\nfunction MessengerBar({id, username, session, float, setFloat}) {\r\n  const [navBarVis, setNavBarVis] = useState(true)\r\n  const [messageText, setMessageText] = useState('')\r\n  const [messages, setMessages] = useState([])\r\n  const blueCircleRef = useRef(null)\r\n  const bottomRef = useRef(null)\r\n\r\n  const textSanitizer = (messageText) => {\r\n    const map = {\r\n      '&': '&amp;',\r\n      '<': '&lt;',\r\n      '>': '&gt;',\r\n      \"/\": '&#x2F;',\r\n      \"`\": '&grave;',\r\n      \"$\": '&#36;'\r\n    };\r\n    const reg = /[&<>/`$]/ig;\r\n    return messageText.replace(reg, (match)=>(map[match]));\r\n  }\r\n\r\n  const textAreaSubmit = (e) => {\r\n    if(e.key === 'Enter') {\r\n      e.preventDefault()\r\n      document.getElementById('textMsgForm').requestSubmit()\r\n    }\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n\r\n    const freshText = textSanitizer(messageText)\r\n\r\n    if(messageText) {\r\n      const newMessage = {\r\n        id: Math.random(),\r\n        userId: id,\r\n        username: username,\r\n        content: freshText,\r\n        systemMsg: false\r\n      }\r\n      setMessages(messages.concat(newMessage))\r\n      socketServices.sendMessage(newMessage)\r\n      setMessageText('')\r\n    }\r\n  }\r\n\r\n  const toggleMovement = () => {\r\n    setNavBarVis(!navBarVis)\r\n    setFloat(!float)\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    if(!session) {\r\n      return\r\n    } else {\r\n      socketServices.receiveMessage((message) => {\r\n        setMessages(messages => messages.concat(message))\r\n        \r\n        blueCircleRef.current.id = 'blueCircleBounce'\r\n        setTimeout(() => {\r\n          blueCircleRef.current.id = ''\r\n        }, 1000)\r\n      })\r\n    }\r\n  }, [session])\r\n\r\n  useEffect(() => {\r\n    bottomRef.current.scrollIntoView({ behavior: 'smooth' })\r\n  })\r\n\r\n  return (\r\n    <div id=\"messengerSideBar\" aria-label='sidebar' aria-hidden={navBarVis} className=\"sidebar row msgRow\">\r\n      <div className=\"buttonArmBox msgArmBox\">\r\n        <div ref={blueCircleRef} onClick={toggleMovement} className=\"noselect toggleClickBox msgClickBox\">Chat</div>\r\n      </div>\r\n      <div className=\"messageBox\">\r\n          {messages.map(message => {\r\n            if(message.systemMsg) {\r\n              return <SystemMessage\r\n                key={message.id}\r\n                sender={message.username} \r\n                content={message.content}\r\n                />\r\n            }\r\n            if(id === message.userId) {\r\n              return <MeMessage \r\n                key={message.id} \r\n                sender={username} \r\n                content={message.content} \r\n                />\r\n            } else {\r\n              return <ThemMessage \r\n                key={message.id} \r\n                sender={message.username} \r\n                content={message.content} \r\n                />\r\n            }\r\n          })}\r\n          <div ref={bottomRef}></div>\r\n      </div>\r\n      <div className=\"sendMessageBox\">\r\n        <form className=\"messageTextBox\" onSubmit={handleSubmit} id=\"textMsgForm\">\r\n          <textarea\r\n            id=\"chatMessageBox\"\r\n            className='textAreaBox'\r\n            value={messageText}\r\n            onChange={({ target })=> setMessageText(target.value)}\r\n            onKeyDown={textAreaSubmit}\r\n          />\r\n          <button type=\"submit\" className=\"pb-1 submitMessageButton\"><BsChat size=\"50%\" /></button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MessengerBar","import React, { useState, useRef, useEffect } from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { useHistory, useLocation } from \"react-router-dom\"\r\nimport axios from 'axios'\r\nimport gameBoardService from '../services/gameboard'\r\nimport imageUtility from '../utils/imageHelper'\r\nimport LoadingSquare from './LoadingSquare'\r\nimport Icon from './Icon'\r\nimport MasterBuilderNav from './MasterBuilderBar.js'\r\nimport MessengerBar from './MessengerBar'\r\nimport socketServices from '../services/socketManager'\r\nimport iconService from '../services/icon'\r\nimport { useAuth } from '../services/use-auth'\r\nimport { useNotify } from '../services/use-notification'\r\nimport { BsThreeDotsVertical } from 'react-icons/bs'\r\nimport { NotificationSuccess, NotificationError } from './Notification'\r\n\r\n\r\nfunction MapImageView(props) {\r\n  const  { float } = props\r\n  return (\r\n    <div className=\"gameboardMapImageView mapImageView col-11 d-flex\">\r\n      <div className={`${float? 'floating' : ''} gameboardImageBox mt-3 mb-5 d-flex`}>\r\n        <div id=\"aspectRatioBoxBoard\">\r\n          {props.children}\r\n        </div>\r\n      </div>\r\n\r\n    </div> \r\n  )\r\n}\r\n\r\nfunction MapTray({ mapSrc, loading, icons, setIcons, deleteIcon, updatePosition, float }) { \r\n  \r\n  return (\r\n    <div  className=\"mapTrayGameBoard col-12 py-5 px-5 d-flex\">\r\n      <div title=\"Drag items here to delete\" id=\"dropZoneDelete\" className=\"d-flex\">\r\n        <p className=\"noselect pt-3\">Delete</p>\r\n      </div>\r\n      {loading\r\n        ? <LoadingSquare />\r\n        : <MapImageView float={float}>\r\n            {icons.map(icon => {\r\n              return <Icon  \r\n                  style={{backgroundColor: icon.color}}\r\n                  content={icon.content}\r\n                  id={icon.id}\r\n                  key={icon.id}\r\n                  position={icon.position}\r\n                  setIcons={setIcons}\r\n                  icons={icons}\r\n                  deleteIcon={deleteIcon}\r\n                  updatePosition={updatePosition}\r\n                /> \r\n            })}\r\n            <img draggable=\"false\" id='gameBoardMap' className=\"noselect gameboardMapImage mapImage img-fluid\" alt='' src={mapSrc} />\r\n          </MapImageView>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction DropMenu({ userId, sessionLive, connectToSocket, history, boardId }) {\r\n\r\n  return (\r\n    <div className=\"dropMenuContainer row\">\r\n      {sessionLive && userId\r\n\r\n        ? <div id=\"sessionIdBox\">\r\n            <div className=\"noselect\">\r\n              Share Session Link:\r\n            </div>  \r\n            <div className=\"col-12\">\r\n              {`${window.location.host}/gameboard/${boardId}`}\r\n            </div>\r\n            \r\n          </div>\r\n        : null\r\n      }\r\n      <div className=\"dropTile rightSide col-12\">\r\n        <button className=\"noselect tile dropButton\" onClick={() => history.goBack()}>\r\n          {userId ? 'Dashboard' : 'Home'}\r\n        </button>\r\n        {userId\r\n          ? <button onClick={connectToSocket} className={` noselect tile dropButtonSession`}>\r\n              {sessionLive ? 'End Session' : 'Start Session'}\r\n            </button> \r\n          : null\r\n        }\r\n   \r\n      </div>\r\n\r\n\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nfunction DropDownNav({ sessionLive, history, connectToSocket, boardId }) {\r\n  const [visibility, setVisibility] = useState(false)\r\n  const boxRef = useRef();\r\n  const auth = useAuth();\r\n  const authCheck = auth.userId ? auth.userId : null;\r\n\r\n  const checkForClick = (event) => {\r\n    if(event.target === boxRef.current) {\r\n      setVisibility(!visibility)\r\n    }\r\n    if(!boxRef.current || !boxRef.current.contains(event.target)) {\r\n        setVisibility(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('click', checkForClick)\r\n    return () => {\r\n      document.removeEventListener('click', checkForClick)\r\n    }\r\n  })\r\n\r\n  return (\r\n    <div ref={boxRef} onClick={checkForClick} className={`${sessionLive ? 'activeBurger' : ''} ${visibility ? 'openMenu' : ''}`} id=\"hamburger\">\r\n      <BsThreeDotsVertical className=\"hide\" size=\"20px\" />\r\n      {visibility\r\n        ? <DropMenu userId={authCheck} sessionLive={sessionLive} history={history} connectToSocket={connectToSocket} boardId={boardId} />\r\n        : null\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nfunction Gameboard(props) {\r\n  const [image64, setImage64] = useState('')\r\n  const [icons, setIcons] = useState([])\r\n  const [loading, setLoading] = useState(false)\r\n  const [sessionLive, setSessionLive] = useState(false)\r\n  const [float, setFloat] = useState(false)\r\n  const [guest, setGuest] = useState({\r\n    id: '',\r\n    username: ''\r\n  })\r\n  const auth = useAuth()\r\n  const notify = useNotify()\r\n  const boardId = props.match.params.id\r\n  let history = useHistory();\r\n  const location = useLocation();\r\n\r\n\r\n\r\n\r\n  const connectToSocket = async () => {\r\n    if(sessionLive === false) {\r\n      if(auth.userId) {\r\n        socketServices.initiateDMSocket(boardId)\r\n      }\r\n\r\n      socketServices.userEntryExit((statusType) => {\r\n        if(statusType === 'userConnect') {\r\n          notify.notify({\r\n            notification: 'New user has joined the game!',\r\n            errorType: null,\r\n            successType: 'newUserJoined'\r\n          })\r\n        }\r\n        if(statusType === \"userDisconnect\") {\r\n          notify.notify({\r\n            notification: 'User has left the game!',\r\n            errorType: 'userExit',\r\n            successType: null\r\n          })\r\n        }\r\n      })\r\n      \r\n      socketServices.addIcon((iconObj) => {\r\n        setIcons(icons => [...icons, iconObj])\r\n      })\r\n  \r\n      socketServices.updateIcon((position, id) => {\r\n        setIcons((icons) => icons.map(icon => {\r\n          if(icon.id === id) {\r\n            icon.position.x = position.x\r\n            icon.position.y = position.y\r\n          }\r\n          return icon\r\n        }))\r\n      })\r\n  \r\n      socketServices.clearIcon((id) => {\r\n        console.log('removing this id', id)\r\n        setIcons((icons) => icons.filter(icon => icon.id !== id))\r\n      })\r\n  \r\n      socketServices.updateMap( async() => {\r\n        setLoading(true)\r\n        const gameBoard = await gameBoardService.getGameBoard(boardId)\r\n        const boardImage = await imageUtility.convertBuffertoBlob(gameBoard.image.data)\r\n        setImage64(boardImage)\r\n        if(boardImage) {\r\n          setLoading(false)\r\n        }\r\n      })\r\n      setSessionLive(true)\r\n    } else {\r\n      socketServices.dmDisconnecting();\r\n      setSessionLive(false);\r\n    }\r\n\r\n  }\r\n\r\n  const updateIcon = async(position, id) => {\r\n    socketServices.moveIcon(position, id)\r\n    await iconService.updateIcon(position, id)\r\n    setIcons((icons) => icons.map(icon => {\r\n      if(icon.id === id) {\r\n        icon.position.x = position.x;\r\n        icon.position.y = position.y;\r\n      }\r\n      return icon\r\n    }))\r\n  }\r\n\r\n  const deleteIcon = async (id) => {\r\n    await iconService.deleteIcon(id)\r\n    socketServices.deleteIcon(id)\r\n    setIcons((icons) => icons.filter(icon => icon.id !== id))\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (location.state) {\r\n      setGuest({\r\n        id: location.state.id,\r\n        username: location.state.username\r\n      })\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const source = axios.CancelToken.source()\r\n\r\n    const loadGameBoard = async() => {\r\n      try {\r\n        setLoading(true)\r\n        const gameBoard = await gameBoardService.getGameBoard(boardId, source.token)\r\n        const boardImage = await imageUtility.convertBuffertoBlob(gameBoard.image.data)\r\n        setImage64(boardImage)\r\n        setIcons(gameBoard.icons)\r\n        setLoading(false)\r\n      } catch (exception) {\r\n        console.log('loading mapImage failed', exception)\r\n      }\r\n    }\r\n    const guestAuthorization = async() => {\r\n      console.log('GUEST', guest)\r\n      if(!location.state) {\r\n        let guestName = window.prompt('Name?')\r\n        setGuest({...guest, username: guestName })\r\n        socketServices.initiateGuestSocket(boardId, history, guestName, loadGameBoard)\r\n      } else {\r\n        socketServices.initiateGuestSocket(boardId, history, location.state.username, loadGameBoard)\r\n      }\r\n    }\r\n\r\n    if(auth.userId || window.localStorage.getItem('loggedDungeonMaster')) {\r\n      loadGameBoard();\r\n    } else {\r\n      guestAuthorization();\r\n      connectToSocket();\r\n    }\r\n    return () => {\r\n      source.cancel()\r\n      socketServices.disconnectSocket()\r\n    }\r\n  }, [])\r\n\r\n\r\n  return (\r\n    <>\r\n    <div className=\"gameBoardRow row\">\r\n      <DropDownNav sessionLive={sessionLive} history={history} connectToSocket={connectToSocket} boardId={boardId} />\r\n      <MapTray \r\n        deleteIcon={deleteIcon} \r\n        mapSrc={image64} \r\n        loading={loading} \r\n        icons={icons} \r\n        setIcons={setIcons} \r\n        updatePosition={updateIcon}\r\n        float={float}\r\n      />\r\n    </div>\r\n    {auth.userId\r\n      ?    <MasterBuilderNav\r\n              setLoading={setLoading}\r\n              boardId={boardId}\r\n              setImage64={setImage64}\r\n              icons={icons}\r\n              setIcons={setIcons}\r\n              float={float}\r\n              setFloat={setFloat}\r\n            />\r\n      : null\r\n    }\r\n    <MessengerBar\r\n        id={guest.id || auth.userId}\r\n        username={guest.username || auth.username}\r\n        session={sessionLive}\r\n        float={float}\r\n        setFloat={setFloat}\r\n     />\r\n    </>\r\n  )\r\n}\r\n\r\n\r\nexport default Gameboard\r\n\r\n","import React, { useState } from 'react'\r\nimport { Switch, Route, Link, Redirect } from 'react-router-dom'\r\nimport Login from './Login'\r\nimport Dashboard from './Dashboard'\r\nimport { useAuth } from '../services/use-auth'\r\nimport Gameboard from './Gameboard'\r\n\r\nfunction Layout() {\r\n  const auth = useAuth()\r\n  \r\n  return (\r\n    <>\r\n    <Switch>\r\n      <Route path='/gameboard/:id' component={Gameboard} />      \r\n      <Route path=\"/\" render={() => (\r\n        auth.userId \r\n          ? <Redirect from='/' to='/dashboard' /> \r\n          : <Redirect from='/' to='/login' />\r\n        )}\r\n      /> \r\n    </Switch>\r\n\r\n      <Switch>\r\n        <Route path=\"/dashboard\" component={Dashboard} />\r\n        <Route path='/login' component={Login} />\r\n      </Switch>\r\n    </>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport default Layout\r\n","import React, { useState, useEffect } from 'react'\nimport './App.css';\nimport { BrowserRouter as Router } from 'react-router-dom'\nimport Layout from './components/Layout'\nimport { ProvideAuth } from './services/use-auth'\nimport { ProvideNotify } from './services/use-notification'\n\n\n/*{user ?\n  <Dashboard user={user} setUser={setUser} />\n  : <div id=\"background\">\n      <Login setUser={setUser} />\n  </div>\n}*/\n\nfunction App() {\n\n  return (\n    <Router>\n      <ProvideNotify>\n        <ProvideAuth>\n          <Layout />\n        </ProvideAuth>\n      </ProvideNotify>\n\n    </Router>\n  );\n}\n\nexport default App;\n/*\nconst [notes, setNotes] = useState([])\n  const [connected, setConnected] = useState(false)\n\n  socket.on('updated-content', (res) => {\n    setNotes(res)\n  })\n  \n  useEffect(() => {\n    socket.emit('Hello_there', null);\n    const eventHandler = () => setConnected(true)\n\n    socket.on('Welcome from server', () => {\n      console.log('I am connected with the backend')\n      eventHandler()\n    });\n\n    return () => {\n      socket.off('Welcome from server', eventHandler)\n    }\n  }, [])\n\n  useEffect(() => {\n    const getAllNotes = async() => {\n      const notes = await axios.get('/api/notes')\n      setNotes(notes.data)\n    }\n\n    getAllNotes()\n  },[])\n\n  \n  const testThis = async () => {\n    const newNote = {\n      content: 'This is another test!',\n      date: new Date(),\n      important: false\n    }\n    await axios.post('/api/notes', newNote)\n\n  }\n  \n      <div className=\"App\">\n      <button onClick={testThis}>Test</button>\n      {notes.map(note => (\n        <div key={note.id}>{note.content}</div>\n      ))}\n    </div>\n\n  */","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}